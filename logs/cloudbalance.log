2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@48584d55, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 15:36:01.430] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:36:01.450] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 15:36:01.462] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:36:01.470] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(340435248<open>)] for JPA transaction
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@390552195 wrapping org.postgresql.jdbc.PgConnection@50018abd] read-only
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@76a1618f]
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(340435248<open>)] for JPA transaction
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(340435248<open>)]
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@390552195 wrapping org.postgresql.jdbc.PgConnection@50018abd]
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:36:01.480] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 5 ms
[2026-01-13 15:36:01.489] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:36:01 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:36:10 [RedisMessageListenerContainer-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:36:10 [RedisMessageListenerContainer-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:36:10 [RedisMessageListenerContainer-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:36:10 [RedisMessageListenerContainer-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:36:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 15:36:16 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:36:16 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:36:16 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@48584d55, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:36:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 15:36:16 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 15:36:16 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 15:36:16 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:36:16 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 15:36:16 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 15:36:16.994] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:36:17.020] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 15:36:17.047] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:36:17.079] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1736708673<open>)] for JPA transaction
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1474627273 wrapping org.postgresql.jdbc.PgConnection@6f986c5b] read-only
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7a285996]
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1736708673<open>)] for JPA transaction
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1736708673<open>)]
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1474627273 wrapping org.postgresql.jdbc.PgConnection@6f986c5b]
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:36:17.120] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 14 ms
[2026-01-13 15:36:17.139] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:36:17 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@48584d55, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 15:36:19.010] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:36:19.029] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 15:36:19.052] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:36:19.076] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(295411233<open>)] for JPA transaction
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1628864562 wrapping org.postgresql.jdbc.PgConnection@50018abd] read-only
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1e70582e]
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(295411233<open>)] for JPA transaction
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(295411233<open>)]
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1628864562 wrapping org.postgresql.jdbc.PgConnection@50018abd]
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:36:19.112] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 13 ms
[2026-01-13 15:36:19.142] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:36:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:38:46 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /accounts
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /accounts
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@48584d55, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /accounts
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/accounts", parameters={}
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#createAwsAccount(AwsAccountCreateRequest)
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [AwsAccountCreateRequest(accountId=, accountAlias=, roleArn=)]
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data={accountAlias=Account alias is required, accountId=Acc (truncated)...]
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.cloudkeeper.cloudbalance_backend.dto.response.ApiResponse<com.cloudkeeper.cloudbalance_backend.dto.response.AwsAccountResponse>> com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.createAwsAccount(com.cloudkeeper.cloudbalance_backend.dto.request.AwsAccountCreateRequest) with 5 errors: [Field error in object 'awsAccountCreateRequest' on field 'accountId': rejected value []; codes [NotBlank.awsAccountCreateRequest.accountId,NotBlank.accountId,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountId,accountId]; arguments []; default message [accountId]]; default message [Account ID is required]] [Field error in object 'awsAccountCreateRequest' on field 'accountAlias': rejected value []; codes [Pattern.awsAccountCreateRequest.accountAlias,Pattern.accountAlias,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountAlias,accountAlias]; arguments []; default message [accountAlias],[Ljakarta.validation.constraints.Pattern$Flag;@24506a82,^[a-zA-Z0-9\s\-_]+$]; default message [Account alias can only contain letters, numbers, spaces, hyphens, and underscores.]] [Field error in object 'awsAccountCreateRequest' on field 'roleArn': rejected value []; codes [Pattern.awsAccountCreateRequest.roleArn,Pattern.roleArn,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.roleArn,roleArn]; arguments []; default message [roleArn],[Ljakarta.validation.constraints.Pattern$Flag;@24506a82,arn:aws:iam::\d{12}:role/[\w+=,.@-]+]; default message [Invalid IAM Role ARN format]] [Field error in object 'awsAccountCreateRequest' on field 'accountId': rejected value []; codes [Pattern.awsAccountCreateRequest.accountId,Pattern.accountId,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountId,accountId]; arguments []; default message [accountId],[Ljakarta.validation.constraints.Pattern$Flag;@24506a82,^[0-9]{12}$]; default message [Account ID must be exactly 12 digits]] [Field error in object 'awsAccountCreateRequest' on field 'accountAlias': rejected value []; codes [NotBlank.awsAccountCreateRequest.accountAlias,NotBlank.accountAlias,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountAlias,accountAlias]; arguments []; default message [accountAlias]]; default message [Account alias is required]] ]
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:38:46 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /accounts
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@48584d55, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /accounts
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/accounts", parameters={}
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#createAwsAccount(AwsAccountCreateRequest)
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [AwsAccountCreateRequest(accountId=, accountAlias=, roleArn=)]
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data={accountAlias=Account alias is required, accountId=Acc (truncated)...]
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.cloudkeeper.cloudbalance_backend.dto.response.ApiResponse<com.cloudkeeper.cloudbalance_backend.dto.response.AwsAccountResponse>> com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.createAwsAccount(com.cloudkeeper.cloudbalance_backend.dto.request.AwsAccountCreateRequest) with 5 errors: [Field error in object 'awsAccountCreateRequest' on field 'roleArn': rejected value []; codes [Pattern.awsAccountCreateRequest.roleArn,Pattern.roleArn,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.roleArn,roleArn]; arguments []; default message [roleArn],[Ljakarta.validation.constraints.Pattern$Flag;@24506a82,arn:aws:iam::\d{12}:role/[\w+=,.@-]+]; default message [Invalid IAM Role ARN format]] [Field error in object 'awsAccountCreateRequest' on field 'accountId': rejected value []; codes [Pattern.awsAccountCreateRequest.accountId,Pattern.accountId,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountId,accountId]; arguments []; default message [accountId],[Ljakarta.validation.constraints.Pattern$Flag;@24506a82,^[0-9]{12}$]; default message [Account ID must be exactly 12 digits]] [Field error in object 'awsAccountCreateRequest' on field 'accountId': rejected value []; codes [NotBlank.awsAccountCreateRequest.accountId,NotBlank.accountId,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountId,accountId]; arguments []; default message [accountId]]; default message [Account ID is required]] [Field error in object 'awsAccountCreateRequest' on field 'accountAlias': rejected value []; codes [Pattern.awsAccountCreateRequest.accountAlias,Pattern.accountAlias,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountAlias,accountAlias]; arguments []; default message [accountAlias],[Ljakarta.validation.constraints.Pattern$Flag;@24506a82,^[a-zA-Z0-9\s\-_]+$]; default message [Account alias can only contain letters, numbers, spaces, hyphens, and underscores.]] [Field error in object 'awsAccountCreateRequest' on field 'accountAlias': rejected value []; codes [NotBlank.awsAccountCreateRequest.accountAlias,NotBlank.accountAlias,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountAlias,accountAlias]; arguments []; default message [accountAlias]]; default message [Account alias is required]] ]
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:38:54 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /accounts
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@48584d55, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /accounts
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/accounts", parameters={}
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#createAwsAccount(AwsAccountCreateRequest)
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [AwsAccountCreateRequest(accountId=, accountAlias=, roleArn=)]
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data={accountAlias=Account alias can only contain letters,  (truncated)...]
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.cloudkeeper.cloudbalance_backend.dto.response.ApiResponse<com.cloudkeeper.cloudbalance_backend.dto.response.AwsAccountResponse>> com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.createAwsAccount(com.cloudkeeper.cloudbalance_backend.dto.request.AwsAccountCreateRequest) with 5 errors: [Field error in object 'awsAccountCreateRequest' on field 'roleArn': rejected value []; codes [Pattern.awsAccountCreateRequest.roleArn,Pattern.roleArn,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.roleArn,roleArn]; arguments []; default message [roleArn],[Ljakarta.validation.constraints.Pattern$Flag;@24506a82,arn:aws:iam::\d{12}:role/[\w+=,.@-]+]; default message [Invalid IAM Role ARN format]] [Field error in object 'awsAccountCreateRequest' on field 'accountAlias': rejected value []; codes [NotBlank.awsAccountCreateRequest.accountAlias,NotBlank.accountAlias,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountAlias,accountAlias]; arguments []; default message [accountAlias]]; default message [Account alias is required]] [Field error in object 'awsAccountCreateRequest' on field 'accountAlias': rejected value []; codes [Pattern.awsAccountCreateRequest.accountAlias,Pattern.accountAlias,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountAlias,accountAlias]; arguments []; default message [accountAlias],[Ljakarta.validation.constraints.Pattern$Flag;@24506a82,^[a-zA-Z0-9\s\-_]+$]; default message [Account alias can only contain letters, numbers, spaces, hyphens, and underscores.]] [Field error in object 'awsAccountCreateRequest' on field 'accountId': rejected value []; codes [NotBlank.awsAccountCreateRequest.accountId,NotBlank.accountId,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountId,accountId]; arguments []; default message [accountId]]; default message [Account ID is required]] [Field error in object 'awsAccountCreateRequest' on field 'accountId': rejected value []; codes [Pattern.awsAccountCreateRequest.accountId,Pattern.accountId,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [awsAccountCreateRequest.accountId,accountId]; arguments []; default message [accountId],[Ljakarta.validation.constraints.Pattern$Flag;@24506a82,^[0-9]{12}$]; default message [Account ID must be exactly 12 digits]] ]
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:39:00 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users/me
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@48584d55, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users/me
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users/me", parameters={}
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getCurrentUser(Authentication)
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getCurrentUser(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getCurrentUser(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-13 15:40:44.369] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:40:44.381] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users/me
[2026-01-13 15:40:44.389] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:40:44.398] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
[2026-01-13 15:40:44.405] [http-nio-8080-exec-2] [INFO] [UserController] - Fetching current user info.
[2026-01-13 15:40:44.410] [http-nio-8080-exec-2] [INFO] [UserService] - Fetching user by email : admin@cloudbalance.com
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
[2026-01-13 15:40:44.419] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 14 ms
[2026-01-13 15:40:44.430] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Current user retrieved successfully., data=UserResponse(id=1, firs (truncated)...]
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:40:44 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@48584d55, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 15:40:44.504] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:40:44.512] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 15:40:44.522] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:40:44.540] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1818555379<open>)] for JPA transaction
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1316826225 wrapping org.postgresql.jdbc.PgConnection@6f986c5b] read-only
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@388aa583]
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1818555379<open>)] for JPA transaction
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1818555379<open>)]
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1316826225 wrapping org.postgresql.jdbc.PgConnection@6f986c5b]
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:40:44.559] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 4 ms
[2026-01-13 15:40:44.569] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:40:44 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:41:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /accounts
2026-01-13 15:41:17 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:41:17 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 15:41:17 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2026-01-13 15:41:17 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:41:17 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 15:41:56 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /accounts
2026-01-13 15:41:56 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:41:56 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 15:41:56 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2026-01-13 15:41:56 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:41:56 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 15:42:10 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
2026-01-13 15:42:10 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:42:10 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 15:42:10 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2026-01-13 15:42:10 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:42:10 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=admin@cloudbalance.com, password=Admin123!)]
[2026-01-13 15:42:13.559] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:42:13.575] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-13 15:42:13.584] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:42:13.589] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(662269315<open>)] for JPA transaction
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AuthService.login]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3f6cca3]
[2026-01-13 15:42:13.598] [http-nio-8080-exec-4] [INFO] [AuthService] - Login attempt for email :admin@cloudbalance.com
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-13 15:42:13.663] [http-nio-8080-exec-4] [INFO] [AuthService] - Authentication successful for: admin@cloudbalance.com
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
[2026-01-13 15:42:13.671] [http-nio-8080-exec-4] [WARN] [SessionManagementService] - maxCurrentSessions : 50 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-13 15:42:13.676] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Creating Redis session for user : admin@cloudbalance.com on device: Chrome on Linux
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 15:42:13.685] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-13 15:42:13.690] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - User admin@cloudbalance.com currently has 1 active sessions (max allowed: 50) : [A12EB5E2317F474199FCB938023921D3]
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 15:42:13.696] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - New Redis session created: 3347D4A0BCF9466B9AFD0C52AD6CA3E8 for user: admin@cloudbalance.com
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(662269315<open>)] for JPA transaction
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(662269315<open>)] for JPA transaction
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select rt1_0.id,rt1_0.created_at,rt1_0.device_info,rt1_0.expiry_date,rt1_0.ip_address,rt1_0.last_activity_time,rt1_0.revoked,rt1_0.token,rt1_0.token_version,rt1_0.user_id from refresh_tokens rt1_0 where rt1_0.user_id=? and rt1_0.device_info=? and rt1_0.revoked=false
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(662269315<open>)] for JPA transaction
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 15:42:13.703] [http-nio-8080-exec-4] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-13 15:42:13.708] [http-nio-8080-exec-4] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-13 15:42:13.713] [http-nio-8080-exec-4] [INFO] [AuthService] - Refresh Token: 6998f943-6391-448a-bb9e-19f240dfea25
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(662269315<open>)] for JPA transaction
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
[2026-01-13 15:42:13.719] [http-nio-8080-exec-4] [INFO] [AuthService] - User logged in successfully : admin@cloudbalance.com
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(662269315<open>)]
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - update users set active=?,email=?,first_name=?,last_login=?,last_name=?,password=?,role=?,token_version=?,updated_at=? where id=?
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - update refresh_tokens set device_info=?,expiry_date=?,ip_address=?,last_activity_time=?,revoked=?,token=?,token_version=?,user_id=? where id=?
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:42:13.726] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 129 ms
[2026-01-13 15:42:13.731] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:13 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.SessionManagementService.isSessionValid]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1440200794<open>)] for JPA transaction
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6a2d672a]
[2026-01-13 15:42:13.776] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [3347D4A0BCF9466B9AFD0C52AD6CA3E8]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 15:42:13.788] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 3 ms
[2026-01-13 15:42:13.796] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - Result : true
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1440200794<open>)]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager after transaction
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.SessionManagementService.updateSessionActivity]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(484143718<open>)] for JPA transaction
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1dce52e0]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(484143718<open>)]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager after transaction
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@18e195a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@88cd440]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 15:42:13.810] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:42:13.817] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 15:42:13.824] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:42:13.832] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(52373249<open>)] for JPA transaction
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1758684905 wrapping org.postgresql.jdbc.PgConnection@50018abd] read-only
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@7c8b82f0]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(52373249<open>)] for JPA transaction
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(52373249<open>)]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1758684905 wrapping org.postgresql.jdbc.PgConnection@50018abd]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:42:13.842] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2026-01-13 15:42:13.849] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@18e195a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 15:42:15.327] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:42:15.334] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 15:42:15.340] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:42:15.347] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1272907971<open>)] for JPA transaction
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1533371821 wrapping org.postgresql.jdbc.PgConnection@6f986c5b] read-only
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3efbbaea]
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1272907971<open>)] for JPA transaction
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1272907971<open>)]
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1533371821 wrapping org.postgresql.jdbc.PgConnection@6f986c5b]
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:42:15.358] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 4 ms
[2026-01-13 15:42:15.365] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /accounts
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@18e195a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /accounts
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/accounts", parameters={}
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#createAwsAccount(AwsAccountCreateRequest)
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [AwsAccountCreateRequest(accountId=125235213526, accountAlias=Testing, roleArn=arn:aws:iam::951485052 (truncated)...]
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.createAwsAccount(com.cloudkeeper.cloudbalance_backend.dto.request.AwsAccountCreateRequest); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.createAwsAccount(com.cloudkeeper.cloudbalance_backend.dto.request.AwsAccountCreateRequest); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 15:42:29.528] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:42:29.540] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/accounts
[2026-01-13 15:42:29.547] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:42:29.553] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
[2026-01-13 15:42:29.567] [http-nio-8080-exec-9] [INFO] [AwsAccountController] - Creating AWS account : Testing
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(957154734<open>)] for JPA transaction
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.createAwsAccount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@521077ce]
[2026-01-13 15:42:29.576] [http-nio-8080-exec-9] [INFO] [AwsAccountService] - Creating AWS account with ID : 125235213526
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.AwsAccountRepository.findByAccountId(java.lang.String)]: 'SELECT a FROM AwsAccount a WHERE a.accountId = :accountId'
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0 where aa1_0.account_id=?
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(957154734<open>)] for JPA transaction
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - insert into aws_accounts (account_alias,account_id,active,created_at,external_account_id,role_arn,update_at) values (?,?,?,?,?,?,?)
[2026-01-13 15:42:29.586] [http-nio-8080-exec-9] [INFO] [AwsAccountService] - AWS account created successfully : 4
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(957154734<open>)]
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:42:29.595] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Response Time : 28 ms
[2026-01-13 15:42:29.601] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Account created successfully., data=AwsAccountResponse(id=4, accou (truncated)...]
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:29 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@18e195a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 15:42:38.814] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:42:38.820] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 15:42:38.828] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:42:38.835] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2086180058<open>)] for JPA transaction
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1696764999 wrapping org.postgresql.jdbc.PgConnection@50018abd] read-only
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1066a735]
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2086180058<open>)] for JPA transaction
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2086180058<open>)]
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1696764999 wrapping org.postgresql.jdbc.PgConnection@50018abd]
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:42:38.845] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Response Time : 4 ms
[2026-01-13 15:42:38.852] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:38 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@18e195a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true", parameters={masked}
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-13 15:42:53.849] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:42:53.862] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-13 15:42:53.874] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:42:53.883] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1518788370<open>)] for JPA transaction
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.UserService.getAllUsers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@978590520 wrapping org.postgresql.jdbc.PgConnection@50018abd] read-only
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@11733fbd]
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract org.springframework.data.domain.Page com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByActive(java.lang.Boolean,org.springframework.data.domain.Pageable)]: 'SELECT u FROM User u WHERE u.active = :active ORDER BY u.createdAt desc'
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.active=? order by u1_0.created_at desc fetch first ? rows only
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1518788370<open>)]
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@978590520 wrapping org.postgresql.jdbc.PgConnection@50018abd]
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:42:53.893] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2026-01-13 15:42:53.900] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@18e195a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 15:42:54.725] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:42:54.732] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 15:42:54.738] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:42:54.749] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1211806588<open>)] for JPA transaction
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2126317807 wrapping org.postgresql.jdbc.PgConnection@6f986c5b] read-only
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@2b65fb05]
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1211806588<open>)] for JPA transaction
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1211806588<open>)]
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2126317807 wrapping org.postgresql.jdbc.PgConnection@6f986c5b]
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:42:54.758] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2026-01-13 15:42:54.764] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:42:54 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@18e195a6, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true", parameters={masked}
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-13 15:43:18.090] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:43:18.103] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-13 15:43:18.113] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:43:18.123] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(676129028<open>)] for JPA transaction
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.UserService.getAllUsers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2095350146 wrapping org.postgresql.jdbc.PgConnection@50018abd] read-only
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@6b37762a]
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract org.springframework.data.domain.Page com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByActive(java.lang.Boolean,org.springframework.data.domain.Pageable)]: 'SELECT u FROM User u WHERE u.active = :active ORDER BY u.createdAt desc'
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.active=? order by u1_0.created_at desc fetch first ? rows only
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(676129028<open>)]
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2095350146 wrapping org.postgresql.jdbc.PgConnection@50018abd]
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:43:18.132] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 2 ms
[2026-01-13 15:43:18.138] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:43:18 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:50:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /cost-explorer/reports
2026-01-13 15:50:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:50:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8080/api/v1/cost-explorer/reports?continue to session
2026-01-13 15:50:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 15:50:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2026-01-13 15:50:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:50:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8080/api/v1/error?continue to session
2026-01-13 15:50:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=admin@cloudbalance.com, password=Admin123!)]
[2026-01-13 15:50:18.611] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:50:18.620] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-13 15:50:18.627] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:50:18.633] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(633256510<open>)] for JPA transaction
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AuthService.login]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4d8b61f0]
[2026-01-13 15:50:18.639] [http-nio-8080-exec-8] [INFO] [AuthService] - Login attempt for email :admin@cloudbalance.com
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-13 15:50:18.706] [http-nio-8080-exec-8] [INFO] [AuthService] - Authentication successful for: admin@cloudbalance.com
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
[2026-01-13 15:50:18.714] [http-nio-8080-exec-8] [WARN] [SessionManagementService] - maxCurrentSessions : 50 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-13 15:50:18.720] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - Creating Redis session for user : admin@cloudbalance.com on device: Desktop
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 15:50:18.731] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - Retrieved 2 active sessions for userId: 1
[2026-01-13 15:50:18.738] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - User admin@cloudbalance.com currently has 2 active sessions (max allowed: 50) : [A12EB5E2317F474199FCB938023921D3, 3347D4A0BCF9466B9AFD0C52AD6CA3E8]
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 15:50:18.746] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - New Redis session created: 9B7955BBC49A4315922CD1DE2009E82C for user: admin@cloudbalance.com
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(633256510<open>)] for JPA transaction
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(633256510<open>)] for JPA transaction
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select rt1_0.id,rt1_0.created_at,rt1_0.device_info,rt1_0.expiry_date,rt1_0.ip_address,rt1_0.last_activity_time,rt1_0.revoked,rt1_0.token,rt1_0.token_version,rt1_0.user_id from refresh_tokens rt1_0 where rt1_0.user_id=? and rt1_0.device_info=? and rt1_0.revoked=false
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(633256510<open>)] for JPA transaction
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - insert into refresh_tokens (created_at,device_info,expiry_date,ip_address,last_activity_time,revoked,token,token_version,user_id) values (?,?,?,?,?,?,?,?,?)
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 15:50:18.755] [http-nio-8080-exec-8] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-13 15:50:18.762] [http-nio-8080-exec-8] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-13 15:50:18.768] [http-nio-8080-exec-8] [INFO] [AuthService] - Refresh Token: 5b1d27f7-1657-4a85-ac36-8dde6e255afd
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(633256510<open>)] for JPA transaction
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
[2026-01-13 15:50:18.778] [http-nio-8080-exec-8] [INFO] [AuthService] - User logged in successfully : admin@cloudbalance.com
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(633256510<open>)]
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - update users set active=?,email=?,first_name=?,last_login=?,last_name=?,password=?,role=?,token_version=?,updated_at=? where id=?
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 15:50:18.792] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 153 ms
[2026-01-13 15:50:18.797] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:50:18 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /cost-explorer/reports
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.SessionManagementService.isSessionValid]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(226392140<open>)] for JPA transaction
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@26e78ee1]
[2026-01-13 15:50:22.487] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [9B7955BBC49A4315922CD1DE2009E82C]
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 15:50:22.495] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 1 ms
[2026-01-13 15:50:22.501] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Result : true
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(226392140<open>)]
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager after transaction
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.SessionManagementService.updateSessionActivity]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1387545014<open>)] for JPA transaction
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@483e5d87]
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1387545014<open>)]
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager after transaction
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from FD9EA5DA9A8CFE54C120228B9E412280
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@1ec00c90, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FD9EA5DA9A8CFE54C120228B9E412280], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3031826b]
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /cost-explorer/reports
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/cost-explorer/reports", parameters={}
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController#getAllReports(String, List, List, String, String)
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
2026-01-13 15:50:22 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
[2026-01-13 15:50:22.525] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 15:50:22.532] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/cost-explorer/reports
[2026-01-13 15:50:22.538] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 15:50:22.545] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-13 15:50:22 [http-nio-8080-exec-1] INFO  c.s.s.internal.ServerConnection - Actively querying parameter QUERY_TAG from server.
2026-01-13 15:50:23 [http-nio-8080-exec-1] INFO  c.s.s.internal.ServerConnection - Execute query [queryID: 01c1b3ac-0001-7cc2-000b-bab60002c40e] SELECT
    service,
    YEAR(bill_date)  AS bill_year,
    MONTH(bill_date) AS bill_month,
    SUM(cost) AS total_cost
FROM costreport
WHERE bill_date >= COALESCE(null, '1900-01-01'::DATE)
  AND bill_date <= COALESCE(null, CURRENT_DATE())
GROUP BY service, YEAR(bill_date), MONTH(bill_date)
ORDER BY service, bill_year, bill_month;

[2026-01-13 15:50:23.345] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 795 ms
[2026-01-13 15:50:23.351] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 15:50:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 15:50:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Reports fetched successfully, data=CostReportResponse(groupWise=[G (truncated)...]
2026-01-13 15:50:23 [http-nio-8080-exec-1] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 15:50:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 15:56:03 [RedisMessageListenerContainer-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:56:03 [RedisMessageListenerContainer-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:56:03 [RedisMessageListenerContainer-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 15:56:03 [RedisMessageListenerContainer-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 15:59:03 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users/me
2026-01-13 15:59:03 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:59:03 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 15:59:03 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2026-01-13 15:59:03 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 15:59:03 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 16:12:13 [RedisMessageListenerContainer-7] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:12:13 [RedisMessageListenerContainer-7] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:12:13 [RedisMessageListenerContainer-7] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:12:13 [RedisMessageListenerContainer-7] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=admin@cloudbalance.com, password=Admin123!)]
[2026-01-13 16:17:45.836] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:17:45.850] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-13 16:17:45.864] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:17:45.872] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1881030081<open>)] for JPA transaction
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AuthService.login]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@76127373]
[2026-01-13 16:17:45.878] [http-nio-8080-exec-5] [INFO] [AuthService] - Login attempt for email :admin@cloudbalance.com
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-13 16:17:45.942] [http-nio-8080-exec-5] [INFO] [AuthService] - Authentication successful for: admin@cloudbalance.com
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
[2026-01-13 16:17:45.950] [http-nio-8080-exec-5] [WARN] [SessionManagementService] - maxCurrentSessions : 50 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-13 16:17:45.956] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Creating Redis session for user : admin@cloudbalance.com on device: Chrome on Linux
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 16:17:45.964] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-13 16:17:45.970] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - User admin@cloudbalance.com currently has 1 active sessions (max allowed: 50) : [9B7955BBC49A4315922CD1DE2009E82C]
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 16:17:45.979] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - New Redis session created: 2CB10B9F8975460FAB153019D0F63B72 for user: admin@cloudbalance.com
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1881030081<open>)] for JPA transaction
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1881030081<open>)] for JPA transaction
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select rt1_0.id,rt1_0.created_at,rt1_0.device_info,rt1_0.expiry_date,rt1_0.ip_address,rt1_0.last_activity_time,rt1_0.revoked,rt1_0.token,rt1_0.token_version,rt1_0.user_id from refresh_tokens rt1_0 where rt1_0.user_id=? and rt1_0.device_info=? and rt1_0.revoked=false
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1881030081<open>)] for JPA transaction
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:17:45 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 16:17:45.988] [http-nio-8080-exec-5] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-13 16:17:45.995] [http-nio-8080-exec-5] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-13 16:17:46.001] [http-nio-8080-exec-5] [INFO] [AuthService] - Refresh Token: 6998f943-6391-448a-bb9e-19f240dfea25
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1881030081<open>)] for JPA transaction
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
[2026-01-13 16:17:46.008] [http-nio-8080-exec-5] [INFO] [AuthService] - User logged in successfully : admin@cloudbalance.com
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1881030081<open>)]
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update users set active=?,email=?,first_name=?,last_login=?,last_name=?,password=?,role=?,token_version=?,updated_at=? where id=?
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update refresh_tokens set device_info=?,expiry_date=?,ip_address=?,last_activity_time=?,revoked=?,token=?,token_version=?,user_id=? where id=?
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:17:46.017] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 139 ms
[2026-01-13 16:17:46.023] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:17:46 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.SessionManagementService.isSessionValid]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1429815950<open>)] for JPA transaction
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3f666533]
[2026-01-13 16:17:46.067] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [2CB10B9F8975460FAB153019D0F63B72]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 16:17:46.076] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 1 ms
[2026-01-13 16:17:46.083] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - Result : true
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1429815950<open>)]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager after transaction
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.SessionManagementService.updateSessionActivity]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(674481052<open>)] for JPA transaction
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@24f07454]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(674481052<open>)]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager after transaction
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@216bff3f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1e9beadb]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 16:17:46.094] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:17:46.101] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 16:17:46.109] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:17:46.118] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1607539422<open>)] for JPA transaction
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@566072348 wrapping org.postgresql.jdbc.PgConnection@60b16fc2] read-only
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@643ad059]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1607539422<open>)] for JPA transaction
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1607539422<open>)]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@566072348 wrapping org.postgresql.jdbc.PgConnection@60b16fc2]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:17:46.133] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 7 ms
[2026-01-13 16:17:46.145] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:17:46 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:17:47 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE
2026-01-13 16:17:47 [http-nio-8080-exec-3] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:17:47 [http-nio-8080-exec-3] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:17:47 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@216bff3f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:17:47 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE
2026-01-13 16:17:47 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE", parameters={masked}
2026-01-13 16:17:47 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController#getAllReports(String, List, List, String, String)
2026-01-13 16:17:47 [http-nio-8080-exec-3] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:17:47 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
2026-01-13 16:17:47 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
[2026-01-13 16:17:47.816] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:17:47.823] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/cost-explorer/reports
[2026-01-13 16:17:47.830] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:17:47.836] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:17:48 [http-nio-8080-exec-3] INFO  c.s.s.internal.ServerConnection - Execute query [queryID: 01c1b3c7-0001-7cc2-000b-bab60002c692] SELECT
    service,
    YEAR(bill_date)  AS bill_year,
    MONTH(bill_date) AS bill_month,
    SUM(cost) AS total_cost
FROM costreport
WHERE bill_date >= COALESCE(null, '1900-01-01'::DATE)
  AND bill_date <= COALESCE(null, CURRENT_DATE())
GROUP BY service, YEAR(bill_date), MONTH(bill_date)
ORDER BY service, bill_year, bill_month;

[2026-01-13 16:17:48.418] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 576 ms
[2026-01-13 16:17:48.424] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:17:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:17:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Reports fetched successfully, data=CostReportResponse(groupWise=[G (truncated)...]
2026-01-13 16:17:48 [http-nio-8080-exec-3] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:17:48 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users/me
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@216bff3f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users/me
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users/me", parameters={}
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getCurrentUser(Authentication)
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getCurrentUser(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getCurrentUser(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-13 16:19:04.268] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:19:04.291] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users/me
[2026-01-13 16:19:04.307] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:19:04.314] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
[2026-01-13 16:19:04.320] [http-nio-8080-exec-4] [INFO] [UserController] - Fetching current user info.
[2026-01-13 16:19:04.326] [http-nio-8080-exec-4] [INFO] [UserService] - Fetching user by email : admin@cloudbalance.com
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
[2026-01-13 16:19:04.335] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 15 ms
[2026-01-13 16:19:04.340] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Current user retrieved successfully., data=UserResponse(id=1, firs (truncated)...]
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:19:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@216bff3f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@216bff3f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE", parameters={masked}
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController#getAllReports(String, List, List, String, String)
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
[2026-01-13 16:19:04.371] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:19:04.371] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:19:04.378] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/cost-explorer/reports
[2026-01-13 16:19:04.378] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 16:19:04.386] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:19:04.386] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:19:04.394] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2092610008<open>)] for JPA transaction
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1417062851 wrapping org.postgresql.jdbc.PgConnection@52c17828] read-only
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@638ad8b]
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2092610008<open>)] for JPA transaction
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2092610008<open>)]
[2026-01-13 16:19:04.397] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1417062851 wrapping org.postgresql.jdbc.PgConnection@52c17828]
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:19:04.411] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 9 ms
[2026-01-13 16:19:04.418] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:19:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:19:04 [http-nio-8080-exec-1] INFO  c.s.s.internal.ServerConnection - Execute query [queryID: 01c1b3c9-0001-7cc2-000b-bab60002c696] SELECT
    service,
    YEAR(bill_date)  AS bill_year,
    MONTH(bill_date) AS bill_month,
    SUM(cost) AS total_cost
FROM costreport
WHERE bill_date >= COALESCE(null, '1900-01-01'::DATE)
  AND bill_date <= COALESCE(null, CURRENT_DATE())
GROUP BY service, YEAR(bill_date), MONTH(bill_date)
ORDER BY service, bill_year, bill_month;

[2026-01-13 16:19:04.704] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 293 ms
[2026-01-13 16:19:04.720] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Reports fetched successfully, data=CostReportResponse(groupWise=[G (truncated)...]
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:19:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:20:22 [RedisMessageListenerContainer-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:20:22 [RedisMessageListenerContainer-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:20:22 [RedisMessageListenerContainer-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:20:22 [RedisMessageListenerContainer-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@216bff3f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true", parameters={masked}
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-13 16:21:12.893] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:21:12.905] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-13 16:21:12.915] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:21:12.932] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1627408986<open>)] for JPA transaction
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.UserService.getAllUsers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2024748608 wrapping org.postgresql.jdbc.PgConnection@52c17828] read-only
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5b631b8e]
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract org.springframework.data.domain.Page com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByActive(java.lang.Boolean,org.springframework.data.domain.Pageable)]: 'SELECT u FROM User u WHERE u.active = :active ORDER BY u.createdAt desc'
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.active=? order by u1_0.created_at desc fetch first ? rows only
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1627408986<open>)]
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2024748608 wrapping org.postgresql.jdbc.PgConnection@52c17828]
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:21:12.946] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2026-01-13 16:21:12.952] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:21:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@216bff3f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 16:21:14.026] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:21:14.034] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 16:21:14.042] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:21:14.049] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2147079348<open>)] for JPA transaction
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1064311596 wrapping org.postgresql.jdbc.PgConnection@52c17828] read-only
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@722c6589]
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2147079348<open>)] for JPA transaction
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2147079348<open>)]
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1064311596 wrapping org.postgresql.jdbc.PgConnection@52c17828]
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:21:14.060] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 4 ms
[2026-01-13 16:21:14.066] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:21:14 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@216bff3f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true", parameters={masked}
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-13 16:21:15.165] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:21:15.185] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-13 16:21:15.199] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:21:15.208] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1874492364<open>)] for JPA transaction
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.UserService.getAllUsers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1814215867 wrapping org.postgresql.jdbc.PgConnection@52c17828] read-only
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@307f2d]
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract org.springframework.data.domain.Page com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByActive(java.lang.Boolean,org.springframework.data.domain.Pageable)]: 'SELECT u FROM User u WHERE u.active = :active ORDER BY u.createdAt desc'
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.active=? order by u1_0.created_at desc fetch first ? rows only
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1874492364<open>)]
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1814215867 wrapping org.postgresql.jdbc.PgConnection@52c17828]
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:21:15.220] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2026-01-13 16:21:15.227] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:21:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@216bff3f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 16:32:16.355] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:32:16.378] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 16:32:16.401] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:32:16.435] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1797029097<open>)] for JPA transaction
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1508657771 wrapping org.postgresql.jdbc.PgConnection@6ebad27b] read-only
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4f9756b]
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1797029097<open>)] for JPA transaction
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1797029097<open>)]
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1508657771 wrapping org.postgresql.jdbc.PgConnection@6ebad27b]
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:32:16.474] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 10 ms
[2026-01-13 16:32:16.488] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:32:16 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@216bff3f, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true", parameters={masked}
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-13 16:32:17.531] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:32:17.547] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-13 16:32:17.557] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:32:17.567] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(106805659<open>)] for JPA transaction
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.UserService.getAllUsers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@246744985 wrapping org.postgresql.jdbc.PgConnection@6ebad27b] read-only
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1bd9c5e0]
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract org.springframework.data.domain.Page com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByActive(java.lang.Boolean,org.springframework.data.domain.Pageable)]: 'SELECT u FROM User u WHERE u.active = :active ORDER BY u.createdAt desc'
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.active=? order by u1_0.created_at desc fetch first ? rows only
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(106805659<open>)]
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@246744985 wrapping org.postgresql.jdbc.PgConnection@6ebad27b]
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:32:17.577] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2026-01-13 16:32:17.583] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:32:17 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:38:29 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 16:38:29 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 16:38:29 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 16:38:29 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2026-01-13 16:38:29 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 16:38:29 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 16:38:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:38:31 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 16:38:31 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 16:38:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:38:31 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 16:38:31 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 16:38:50 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users/me
2026-01-13 16:38:50 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 16:38:50 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 16:38:50 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2026-01-13 16:38:50 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 16:38:50 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-13 16:38:55 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /auth/login
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=admin@cloudbalance.com, password=Admin123!)]
[2026-01-13 16:38:55.385] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:38:55.405] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-13 16:38:55.419] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:38:55.428] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1694294114<open>)] for JPA transaction
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AuthService.login]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@324b59a8]
[2026-01-13 16:38:55.434] [http-nio-8080-exec-5] [INFO] [AuthService] - Login attempt for email :admin@cloudbalance.com
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-13 16:38:55.497] [http-nio-8080-exec-5] [INFO] [AuthService] - Authentication successful for: admin@cloudbalance.com
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
[2026-01-13 16:38:55.505] [http-nio-8080-exec-5] [WARN] [SessionManagementService] - maxCurrentSessions : 50 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-13 16:38:55.511] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Creating Redis session for user : admin@cloudbalance.com on device: Chrome on Linux
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 16:38:55.519] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-13 16:38:55.524] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - User admin@cloudbalance.com currently has 1 active sessions (max allowed: 50) : [2CB10B9F8975460FAB153019D0F63B72]
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 16:38:55.531] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - New Redis session created: 50A5CA546DF349719C1DDE8F6C4B37A9 for user: admin@cloudbalance.com
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1694294114<open>)] for JPA transaction
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1694294114<open>)] for JPA transaction
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select rt1_0.id,rt1_0.created_at,rt1_0.device_info,rt1_0.expiry_date,rt1_0.ip_address,rt1_0.last_activity_time,rt1_0.revoked,rt1_0.token,rt1_0.token_version,rt1_0.user_id from refresh_tokens rt1_0 where rt1_0.user_id=? and rt1_0.device_info=? and rt1_0.revoked=false
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1694294114<open>)] for JPA transaction
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 16:38:55.538] [http-nio-8080-exec-5] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-13 16:38:55.543] [http-nio-8080-exec-5] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-13 16:38:55.548] [http-nio-8080-exec-5] [INFO] [AuthService] - Refresh Token: 6998f943-6391-448a-bb9e-19f240dfea25
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1694294114<open>)] for JPA transaction
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
[2026-01-13 16:38:55.554] [http-nio-8080-exec-5] [INFO] [AuthService] - User logged in successfully : admin@cloudbalance.com
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1694294114<open>)]
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update users set active=?,email=?,first_name=?,last_login=?,last_name=?,password=?,role=?,token_version=?,updated_at=? where id=?
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - update refresh_tokens set device_info=?,expiry_date=?,ip_address=?,last_activity_time=?,revoked=?,token=?,token_version=?,user_id=? where id=?
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:38:55.566] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 133 ms
[2026-01-13 16:38:55.571] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:38:55 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract java.util.Optional com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByEmail(java.lang.String)]: 'SELECT u FROM User u WHERE u.email = :email'
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.email=?
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.SessionManagementService.isSessionValid]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(80861581<open>)] for JPA transaction
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@509b5d73]
[2026-01-13 16:38:55.640] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [50A5CA546DF349719C1DDE8F6C4B37A9]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
[2026-01-13 16:38:55.649] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 1 ms
[2026-01-13 16:38:55.657] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - Result : true
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(80861581<open>)]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager after transaction
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.SessionManagementService.updateSessionActivity]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(23468965<open>)] for JPA transaction
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@b9cae3f]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(23468965<open>)]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager after transaction
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@31a57881, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3584f008]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 16:38:55.667] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:38:55.673] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 16:38:55.680] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:38:55.686] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2032935751<open>)] for JPA transaction
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@793779601 wrapping org.postgresql.jdbc.PgConnection@352b098a] read-only
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@273dbb97]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2032935751<open>)] for JPA transaction
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2032935751<open>)]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@793779601 wrapping org.postgresql.jdbc.PgConnection@352b098a]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:38:55.698] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 4 ms
[2026-01-13 16:38:55.706] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:38:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@31a57881, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true", parameters={masked}
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-13 16:38:57.728] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:38:57.739] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-13 16:38:57.749] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:38:57.757] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1819629713<open>)] for JPA transaction
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.UserService.getAllUsers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@811360504 wrapping org.postgresql.jdbc.PgConnection@352b098a] read-only
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3485ac95]
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract org.springframework.data.domain.Page com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByActive(java.lang.Boolean,org.springframework.data.domain.Pageable)]: 'SELECT u FROM User u WHERE u.active = :active ORDER BY u.createdAt desc'
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.active=? order by u1_0.created_at desc fetch first ? rows only
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1819629713<open>)]
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@811360504 wrapping org.postgresql.jdbc.PgConnection@352b098a]
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:38:57.768] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2026-01-13 16:38:57.774] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:38:57 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@31a57881, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 16:38:59.698] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:38:59.707] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 16:38:59.719] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:38:59.730] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1096732115<open>)] for JPA transaction
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@549961026 wrapping org.postgresql.jdbc.PgConnection@352b098a] read-only
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4f0d7c93]
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1096732115<open>)] for JPA transaction
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1096732115<open>)]
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@549961026 wrapping org.postgresql.jdbc.PgConnection@352b098a]
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:38:59.741] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2026-01-13 16:38:59.750] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:38:59 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@31a57881, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE", parameters={masked}
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController#getAllReports(String, List, List, String, String)
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
[2026-01-13 16:39:01.122] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:39:01.129] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/cost-explorer/reports
[2026-01-13 16:39:01.138] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:39:01.144] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:39:01 [http-nio-8080-exec-4] INFO  c.s.s.internal.ServerConnection - Execute query [queryID: 01c1b3dd-0001-7cc2-000b-bab60002c716] SELECT
    service,
    YEAR(bill_date)  AS bill_year,
    MONTH(bill_date) AS bill_month,
    SUM(cost) AS total_cost
FROM costreport
WHERE bill_date >= COALESCE(null, '1900-01-01'::DATE)
  AND bill_date <= COALESCE(null, CURRENT_DATE())
GROUP BY service, YEAR(bill_date), MONTH(bill_date)
ORDER BY service, bill_year, bill_month;

[2026-01-13 16:39:01.559] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 408 ms
[2026-01-13 16:39:01.573] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Reports fetched successfully, data=CostReportResponse(groupWise=[G (truncated)...]
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:39:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@31a57881, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&active=true", parameters={masked}
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-13 16:39:08.181] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:39:08.191] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-13 16:39:08.199] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:39:08.207] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1537917798<open>)] for JPA transaction
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.UserService.getAllUsers]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1536303281 wrapping org.postgresql.jdbc.PgConnection@352b098a] read-only
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@400e2640]
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.d.j.r.query.PartTreeJpaQuery - QueryPreparer: Derived query for query method [public abstract org.springframework.data.domain.Page com.cloudkeeper.cloudbalance_backend.repository.jpa.UserRepository.findByActive(java.lang.Boolean,org.springframework.data.domain.Pageable)]: 'SELECT u FROM User u WHERE u.active = :active ORDER BY u.createdAt desc'
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.active,u1_0.created_at,u1_0.email,u1_0.first_name,u1_0.last_login,u1_0.last_name,u1_0.password,u1_0.role,u1_0.token_version,u1_0.updated_at from users u1_0 where u1_0.active=? order by u1_0.created_at desc fetch first ? rows only
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1537917798<open>)]
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1536303281 wrapping org.postgresql.jdbc.PgConnection@352b098a]
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:39:08.215] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 2 ms
[2026-01-13 16:39:08.221] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:39:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:39:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE
2026-01-13 16:39:11 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:39:11 [http-nio-8080-exec-1] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:39:11 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@31a57881, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:39:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE
2026-01-13 16:39:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE", parameters={masked}
2026-01-13 16:39:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController#getAllReports(String, List, List, String, String)
2026-01-13 16:39:11 [http-nio-8080-exec-1] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:39:11 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
2026-01-13 16:39:11 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
[2026-01-13 16:39:11.938] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:39:11.945] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/cost-explorer/reports
[2026-01-13 16:39:11.953] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:39:11.960] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:39:12 [http-nio-8080-exec-1] INFO  c.s.s.internal.ServerConnection - Execute query [queryID: 01c1b3dd-0001-7cc2-000b-bab60002c732] SELECT
    service,
    YEAR(bill_date)  AS bill_year,
    MONTH(bill_date) AS bill_month,
    SUM(cost) AS total_cost
FROM costreport
WHERE bill_date >= COALESCE(null, '1900-01-01'::DATE)
  AND bill_date <= COALESCE(null, CURRENT_DATE())
GROUP BY service, YEAR(bill_date), MONTH(bill_date)
ORDER BY service, bill_year, bill_month;

[2026-01-13 16:39:12.078] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 112 ms
[2026-01-13 16:39:12.095] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:39:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:39:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Reports fetched successfully, data=CostReportResponse(groupWise=[G (truncated)...]
2026-01-13 16:39:12 [http-nio-8080-exec-1] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:39:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@31a57881, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-13 16:39:48.933] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:39:48.943] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-13 16:39:48.952] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:39:48.963] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(697158997<open>)] for JPA transaction
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [com.cloudkeeper.cloudbalance_backend.service.AwsAccountService.getAllAwsAccounts]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@699392179 wrapping org.postgresql.jdbc.PgConnection@352b098a] read-only
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@273096da]
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(697158997<open>)] for JPA transaction
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select aa1_0.id,aa1_0.account_alias,aa1_0.account_id,aa1_0.active,aa1_0.created_at,aa1_0.external_account_id,aa1_0.role_arn,aa1_0.update_at from aws_accounts aa1_0
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select au1_0.account_id,au1_1.id,au1_1.active,au1_1.created_at,au1_1.email,au1_1.first_name,au1_1.last_login,au1_1.last_name,au1_1.password,au1_1.role,au1_1.token_version,au1_1.updated_at from user_account_assignments au1_0 join users au1_1 on au1_1.id=au1_0.user_id where au1_0.account_id=?
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(697158997<open>)]
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@699392179 wrapping org.postgresql.jdbc.PgConnection@352b098a]
2026-01-13 16:39:48 [http-nio-8080-exec-10] DEBUG o.s.orm.jpa.JpaTransactionManager - Not closing pre-bound JPA EntityManager after transaction
[2026-01-13 16:39:48.981] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Response Time : 6 ms
[2026-01-13 16:39:48.992] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:39:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:39:49 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Accounts retrieved successfully., data=[AwsAccountResponse(id=1, a (truncated)...]
2026-01-13 16:39:49 [http-nio-8080-exec-10] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:39:49 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.cloudkeeper.cloudbalance_backend.config.UserPrincipal@31a57881, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/cost-explorer/reports?startDate=2025-01-01&endDate=2025-05-31&groupBy=SERVICE", parameters={masked}
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController#getAllReports(String, List, List, String, String)
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController.getAllReports(java.lang.String,java.util.List,java.util.List,java.lang.String,java.lang.String); target is of class [com.cloudkeeper.cloudbalance_backend.controller.CostExplorerController]
[2026-01-13 16:39:53.010] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-13 16:39:53.022] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/cost-explorer/reports
[2026-01-13 16:39:53.035] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-13 16:39:53.048] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
2026-01-13 16:39:53 [http-nio-8080-exec-9] INFO  c.s.s.internal.ServerConnection - Execute query [queryID: 01c1b3dd-0001-7cc2-000b-bab60002c746] SELECT
    service,
    YEAR(bill_date)  AS bill_year,
    MONTH(bill_date) AS bill_month,
    SUM(cost) AS total_cost
FROM costreport
WHERE bill_date >= COALESCE(null, '1900-01-01'::DATE)
  AND bill_date <= COALESCE(null, CURRENT_DATE())
GROUP BY service, YEAR(bill_date), MONTH(bill_date)
ORDER BY service, bill_year, bill_month;

[2026-01-13 16:39:53.154] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Response Time : 97 ms
[2026-01-13 16:39:53.169] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Reports fetched successfully, data=CostReportResponse(groupWise=[G (truncated)...]
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2026-01-13 16:39:53 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-13 16:47:46 [RedisMessageListenerContainer-9] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:47:46 [RedisMessageListenerContainer-9] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 16:47:46 [RedisMessageListenerContainer-9] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 16:47:46 [RedisMessageListenerContainer-9] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 17:08:55 [RedisMessageListenerContainer-10] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 17:08:55 [RedisMessageListenerContainer-10] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 17:08:55 [RedisMessageListenerContainer-10] DEBUG o.s.d.r.core.RedisConnectionUtils - Fetching Redis Connection from RedisConnectionFactory
2026-01-13 17:08:55 [RedisMessageListenerContainer-10] DEBUG o.s.d.r.core.RedisConnectionUtils - Closing Redis Connection
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.b.a.ApplicationAvailabilityBean - Application availability state ReadinessState changed from ACCEPTING_TRAFFIC to REFUSING_TRAFFIC
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.b.w.s.s.c.AnnotationConfigServletWebServerApplicationContext - Closing org.springframework.boot.web.server.servlet.context.AnnotationConfigServletWebServerApplicationContext@1253e7cb, started on Tue Jan 13 13:49:34 IST 2026
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Stopping beans in phase 2147483647
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.d.r.l.RedisMessageListenerContainer - Stopped listening
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.d.r.l.RedisMessageListenerContainer - Stopped RedisMessageListenerContainer
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Bean 'redisKeyValueAdapter' completed its stop procedure
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Stopping beans in phase 2147482623
2026-01-13 17:24:41 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-13 17:24:41 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-13 17:24:41 [tomcat-shutdown] DEBUG o.s.c.s.DefaultLifecycleProcessor - Bean 'webServerGracefulShutdown' completed its stop procedure
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Stopping beans in phase 2147481599
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Bean 'webServerStartStop' completed its stop procedure
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Stopping beans in phase 1073741823
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Bean 'applicationTaskExecutor' completed its stop procedure
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Stopping beans in phase 0
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Bean 'redisConnectionFactory' completed its stop procedure
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Stopping beans in phase -2147483647
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.c.s.DefaultLifecycleProcessor - Bean 'springBootLoggingLifecycle' completed its stop procedure
2026-01-13 17:24:41 [SpringApplicationShutdownHook] DEBUG o.s.b.f.s.DisposableBeanAdapter - Custom destroy method 'shutdown' on bean with name 'lettuceClientResources' completed asynchronously
2026-01-13 17:24:41 [SpringApplicationShutdownHook] INFO  com.snowflake.snowpark.Session - Closing session: {
 "snowpark.version" : "1.17.0",
 "client.language": "Java",
 "java.version" : "25.0.1",
 "scala.version" : "2.13.16",
 "jdbc.session.id" : "3301515590713730",
 "os.name" : "Linux",
 "jdbc.version" : "3.24.2",
 "snowpark.library" : "/home/deepak/.gradle/caches/modules-2/files-2.1/com.snowflake/snowpark_2.13/1.17.0/7ab2a9e51f36b2a27a3e3a5159bf8fa790cdf8c3/snowpark_2.13-1.17.0.jar",
 "scala.library" : "/home/deepak/.gradle/caches/modules-2/files-2.1/org.scala-lang/scala-library/2.13.16/9e064d9304904fd7b6bd2b55a9e601b8c1c9006e/scala-library-2.13.16.jar",
 "jdbc.library" : "/home/deepak/.gradle/caches/modules-2/files-2.1/net.snowflake/snowflake-jdbc/3.24.2/3537465236f39eecd996cba3c111489e85aba6cd/snowflake-jdbc-3.24.2.jar"
}
2026-01-13 17:24:41 [SpringApplicationShutdownHook] INFO  com.snowflake.snowpark.Session - Canceling all running query
2026-01-13 17:24:42 [SpringApplicationShutdownHook] INFO  c.s.s.internal.ServerConnection - Execute query [queryID: 01c1b40a-0001-7cc2-000b-bab60002cbee] select system$cancel_all_queries(3301515590713730)
2026-01-13 17:24:42 [SpringApplicationShutdownHook] DEBUG o.s.b.f.s.DisposableBeanAdapter - Custom destroy method 'close' on bean with name 'snowparkSession' completed
2026-01-13 17:24:42 [SpringApplicationShutdownHook] DEBUG o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2026-01-13 17:24:42 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-13 17:24:42 [SpringApplicationShutdownHook] DEBUG o.s.o.j.h.SpringBeanContainer - Falling back to Hibernate's default producer after bean creation failure for interface org.hibernate.engine.jdbc.connections.spi.MultiTenantConnectionProvider: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.hibernate.engine.jdbc.connections.spi.MultiTenantConnectionProvider': Failed to instantiate [org.hibernate.engine.jdbc.connections.spi.MultiTenantConnectionProvider]: Specified class is an interface
2026-01-13 17:24:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-13 17:24:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
