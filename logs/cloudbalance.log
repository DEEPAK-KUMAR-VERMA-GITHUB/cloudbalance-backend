2025-12-24 00:11:38 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 30913 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-24 00:11:38 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-24 00:11:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-24 00:11:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-24 00:11:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 167 ms. Found 6 JPA repository interfaces.
2025-12-24 00:11:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-24 00:11:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-24 00:11:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:11:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:11:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:11:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:11:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:11:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:11:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2025-12-24 00:11:40 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-24 00:11:40 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-24 00:11:40 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-24 00:11:40 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1591 ms
2025-12-24 00:11:40 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-24 00:11:40 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-24 00:11:41 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-24 00:11:41 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-24 00:11:41 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@c10f7a8
2025-12-24 00:11:41 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-24 00:11:41 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-24 00:11:41 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-24 00:11:42 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-24 00:11:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-24 00:11:42 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-24 00:11:42 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-24 00:11:43 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-24 00:11:43 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-24 00:11:43 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-24 00:11:43 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-24 00:11:43 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-24 00:11:43 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-24 00:11:43 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-24 00:11:43 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-24 00:11:44 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-12-24 00:11:44 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 6.045 seconds (process running for 6.576)
[2025-12-24 00:11:44.428] [main] [INFO] [ConnectionTestRunner] - âœ“ PostgreSQL connection successful!
[2025-12-24 00:11:44.445] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-24 00:11:44.462] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-24 00:11:44 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-24 00:11:44.517] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-24 00:11:44.806] [main] [INFO] [ConnectionTestRunner] - âœ“ Redis connection successful!
[2025-12-24 00:11:44.807] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-24 00:11:44 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-24 00:11:44 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-24 00:11:45 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-24 00:11:45 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-24 00:11:45 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-24 00:11:53 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-24 00:11:53 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@505b5ddc
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@51622450
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-24 00:11:53 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
[2025-12-24 00:11:53.447] [http-nio-8080-exec-2] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: NULL
[2025-12-24 00:11:53.469] [http-nio-8080-exec-2] [INFO] [JwtAuthenticationFilter] - âŒ No Bearer token
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id DE389763731BD1C045E70404D94223DE
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest)
2025-12-24 00:11:53 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-24 00:11:53.765] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-24 00:11:53.791] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/auth/login
[2025-12-24 00:11:53.811] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-24 00:11:53.830] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-24 00:11:53.860] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@e8977f1]]
[2025-12-24 00:11:53.887] [http-nio-8080-exec-2] [INFO] [AuthService] - >>> Starting AuthService.login()
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-24 00:11:54.472] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-24 00:11:54.719] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-24 00:11:54.767] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
[2025-12-24 00:11:54.789] [http-nio-8080-exec-2] [INFO] [AuthService] - <<< Completed AuthService.login() in 845 ms
[2025-12-24 00:11:54.810] [http-nio-8080-exec-2] [INFO] [AuthService] - Result : AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjY1MTUzMTQsImV4cCI6MTc2NjUxNjIxNH0.5Ht-UYix8NMLFN8lAJSwXJ00OqMKZarwUW6jbZxvYQI, refreshToken=b1845c74-1b68-4213-a3b3-f0459058e43f, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false)
2025-12-24 00:11:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-24 00:11:54.848] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 964 ms
[2025-12-24 00:11:54.879] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjY1MTUzMTQsImV4cCI6MTc2NjUxNjIxNH0.5Ht-UYix8NMLFN8lAJSwXJ00OqMKZarwUW6jbZxvYQI, refreshToken=b1845c74-1b68-4213-a3b3-f0459058e43f, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false), error=null),[]>
[2025-12-24 00:11:54.907] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 1055 ms
[2025-12-24 00:11:54.934] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-24 00:11:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-24 00:11:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-24 00:11:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-24 00:12:10 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-24 00:12:10.714] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: Bearer eyJhbGciOiJIU...
[2025-12-24 00:12:10.734] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Extracted: eyJhbGciOiJIUzI1NiJ9...
[2025-12-24 00:12:10.759] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Token NOT blacklisted
[2025-12-24 00:12:10.853] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Extracted - Email: deepak@gmail.com, UserId: 1
2025-12-24 00:12:10 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:12:10 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-24 00:12:10.904] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… UserDetails loaded: deepak@gmail.com
[2025-12-24 00:12:10.924] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Token VALID
[2025-12-24 00:12:10.964] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” Session ID: FEFAA6E4CB9F00AC7D57C05BFE71FC00
[2025-12-24 00:12:10.990] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [FEFAA6E4CB9F00AC7D57C05BFE71FC00]
2025-12-24 00:12:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-24 00:12:11.024] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - Session not found: FEFAA6E4CB9F00AC7D57C05BFE71FC00
[2025-12-24 00:12:11.047] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 34 ms
[2025-12-24 00:12:11.069] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : false
[2025-12-24 00:12:11.089] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - âŒ SESSION INVALID: FEFAA6E4CB9F00AC7D57C05BFE71FC00
2025-12-24 00:12:22 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-24 00:12:22.759] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: Bearer eyJhbGciOiJIU...
[2025-12-24 00:12:22.779] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Extracted: eyJhbGciOiJIUzI1NiJ9...
[2025-12-24 00:12:22.802] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - âœ… Token NOT blacklisted
[2025-12-24 00:12:22.823] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - âœ… Extracted - Email: deepak@gmail.com, UserId: 1
2025-12-24 00:12:22 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:12:22 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-24 00:12:22.851] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - âœ… UserDetails loaded: deepak@gmail.com
[2025-12-24 00:12:22.874] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - âœ… Token VALID
[2025-12-24 00:12:22.894] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - ðŸ” Session ID: FEFAA6E4CB9F00AC7D57C05BFE71FC00
[2025-12-24 00:12:22.915] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [FEFAA6E4CB9F00AC7D57C05BFE71FC00]
2025-12-24 00:12:22 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-24 00:12:22.938] [http-nio-8080-exec-4] [WARN] [SessionManagementService] - Session not found: FEFAA6E4CB9F00AC7D57C05BFE71FC00
[2025-12-24 00:12:22.961] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 27 ms
[2025-12-24 00:12:22.982] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Result : false
[2025-12-24 00:12:23.005] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - âŒ SESSION INVALID: FEFAA6E4CB9F00AC7D57C05BFE71FC00
2025-12-24 00:24:15 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-24 00:24:15 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-24 00:24:15 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-24 00:24:15 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-24 00:24:15 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-24 00:24:17 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 32342 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-24 00:24:17 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 132 ms. Found 6 JPA repository interfaces.
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:24:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2025-12-24 00:24:19 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-24 00:24:19 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-24 00:24:19 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-24 00:24:19 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1984 ms
2025-12-24 00:24:20 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-24 00:24:20 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-24 00:24:20 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-24 00:24:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-24 00:24:20 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@40c92dfa
2025-12-24 00:24:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-24 00:24:20 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-24 00:24:20 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-24 00:24:22 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-24 00:24:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-24 00:24:22 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-24 00:24:22 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-24 00:24:23 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-24 00:24:23 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-24 00:24:24 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-24 00:24:24 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-24 00:24:24 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-24 00:24:24 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-24 00:24:24 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-24 00:24:24 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-24 00:24:25 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-12-24 00:24:25 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 8.001 seconds (process running for 8.456)
[2025-12-24 00:24:25.275] [main] [INFO] [ConnectionTestRunner] - âœ“ PostgreSQL connection successful!
[2025-12-24 00:24:25.320] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-24 00:24:25.355] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-24 00:24:25 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-24 00:24:25.478] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-24 00:24:25.761] [main] [INFO] [ConnectionTestRunner] - âœ“ Redis connection successful!
[2025-12-24 00:24:25.762] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-24 00:24:25 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-24 00:24:25 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-24 00:24:25 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-24 00:24:25 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-24 00:24:25 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-24 00:24:35 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-24 00:24:35 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@44c65be4
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@54d7d2ba
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-24 00:24:35 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
[2025-12-24 00:24:35.498] [http-nio-8080-exec-1] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: NULL
[2025-12-24 00:24:35.521] [http-nio-8080-exec-1] [INFO] [JwtAuthenticationFilter] - âŒ No Bearer token
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id FEFAA6E4CB9F00AC7D57C05BFE71FC00
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest)
2025-12-24 00:24:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-24 00:24:35.788] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-24 00:24:35.815] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/auth/login
[2025-12-24 00:24:35.837] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-24 00:24:35.860] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-24 00:24:35.893] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@4caa808b]]
[2025-12-24 00:24:35.922] [http-nio-8080-exec-1] [INFO] [AuthService] - >>> Starting AuthService.login()
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-24 00:24:36.216] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-24 00:24:36.412] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-24 00:24:36.464] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
[2025-12-24 00:24:36.490] [http-nio-8080-exec-1] [INFO] [AuthService] - <<< Completed AuthService.login() in 540 ms
[2025-12-24 00:24:36.515] [http-nio-8080-exec-1] [INFO] [AuthService] - Result : AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjY1MTYwNzYsImV4cCI6MTc2NjUxNjk3Nn0.EAmIeH-pKL9xlfIPD56ooPjsSA4TKI2vE2WaYpZVaew, refreshToken=feb33945-5fea-4885-acab-31fa833563f4, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false)
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-24 00:24:36.567] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 647 ms
[2025-12-24 00:24:36.595] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjY1MTYwNzYsImV4cCI6MTc2NjUxNjk3Nn0.EAmIeH-pKL9xlfIPD56ooPjsSA4TKI2vE2WaYpZVaew, refreshToken=feb33945-5fea-4885-acab-31fa833563f4, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false), error=null),[]>
[2025-12-24 00:24:36.615] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 730 ms
[2025-12-24 00:24:36.639] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-24 00:24:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-24 00:24:48 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-24 00:24:48.394] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: Bearer eyJhbGciOiJIU...
[2025-12-24 00:24:48.416] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Extracted: eyJhbGciOiJIUzI1NiJ9...
[2025-12-24 00:24:48.449] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Token NOT blacklisted
[2025-12-24 00:24:48.546] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Extracted - Email: deepak@gmail.com, UserId: 1
2025-12-24 00:24:48 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:24:48 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-24 00:24:48.607] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… UserDetails loaded: deepak@gmail.com
[2025-12-24 00:24:48.638] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Token VALID
[2025-12-24 00:24:48.682] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” Session ID: D86AA7D38E22D65E682B91306A6131CD
[2025-12-24 00:24:48.707] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [D86AA7D38E22D65E682B91306A6131CD]
2025-12-24 00:24:48 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-24 00:24:48.745] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - Session not found: D86AA7D38E22D65E682B91306A6131CD
[2025-12-24 00:24:48.773] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 37 ms
[2025-12-24 00:24:48.800] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : false
[2025-12-24 00:24:48.832] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - âŒ SESSION INVALID: D86AA7D38E22D65E682B91306A6131CD
2025-12-24 00:25:16 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-24 00:25:16 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-24 00:25:16 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-24 00:25:16 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-24 00:25:16 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-24 00:25:18 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 32861 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-24 00:25:18 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 153 ms. Found 6 JPA repository interfaces.
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:25:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-12-24 00:25:20 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-24 00:25:20 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-24 00:25:20 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-24 00:25:20 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1627 ms
2025-12-24 00:25:20 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-24 00:25:20 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-24 00:25:21 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-24 00:25:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-24 00:25:21 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@40c92dfa
2025-12-24 00:25:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-24 00:25:21 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-24 00:25:21 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-24 00:25:22 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-24 00:25:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-24 00:25:22 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-24 00:25:22 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-24 00:25:23 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-24 00:25:23 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-24 00:25:23 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-24 00:25:23 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-24 00:25:23 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-24 00:25:24 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-24 00:25:24 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-24 00:25:24 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-24 00:25:24 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-12-24 00:25:24 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 6.196 seconds (process running for 6.734)
[2025-12-24 00:25:24.646] [main] [INFO] [ConnectionTestRunner] - âœ“ PostgreSQL connection successful!
[2025-12-24 00:25:24.664] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-24 00:25:24.683] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-24 00:25:24 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-24 00:25:24.735] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-24 00:25:25.082] [main] [INFO] [ConnectionTestRunner] - âœ“ Redis connection successful!
[2025-12-24 00:25:25.082] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-24 00:25:25 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-24 00:25:25 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-24 00:25:25 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-24 00:25:25 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-24 00:25:25 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-24 00:25:39 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-24 00:25:39 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@47046907
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1efe7598
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-24 00:25:39 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
[2025-12-24 00:25:39.375] [http-nio-8080-exec-2] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: NULL
[2025-12-24 00:25:39.398] [http-nio-8080-exec-2] [INFO] [JwtAuthenticationFilter] - âŒ No Bearer token
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id D86AA7D38E22D65E682B91306A6131CD
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest)
2025-12-24 00:25:39 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-24 00:25:39.650] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-24 00:25:39.675] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/auth/login
[2025-12-24 00:25:39.696] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-24 00:25:39.718] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-24 00:25:39.751] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@a1e802d]]
[2025-12-24 00:25:39.773] [http-nio-8080-exec-2] [INFO] [AuthService] - >>> Starting AuthService.login()
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-24 00:25:40.092] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-24 00:25:40.184] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-24 00:25:40.229] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
[2025-12-24 00:25:40.258] [http-nio-8080-exec-2] [INFO] [AuthService] - <<< Completed AuthService.login() in 463 ms
[2025-12-24 00:25:40.285] [http-nio-8080-exec-2] [INFO] [AuthService] - Result : AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjY1MTYxNDAsImV4cCI6MTc2NjUxNzA0MH0.667OftLrsO9xtMKpIqKJyGJyR0kbaQcqPaBwT0LI_o0, refreshToken=a9deaef4-cd06-44e9-8fb8-542034732184, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false)
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-24 00:25:40.336] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 565 ms
[2025-12-24 00:25:40.371] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjY1MTYxNDAsImV4cCI6MTc2NjUxNzA0MH0.667OftLrsO9xtMKpIqKJyGJyR0kbaQcqPaBwT0LI_o0, refreshToken=a9deaef4-cd06-44e9-8fb8-542034732184, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false), error=null),[]>
[2025-12-24 00:25:40.398] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 657 ms
[2025-12-24 00:25:40.427] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-24 00:25:40 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-24 00:25:58 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-24 00:25:58.655] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: Bearer eyJhbGciOiJIU...
[2025-12-24 00:25:58.677] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Extracted: eyJhbGciOiJIUzI1NiJ9...
[2025-12-24 00:25:58.707] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Token NOT blacklisted
[2025-12-24 00:25:58.797] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Extracted - Email: deepak@gmail.com, UserId: 1
2025-12-24 00:25:58 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:25:58 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-24 00:25:58.853] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… UserDetails loaded: deepak@gmail.com
[2025-12-24 00:25:58.879] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Token VALID
[2025-12-24 00:25:58.919] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” Session ID: 7EA00ABF121A695588BCAFE5312A052A
[2025-12-24 00:25:58.950] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [7EA00ABF121A695588BCAFE5312A052A]
2025-12-24 00:25:58 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-24 00:25:58.989] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - Session not found: 7EA00ABF121A695588BCAFE5312A052A
[2025-12-24 00:25:59.018] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 39 ms
[2025-12-24 00:25:59.046] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : false
[2025-12-24 00:25:59.073] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - âŒ SESSION INVALID: 7EA00ABF121A695588BCAFE5312A052A
2025-12-24 00:38:06 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-24 00:38:06 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-24 00:38:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-24 00:38:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-24 00:38:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-24 00:40:14 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 34344 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-24 00:40:14 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-24 00:40:14 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-24 00:40:14 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-24 00:40:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 187 ms. Found 6 JPA repository interfaces.
2025-12-24 00:40:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-24 00:40:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-24 00:40:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:40:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:40:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:40:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:40:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:40:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 00:40:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-12-24 00:40:15 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-24 00:40:15 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-24 00:40:15 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-24 00:40:15 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1649 ms
2025-12-24 00:40:16 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-24 00:40:16 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-24 00:40:16 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-24 00:40:16 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-24 00:40:17 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@40c92dfa
2025-12-24 00:40:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-24 00:40:17 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-24 00:40:17 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-24 00:40:18 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-24 00:40:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-24 00:40:18 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-24 00:40:18 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-24 00:40:19 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-24 00:40:19 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-24 00:40:20 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-24 00:40:20 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-24 00:40:20 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-24 00:40:20 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-24 00:40:20 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-24 00:40:20 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-24 00:40:21 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-12-24 00:40:21 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 7.369 seconds (process running for 7.828)
[2025-12-24 00:40:21.056] [main] [INFO] [ConnectionTestRunner] - âœ“ PostgreSQL connection successful!
[2025-12-24 00:40:21.066] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-24 00:40:21.076] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-24 00:40:21 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-24 00:40:21.147] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-24 00:40:21.644] [main] [INFO] [ConnectionTestRunner] - âœ“ Redis connection successful!
[2025-12-24 00:40:21.644] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-24 00:40:21 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-24 00:40:21 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-24 00:40:21 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-24 00:40:21 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-24 00:40:21 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-24 00:40:28 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-24 00:40:28 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6ef0e08f
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3fc00de0
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-24 00:40:28 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
[2025-12-24 00:40:28.487] [http-nio-8080-exec-1] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: NULL
[2025-12-24 00:40:28.510] [http-nio-8080-exec-1] [INFO] [JwtAuthenticationFilter] - âŒ No Bearer token
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 7EA00ABF121A695588BCAFE5312A052A
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest)
2025-12-24 00:40:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-24 00:40:28.761] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-24 00:40:28.788] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/auth/login
[2025-12-24 00:40:28.810] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-24 00:40:28.834] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-24 00:40:28.875] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@6b88d91e]]
[2025-12-24 00:40:28.910] [http-nio-8080-exec-1] [INFO] [AuthService] - >>> Starting AuthService.login()
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-24 00:40:29.350] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-24 00:40:29.535] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-24 00:40:29.580] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating session: D46892F1C1D0C21AC0CBCD2065EBB2E8 for user: deepak@gmail.com
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-24 00:40:29.633] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - âœ… Session created successfully: D46892F1C1D0C21AC0CBCD2065EBB2E8
[2025-12-24 00:40:29.665] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
[2025-12-24 00:40:29.695] [http-nio-8080-exec-1] [INFO] [AuthService] - <<< Completed AuthService.login() in 755 ms
[2025-12-24 00:40:29.724] [http-nio-8080-exec-1] [INFO] [AuthService] - Result : AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjY1MTcwMjksImV4cCI6MTc2NjUxNzkyOX0.QCnaURN1bQ-m9FjmQfmBuiQf7iqTa1a3rfPMCM3H2as, refreshToken=9928cae7-c901-4631-aa15-35d08215c1d3, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false)
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-24 00:40:29.771] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 864 ms
[2025-12-24 00:40:29.803] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjY1MTcwMjksImV4cCI6MTc2NjUxNzkyOX0.QCnaURN1bQ-m9FjmQfmBuiQf7iqTa1a3rfPMCM3H2as, refreshToken=9928cae7-c901-4631-aa15-35d08215c1d3, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false), error=null),[]>
[2025-12-24 00:40:29.828] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 963 ms
[2025-12-24 00:40:29.858] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-24 00:40:29 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-24 00:40:41.056] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: Bearer eyJhbGciOiJIU...
[2025-12-24 00:40:41.072] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Extracted: eyJhbGciOiJIUzI1NiJ9...
[2025-12-24 00:40:41.103] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Token NOT blacklisted
[2025-12-24 00:40:41.196] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Extracted - Email: deepak@gmail.com, UserId: 1
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-24 00:40:41.252] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… UserDetails loaded: deepak@gmail.com
[2025-12-24 00:40:41.284] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Token VALID
[2025-12-24 00:40:41.310] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” Session ID: D46892F1C1D0C21AC0CBCD2065EBB2E8
[2025-12-24 00:40:41.338] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [D46892F1C1D0C21AC0CBCD2065EBB2E8]
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-24 00:40:41.393] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 26 ms
[2025-12-24 00:40:41.421] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
[2025-12-24 00:40:41.444] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Session VALID
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-24 00:40:41.473] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : D46892F1C1D0C21AC0CBCD2065EBB2E8
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
[2025-12-24 00:40:41.503] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸŽ‰ AUTHENTICATION SET SUCCESSFULLY!!!
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from D46892F1C1D0C21AC0CBCD2065EBB2E8
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users", parameters={}
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-24 00:40:41.574] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-24 00:40:41.603] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: GET /api/users
[2025-12-24 00:40:41.634] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-24 00:40:41.661] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-24 00:40:41.742] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 55 ms
[2025-12-24 00:40:41.768] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-24 00:40:41 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-24 00:42:03 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-24 00:42:03.769] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: Bearer eyJhbGciOiJIU...
[2025-12-24 00:42:03.789] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Extracted: eyJhbGciOiJIUzI1NiJ9...
[2025-12-24 00:42:03.810] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - âœ… Token NOT blacklisted
[2025-12-24 00:42:03.833] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - âœ… Extracted - Email: deepak@gmail.com, UserId: 1
2025-12-24 00:42:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 00:42:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-24 00:42:03.865] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - âœ… UserDetails loaded: deepak@gmail.com
[2025-12-24 00:42:03.918] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - âœ… Token VALID
[2025-12-24 00:42:03.940] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - ðŸ” Session ID: C7F406FDE762614EC710EEF2BE3FDE7E
[2025-12-24 00:42:03.962] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [C7F406FDE762614EC710EEF2BE3FDE7E]
2025-12-24 00:42:03 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-24 00:42:03.987] [http-nio-8080-exec-6] [WARN] [SessionManagementService] - Session not found: C7F406FDE762614EC710EEF2BE3FDE7E
[2025-12-24 00:42:04.011] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 27 ms
[2025-12-24 00:42:04.034] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - Result : false
[2025-12-24 00:42:04.059] [http-nio-8080-exec-6] [WARN] [JwtAuthenticationFilter] - âŒ SESSION INVALID: C7F406FDE762614EC710EEF2BE3FDE7E
2025-12-24 00:42:16 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-24 00:42:16 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-24 00:42:16 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-24 00:42:16 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-24 00:42:16 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-24 10:00:45 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 5957 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-24 10:00:45 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 113 ms. Found 6 JPA repository interfaces.
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-24 10:00:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2025-12-24 10:00:47 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-24 10:00:47 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-24 10:00:47 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-24 10:00:47 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 2122 ms
2025-12-24 10:00:48 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-24 10:00:48 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-24 10:00:48 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-24 10:00:48 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-24 10:00:48 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6768dc74
2025-12-24 10:00:48 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-24 10:00:49 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-24 10:00:49 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-24 10:00:50 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-24 10:00:50 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-24 10:00:50 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-24 10:00:50 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-24 10:00:51 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-24 10:00:51 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-24 10:00:51 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-24 10:00:52 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-24 10:00:52 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-24 10:00:52 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-24 10:00:52 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-24 10:00:52 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-24 10:00:52 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api'
2025-12-24 10:00:52 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 7.49 seconds (process running for 8.137)
[2025-12-24 10:00:52.713] [main] [INFO] [ConnectionTestRunner] - âœ“ PostgreSQL connection successful!
[2025-12-24 10:00:52.725] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-24 10:00:52.735] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-24 10:00:52 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-24 10:00:52.786] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-24 10:00:53.086] [main] [INFO] [ConnectionTestRunner] - âœ“ Redis connection successful!
[2025-12-24 10:00:53.087] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-24 10:00:53 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-24 10:00:53 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-24 10:00:53 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-24 10:00:53 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-24 10:00:53 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-24 10:01:18 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-24 10:01:18 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-24 10:01:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-24 10:01:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-24 10:01:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@51622450
2025-12-24 10:01:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@47aac663
2025-12-24 10:01:18 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-24 10:01:18 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-24 10:01:18 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
[2025-12-24 10:01:19.004] [http-nio-8080-exec-2] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: NULL
[2025-12-24 10:01:19.015] [http-nio-8080-exec-2] [INFO] [JwtAuthenticationFilter] - âŒ No Bearer token
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest)
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-24 10:01:19.126] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-24 10:01:19.137] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/auth/login
[2025-12-24 10:01:19.148] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-24 10:01:19.158] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-24 10:01:19.173] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@24ce04a2]]
[2025-12-24 10:01:19.184] [http-nio-8080-exec-2] [INFO] [AuthService] - >>> Starting AuthService.login()
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-24 10:01:19.490] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-24 10:01:19.606] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-24 10:01:19.627] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: 99142B476D82293D67B0190F2054815D for user: deepak@gmail.com
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-24 10:01:19.650] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - âœ… Session created successfully: 99142B476D82293D67B0190F2054815D
[2025-12-24 10:01:19.663] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
[2025-12-24 10:01:19.674] [http-nio-8080-exec-2] [INFO] [AuthService] - <<< Completed AuthService.login() in 466 ms
[2025-12-24 10:01:19.686] [http-nio-8080-exec-2] [INFO] [AuthService] - Result : AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjY1NTA2NzksImV4cCI6MTc2NjU1MTU3OX0.EjDVTY5KJ2EHUVliIhqIOCiRPpuj-fdeb4xbcr7LG1Y, refreshToken=5bcb723e-b280-4087-9696-e1bf1135fb62, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false)
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-24 10:01:19.707] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 524 ms
[2025-12-24 10:01:19.720] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjY1NTA2NzksImV4cCI6MTc2NjU1MTU3OX0.EjDVTY5KJ2EHUVliIhqIOCiRPpuj-fdeb4xbcr7LG1Y, refreshToken=5bcb723e-b280-4087-9696-e1bf1135fb62, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false), error=null),[]>
[2025-12-24 10:01:19.730] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 561 ms
[2025-12-24 10:01:19.741] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-24 10:01:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-24 10:01:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-24 10:01:39.800] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: Bearer eyJhbGciOiJIU...
[2025-12-24 10:01:39.812] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Extracted: eyJhbGciOiJIUzI1NiJ9...
[2025-12-24 10:01:39.829] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Token NOT blacklisted
[2025-12-24 10:01:39.872] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Extracted - Email: deepak@gmail.com, UserId: 1
2025-12-24 10:01:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 10:01:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-24 10:01:39.899] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… UserDetails loaded: deepak@gmail.com
[2025-12-24 10:01:39.912] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Token VALID
[2025-12-24 10:01:39.923] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸ” Session ID: 99142B476D82293D67B0190F2054815D
[2025-12-24 10:01:39.934] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [99142B476D82293D67B0190F2054815D]
2025-12-24 10:01:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-24 10:01:39.952] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 8 ms
[2025-12-24 10:01:39.962] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
[2025-12-24 10:01:39.973] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - âœ… Session VALID
2025-12-24 10:01:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-24 10:01:39.987] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : 99142B476D82293D67B0190F2054815D
2025-12-24 10:01:39 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
[2025-12-24 10:01:40.000] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - ðŸŽ‰ AUTHENTICATION SET SUCCESSFULLY!!!
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 99142B476D82293D67B0190F2054815D
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/users", parameters={}
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-24 10:01:40.030] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-24 10:01:40.043] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: GET /api/users
[2025-12-24 10:01:40.055] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-24 10:01:40.067] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-24 10:01:40.119] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 41 ms
[2025-12-24 10:01:40.130] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-24 10:01:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-24 10:02:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-24 10:02:51.931] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Filter - AuthHeader: Bearer eyJhbGciOiJIU...
[2025-12-24 10:02:51.942] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - ðŸ” JWT Extracted: eyJhbGciOiJIUzI1NiJ9...
[2025-12-24 10:02:51.954] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - âœ… Token NOT blacklisted
[2025-12-24 10:02:51.966] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - âœ… Extracted - Email: deepak@gmail.com, UserId: 1
2025-12-24 10:02:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-24 10:02:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-24 10:02:51.982] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - âœ… UserDetails loaded: deepak@gmail.com
[2025-12-24 10:02:51.994] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - âœ… Token VALID
[2025-12-24 10:02:52.006] [http-nio-8080-exec-6] [INFO] [JwtAuthenticationFilter] - ðŸ” Session ID: E8D884C068492F761FA6D95AF3EF2FB8
[2025-12-24 10:02:52.016] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [E8D884C068492F761FA6D95AF3EF2FB8]
2025-12-24 10:02:52 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-24 10:02:52.029] [http-nio-8080-exec-6] [WARN] [SessionManagementService] - Session not found: E8D884C068492F761FA6D95AF3EF2FB8
[2025-12-24 10:02:52.039] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 12 ms
[2025-12-24 10:02:52.049] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - Result : false
[2025-12-24 10:02:52.061] [http-nio-8080-exec-6] [WARN] [JwtAuthenticationFilter] - âŒ SESSION INVALID: E8D884C068492F761FA6D95AF3EF2FB8
2025-12-24 10:03:11 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-24 10:03:11 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-24 10:03:11 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-24 10:03:11 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-24 10:03:11 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
