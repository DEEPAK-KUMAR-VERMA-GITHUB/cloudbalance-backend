2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 09:29:02.756] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:29:02.762] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 09:29:02.767] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:29:02.775] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 09:29:02.783] [http-nio-8080-exec-7] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 09:29:02.889] [http-nio-8080-exec-7] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:29:02.901] [http-nio-8080-exec-7] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2025-12-26 09:29:02.909] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 127 ms
[2025-12-26 09:29:02.916] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2025-12-26 09:29:02 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:29:09 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 09:29:09.358] [http-nio-8080-exec-8] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:29:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:29:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:29:09.372] [http-nio-8080-exec-8] [WARN] [JwtAuthenticationFilter] - No HTTP session found - creating new session
[2025-12-26 09:29:09.386] [http-nio-8080-exec-8] [INFO] [JwtAuthenticationFilter] - Created new HTTP session: F8369FB0A8FE12D1B6A1C750EB6D77A1
[2025-12-26 09:29:09.403] [http-nio-8080-exec-8] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 09:29:09.417] [http-nio-8080-exec-8] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : F8369FB0A8FE12D1B6A1C750EB6D77A1, userId : 1
[2025-12-26 09:29:09.432] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [F8369FB0A8FE12D1B6A1C750EB6D77A1]
2025-12-26 09:29:09 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 09:29:09.452] [http-nio-8080-exec-8] [WARN] [SessionManagementService] - Active session not found for ID : F8369FB0A8FE12D1B6A1C750EB6D77A1
[2025-12-26 09:29:09.466] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 18 ms
[2025-12-26 09:29:09.478] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - Result : Optional.empty
[2025-12-26 09:29:09.488] [http-nio-8080-exec-8] [WARN] [JwtAuthenticationFilter] - Session not found : F8369FB0A8FE12D1B6A1C750EB6D77A1
[2025-12-26 09:29:09.498] [http-nio-8080-exec-8] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: F8369FB0A8FE12D1B6A1C750EB6D77A1
2025-12-26 09:29:47 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
[2025-12-26 09:29:47.695] [http-nio-8080-exec-9] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:29:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:29:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:29:47.706] [http-nio-8080-exec-9] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 09:29:47.718] [http-nio-8080-exec-9] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : F8369FB0A8FE12D1B6A1C750EB6D77A1, userId : 1
[2025-12-26 09:29:47.735] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [F8369FB0A8FE12D1B6A1C750EB6D77A1]
2025-12-26 09:29:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 09:29:47.759] [http-nio-8080-exec-9] [WARN] [SessionManagementService] - Active session not found for ID : F8369FB0A8FE12D1B6A1C750EB6D77A1
[2025-12-26 09:29:47.781] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 25 ms
[2025-12-26 09:29:47.802] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - Result : Optional.empty
[2025-12-26 09:29:47.825] [http-nio-8080-exec-9] [WARN] [JwtAuthenticationFilter] - Session not found : F8369FB0A8FE12D1B6A1C750EB6D77A1
[2025-12-26 09:29:47.846] [http-nio-8080-exec-9] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: F8369FB0A8FE12D1B6A1C750EB6D77A1
2025-12-26 09:29:51 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 09:29:51 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 09:29:51 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 09:29:51 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 09:29:51 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 09:29:55 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 82862 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 09:29:55 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 09:29:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 09:29:55 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 09:29:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 97 ms. Found 6 JPA repository interfaces.
2025-12-26 09:29:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 09:29:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 09:29:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:29:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:29:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:29:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:29:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:29:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:29:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 09:29:56 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 09:29:56 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 09:29:56 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 09:29:56 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1091 ms
2025-12-26 09:29:56 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 09:29:56 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 09:29:56 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 09:29:56 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 09:29:57 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5a644d75
2025-12-26 09:29:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 09:29:57 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 09:29:57 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 09:29:58 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 09:29:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 09:29:58 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 09:29:58 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 09:29:59 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 09:29:59 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 09:29:59 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 09:29:59 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 09:29:59 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 09:29:59 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 09:29:59 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 09:29:59 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 09:30:00 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 09:30:00 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.21 seconds (process running for 5.531)
[2025-12-26 09:30:00.135] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 09:30:00.142] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 09:30:00.149] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 09:30:00 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 09:30:00.167] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 09:30:00.462] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 09:30:00.463] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 09:30:00 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 09:30:00 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 09:30:00 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 09:30:00 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 09:30:00 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 09:30:03 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 09:30:03 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@8d92b1e
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7d49efaf
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 09:30:03 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id F8369FB0A8FE12D1B6A1C750EB6D77A1
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 09:30:03.474] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:30:03.498] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 09:30:03.523] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:30:03.543] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 09:30:03.573] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 09:30:03.809] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:30:03.878] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:30:03.893] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: 1BD1A4B3F1240B290C0DA5E88B16ACF6 for user: deepak@gmail.com
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:30:03.911] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: 1BD1A4B3F1240B290C0DA5E88B16ACF6
[2025-12-26 09:30:03.920] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 09:30:03 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 09:30:03.947] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 378 ms
[2025-12-26 09:30:03.967] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:30:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:30:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 09:30:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:30:08.157] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [1BD1A4B3F1240B290C0DA5E88B16ACF6]
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 09:30:08.184] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 9 ms
[2025-12-26 09:30:08.204] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 09:30:08.226] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : 1BD1A4B3F1240B290C0DA5E88B16ACF6
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 1BD1A4B3F1240B290C0DA5E88B16ACF6
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@7f3bf50]
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 09:30:08.285] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:30:08.306] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 09:30:08.330] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:30:08.355] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:30:08.437] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 55 ms
[2025-12-26 09:30:08.469] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 09:30:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 09:30:18.785] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 09:30:18.800] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:30:18.813] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 09:30:18.833] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:30:18.852] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:30:18.883] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 11 ms
[2025-12-26 09:30:18.904] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 09:30:18 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 09:30:30.520] [http-nio-8080-exec-5] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 09:30:30.545] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:30:30.567] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 09:30:30.583] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:30:30.594] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:30:30.605] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2025-12-26 09:30:30.614] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 09:30:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 09:30:39.571] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:30:39.577] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 09:30:39.584] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:30:39.590] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 09:30:39.597] [http-nio-8080-exec-6] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 09:30:39.696] [http-nio-8080-exec-6] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:30:39.707] [http-nio-8080-exec-6] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2025-12-26 09:30:39.716] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 120 ms
[2025-12-26 09:30:39.727] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:30:39 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 09:30:46.321] [http-nio-8080-exec-7] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 09:30:46.339] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:30:46.356] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 09:30:46.376] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:30:46.393] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:30:46.410] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 6 ms
[2025-12-26 09:30:46.423] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 09:30:46 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:30:53 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/force-login
2025-12-26 09:30:53 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/force-login
2025-12-26 09:30:53 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/force-login", parameters={}
2025-12-26 09:30:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#forceLogin(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 09:30:53 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 09:30:53.871] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:30:53.878] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/force-login
[2025-12-26 09:30:53.887] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:30:53.897] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 09:30:53 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:53 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 09:30:53 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:30:53.938] [http-nio-8080-exec-8] [INFO] [TokenBlackListService] - Token blacklisted : 6c5e6f92-9...
[2025-12-26 09:30:53.957] [http-nio-8080-exec-8] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 09:30:53 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
[2025-12-26 09:30:53.980] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - All sessions invalidated for user : deepak@gmail.com
[2025-12-26 09:30:54.001] [http-nio-8080-exec-8] [INFO] [AuthService] - Force logout completed for user: deepak@gmail.com
[2025-12-26 09:30:54.023] [http-nio-8080-exec-8] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 09:30:54.144] [http-nio-8080-exec-8] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:30:54.159] [http-nio-8080-exec-8] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:30:54.169] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - Creating session: ABAD6E6017AD6DFB716D8F22E1FD06CD for user: deepak@gmail.com
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:30:54.179] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - ✅ Session created successfully: ABAD6E6017AD6DFB716D8F22E1FD06CD
[2025-12-26 09:30:54.188] [http-nio-8080-exec-8] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 09:30:54.203] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 293 ms
[2025-12-26 09:30:54.218] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Force login successful. Previous sessions terminated., data=AuthRe (truncated)...]
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:30:54 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 09:31:01.847] [http-nio-8080-exec-9] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 09:31:01.858] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:31:01.868] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 09:31:01.877] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:31:01.884] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:31:01.894] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2025-12-26 09:31:01.903] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 09:31:01 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 09:31:12.008] [http-nio-8080-exec-10] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 09:31:12.016] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:31:12.023] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 09:31:12.035] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:31:12.052] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:31:12.084] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Response Time : 11 ms
[2025-12-26 09:31:12.107] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 09:31:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
[2025-12-26 09:31:16.553] [http-nio-8080-exec-1] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/logout
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/logout", parameters={}
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#logout(Authentication, HttpServletRequest, HttpServletResponse)
[2025-12-26 09:31:16.579] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:31:16.596] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/logout
[2025-12-26 09:31:16.615] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:31:16.631] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:31:16.652] [http-nio-8080-exec-1] [INFO] [TokenBlackListService] - Token blacklisted : eyJhbGciOi...
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:31:16.671] [http-nio-8080-exec-1] [INFO] [TokenBlackListService] - Token blacklisted : c8d79e9c-3...
[2025-12-26 09:31:16.689] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 09:31:16.707] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Session invalidated: ABAD6E6017AD6DFB716D8F22E1FD06CD
[2025-12-26 09:31:16.721] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged out : deepak@gmail.com
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
[2025-12-26 09:31:16.740] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 95 ms
[2025-12-26 09:31:16.753] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Logout successful, data=null, error=null)]
2025-12-26 09:31:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 09:31:29.672] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:31:29.679] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 09:31:29.687] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:31:29.695] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 09:31:29.708] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 09:31:29.802] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:31:29.816] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:31:29.827] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: ABAD6E6017AD6DFB716D8F22E1FD06CD for user: deepak@gmail.com
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 09:31:29.836] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Reusing existing session row for id : ABAD6E6017AD6DFB716D8F22E1FD06CD
[2025-12-26 09:31:29.844] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
[2025-12-26 09:31:29.856] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 149 ms
[2025-12-26 09:31:29.862] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:31:29 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
[2025-12-26 09:31:35.007] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1BD1A4B3F1240B290C0DA5E88B16ACF6], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/logout
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/logout", parameters={}
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#logout(Authentication, HttpServletRequest, HttpServletResponse)
[2025-12-26 09:31:35.015] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:31:35.023] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/logout
[2025-12-26 09:31:35.031] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:31:35.039] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:31:35.053] [http-nio-8080-exec-3] [INFO] [TokenBlackListService] - Token blacklisted : eyJhbGciOi...
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:31:35.072] [http-nio-8080-exec-3] [INFO] [TokenBlackListService] - Token blacklisted : 4e567b25-2...
[2025-12-26 09:31:35.094] [http-nio-8080-exec-3] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 09:31:35.111] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated: ABAD6E6017AD6DFB716D8F22E1FD06CD
[2025-12-26 09:31:35.123] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged out : deepak@gmail.com
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
[2025-12-26 09:31:35.137] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 89 ms
[2025-12-26 09:31:35.145] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Logout successful, data=null, error=null)]
2025-12-26 09:31:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:31:40 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 09:31:40 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 09:31:40 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 09:31:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 09:31:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 09:33:55 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 83530 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 09:33:55 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 145 ms. Found 6 JPA repository interfaces.
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:33:56 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-12-26 09:33:56 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 09:33:56 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 09:33:56 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 09:33:56 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1202 ms
2025-12-26 09:33:57 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 09:33:57 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 09:33:57 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 09:33:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 09:33:57 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@467e7793
2025-12-26 09:33:57 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 09:33:57 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 09:33:57 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 09:33:58 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 09:33:58 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 09:33:58 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 09:33:58 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 09:33:59 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 09:33:59 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 09:33:59 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 09:33:59 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 09:33:59 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 09:33:59 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 09:34:00 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 09:34:00 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 09:34:00 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 09:34:00 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.13 seconds (process running for 5.369)
[2025-12-26 09:34:00.523] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 09:34:00.534] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 09:34:00.542] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 09:34:00 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 09:34:00.570] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 09:34:00.855] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 09:34:00.856] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 09:34:00 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 09:34:00 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 09:34:00 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 09:34:01 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 09:34:01 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 09:34:14 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 09:34:14 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@20652a8b
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@555ec143
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 09:34:14 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/index.html", parameters={}
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-12-26 09:34:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:34:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-12-26 09:34:14 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:34:14 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-12-26 09:34:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui.css", parameters={}
2025-12-26 09:34:14 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-12-26 09:34:14 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-12-26 09:34:14 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-12-26 09:34:14 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-12-26 09:34:14 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:34:14 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:34:14 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-12-26 09:34:14 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-12-26 09:34:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-initializer.js", parameters={}
2025-12-26 09:34:14 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-12-26 09:34:14 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:34:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-12-26 09:34:14 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:34:14 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-12-26 09:34:14 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:34:14 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/index.css", parameters={}
2025-12-26 09:34:14 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-12-26 09:34:14 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-12-26 09:34:14 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-12-26 09:34:14 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-12-26 09:34:14 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-12-26 09:34:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-12-26 09:34:14 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:34:14 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:34:14 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:34:14 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:34:14 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/api-docs/swagger-config
2025-12-26 09:34:14 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:34:14 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/api-docs/swagger-config
2025-12-26 09:34:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/v1/api-docs/swagger-config", parameters={}
2025-12-26 09:34:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-12-26 09:34:14 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-32x32.png
2025-12-26 09:34:14 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:34:14 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-32x32.png
2025-12-26 09:34:14 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/favicon-32x32.png", parameters={}
2025-12-26 09:34:14 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-12-26 09:34:14 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:34:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2025-12-26 09:34:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/api/v1/v1/api-docs/swagger-config, displayRequestDuration=true, oauth2RedirectUrl=http:/ (truncated)...]
2025-12-26 09:34:14 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:34:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/api-docs
2025-12-26 09:34:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:34:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/api-docs
2025-12-26 09:34:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/v1/api-docs", parameters={}
2025-12-26 09:34:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-12-26 09:34:14 [http-nio-8080-exec-1] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 242 ms
2025-12-26 09:34:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2025-12-26 09:34:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{7b226f70656e617069223a22332e312e30222c22696e666f223a7b227469746c65223a22436c6f756442616c616e6365204 (truncated)...]
2025-12-26 09:34:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:34:55 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 09:34:55.747] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:34:55 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:34:55 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:34:55.898] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - No HTTP session found - creating new session
[2025-12-26 09:34:55.945] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Created new HTTP session: 2114BEB91D8ACF28652E9EA56A8025FA
[2025-12-26 09:34:55.967] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 09:34:55.989] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : 2114BEB91D8ACF28652E9EA56A8025FA, userId : 1
[2025-12-26 09:34:56.021] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [2114BEB91D8ACF28652E9EA56A8025FA]
2025-12-26 09:34:56 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 09:34:56.056] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - Active session not found for ID : 2114BEB91D8ACF28652E9EA56A8025FA
[2025-12-26 09:34:56.079] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 36 ms
[2025-12-26 09:34:56.100] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : Optional.empty
[2025-12-26 09:34:56.122] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Session not found : 2114BEB91D8ACF28652E9EA56A8025FA
[2025-12-26 09:34:56.141] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: 2114BEB91D8ACF28652E9EA56A8025FA
2025-12-26 09:35:00 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 09:35:00 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:35:00 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 09:35:00 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 09:35:00 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 09:35:01.100] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:35:01.111] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 09:35:01.122] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:35:01.133] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 09:35:01.143] [http-nio-8080-exec-4] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 09:35:01.359] [http-nio-8080-exec-4] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:35:01.393] [http-nio-8080-exec-4] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:35:01.412] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Creating session: 2114BEB91D8ACF28652E9EA56A8025FA for user: deepak@gmail.com
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:35:01.454] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - ✅ Session created successfully: 2114BEB91D8ACF28652E9EA56A8025FA
[2025-12-26 09:35:01.478] [http-nio-8080-exec-4] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 09:35:01.517] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 375 ms
[2025-12-26 09:35:01.538] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 09:35:01 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:35:04.568] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [2114BEB91D8ACF28652E9EA56A8025FA]
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 09:35:04.582] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 5 ms
[2025-12-26 09:35:04.592] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Result : true
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 09:35:04.613] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Session invalidated : 2114BEB91D8ACF28652E9EA56A8025FA
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 2114BEB91D8ACF28652E9EA56A8025FA
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2114BEB91D8ACF28652E9EA56A8025FA], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@2470f997]
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/refresh-token
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/refresh-token", parameters={}
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#refreshToken(HttpServletRequest, HttpServletResponse)
[2025-12-26 09:35:04.648] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:35:04.667] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/refresh-token
[2025-12-26 09:35:04.692] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:35:04.713] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 09:35:04.730] [http-nio-8080-exec-5] [ERROR] [HttpLoggingAspect] - Request failed after 1 ms : Refresh token not found.
com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.
	at com.cloudkeeper.cloudbalance_backend.service.AuthService.refreshToken(AuthService.java:141)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.refreshToken(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.refreshToken(AuthController.java:56)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.refreshToken(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleInvalidCredentials(Exception)
[2025-12-26 09:35:04.755] [http-nio-8080-exec-5] [ERROR] [GlobalExceptionHandler] - Authentication failed: Refresh token not found.
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=Invalid email or password)]
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.]
2025-12-26 09:35:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-12-26 09:35:14 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
2025-12-26 09:35:14 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:35:14 [http-nio-8080-exec-7] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8080/api/v1/auth/refresh-token?continue to session
2025-12-26 09:35:14 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-26 09:35:14 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-26 09:35:14 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:35:14 [http-nio-8080-exec-7] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8080/api/v1/error?continue to session
2025-12-26 09:35:14 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-26 09:35:36 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 09:35:36.212] [http-nio-8080-exec-1] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:35:36 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2114BEB91D8ACF28652E9EA56A8025FA], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:35:36 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/refresh-token
2025-12-26 09:35:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/refresh-token", parameters={}
2025-12-26 09:35:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#refreshToken(HttpServletRequest, HttpServletResponse)
[2025-12-26 09:35:36.221] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:35:36.231] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/refresh-token
[2025-12-26 09:35:36.239] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:35:36.247] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 09:35:36.257] [http-nio-8080-exec-1] [ERROR] [HttpLoggingAspect] - Request failed after 1 ms : Refresh token not found.
com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.
	at com.cloudkeeper.cloudbalance_backend.service.AuthService.refreshToken(AuthService.java:141)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.refreshToken(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.refreshToken(AuthController.java:56)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.refreshToken(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 09:35:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleInvalidCredentials(Exception)
[2025-12-26 09:35:36.282] [http-nio-8080-exec-1] [ERROR] [GlobalExceptionHandler] - Authentication failed: Refresh token not found.
2025-12-26 09:35:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:35:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=Invalid email or password)]
2025-12-26 09:35:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.]
2025-12-26 09:35:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
[2025-12-26 09:38:15.514] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2114BEB91D8ACF28652E9EA56A8025FA], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/logout
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/logout", parameters={}
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#logout(Authentication, HttpServletRequest, HttpServletResponse)
[2025-12-26 09:38:15.523] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:38:15.529] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/logout
[2025-12-26 09:38:15.551] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:38:15.557] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:38:15.573] [http-nio-8080-exec-4] [INFO] [TokenBlackListService] - Token blacklisted : eyJhbGciOi...
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:38:15.581] [http-nio-8080-exec-4] [INFO] [TokenBlackListService] - Token blacklisted : 4c3646d4-b...
[2025-12-26 09:38:15.590] [http-nio-8080-exec-4] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 09:38:15.600] [http-nio-8080-exec-4] [INFO] [AuthService] - User logged out : deepak@gmail.com
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
[2025-12-26 09:38:15.618] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 54 ms
[2025-12-26 09:38:15.633] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Logout successful, data=null, error=null)]
2025-12-26 09:38:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:38:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 09:38:51.184] [http-nio-8080-exec-7] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:38:51 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=2114BEB91D8ACF28652E9EA56A8025FA], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 09:38:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/refresh-token
2025-12-26 09:38:51 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/refresh-token", parameters={}
2025-12-26 09:38:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#refreshToken(HttpServletRequest, HttpServletResponse)
[2025-12-26 09:38:51.193] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:38:51.200] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/refresh-token
[2025-12-26 09:38:51.207] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:38:51.214] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 09:38:51.222] [http-nio-8080-exec-7] [ERROR] [HttpLoggingAspect] - Request failed after 1 ms : Refresh token not found.
com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.
	at com.cloudkeeper.cloudbalance_backend.service.AuthService.refreshToken(AuthService.java:141)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.refreshToken(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.refreshToken(AuthController.java:56)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.refreshToken(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 09:38:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleInvalidCredentials(Exception)
[2025-12-26 09:38:51.237] [http-nio-8080-exec-7] [ERROR] [GlobalExceptionHandler] - Authentication failed: Refresh token not found.
2025-12-26 09:38:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:38:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=Invalid email or password)]
2025-12-26 09:38:51 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.]
2025-12-26 09:38:51 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-12-26 09:43:37 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 09:43:37 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 09:43:37 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 09:43:37 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 09:43:37 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 09:44:07 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 84938 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 09:44:07 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70 ms. Found 6 JPA repository interfaces.
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:44:08 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 09:44:09 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 09:44:09 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 09:44:09 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 09:44:09 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1354 ms
2025-12-26 09:44:09 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 09:44:09 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 09:44:09 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 09:44:09 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 09:44:10 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@183435c0
2025-12-26 09:44:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 09:44:10 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 09:44:10 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 09:44:11 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 09:44:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 09:44:11 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 09:44:11 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 09:44:12 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 09:44:12 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 09:44:12 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 09:44:12 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 09:44:12 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 09:44:12 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 09:44:12 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 09:44:12 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 09:44:12 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 09:44:12 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.656 seconds (process running for 6.077)
[2025-12-26 09:44:12.890] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 09:44:12.900] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 09:44:12.910] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 09:44:12 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 09:44:12.980] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 09:44:13.373] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 09:44:13.373] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 09:44:13 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 09:44:13 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 09:44:13 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 09:44:13 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 09:44:13 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 09:44:16 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 09:44:16 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5e500946
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@34d27e12
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 09:44:16 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 515045F02FC11D9A660BB1CDCC483A41
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 09:44:16 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 09:44:17.057] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:44:17.065] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 09:44:17.072] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:44:17.080] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 09:44:17.089] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 09:44:17.265] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:44:17.340] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:44:17.357] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating session: 970F4D04FB0542906EC13DC27CCCBC22 for user: deepak@gmail.com
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:44:17.382] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - ✅ Session created successfully: 970F4D04FB0542906EC13DC27CCCBC22
[2025-12-26 09:44:17.402] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 09:44:17.444] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 357 ms
[2025-12-26 09:44:17.471] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 09:44:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:44:25 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 09:44:25.824] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:44:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:44:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:44:25.931] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 09:44:25.940] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : 970F4D04FB0542906EC13DC27CCCBC22, userId : 1
[2025-12-26 09:44:25.950] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [970F4D04FB0542906EC13DC27CCCBC22]
2025-12-26 09:44:25 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 09:44:25.964] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 6 ms
[2025-12-26 09:44:25.972] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 09:44:25.988] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: 970F4D04FB0542906EC13DC27CCCBC22
2025-12-26 09:45:07 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 09:45:07.337] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:45:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:45:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:45:07.350] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 09:45:07.363] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : 970F4D04FB0542906EC13DC27CCCBC22, userId : 1
[2025-12-26 09:45:07.372] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [970F4D04FB0542906EC13DC27CCCBC22]
2025-12-26 09:45:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 09:45:07.382] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 2 ms
[2025-12-26 09:45:07.389] [http-nio-8080-exec-4] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 09:45:07.396] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: 970F4D04FB0542906EC13DC27CCCBC22
2025-12-26 09:53:09 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 09:53:09 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 09:53:09 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 09:53:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 09:53:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 09:53:14 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 85843 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 09:53:14 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 152 ms. Found 6 JPA repository interfaces.
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 09:53:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-12-26 09:53:15 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 09:53:15 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 09:53:15 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 09:53:15 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1648 ms
2025-12-26 09:53:16 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 09:53:16 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 09:53:17 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 09:53:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 09:53:17 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@268f126f
2025-12-26 09:53:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 09:53:17 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 09:53:17 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 09:53:18 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 09:53:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 09:53:18 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 09:53:18 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 09:53:20 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 09:53:20 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 09:53:20 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 09:53:21 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 09:53:21 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 09:53:21 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 09:53:21 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 09:53:21 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 09:53:22 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 09:53:22 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 8.414 seconds (process running for 8.995)
[2025-12-26 09:53:22.213] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 09:53:22.232] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 09:53:22.257] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 09:53:22 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 09:53:22.314] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 09:53:22.794] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 09:53:22.795] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 09:53:22 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 09:53:22 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 09:53:23 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 09:53:23 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 09:53:23 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 09:53:24 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 09:53:24 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 09:53:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 09:53:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 09:53:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@ab85d63
2025-12-26 09:53:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@77228300
2025-12-26 09:53:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 09:53:24 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-12-26 09:53:24 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 09:53:24 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 09:53:24 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 970F4D04FB0542906EC13DC27CCCBC22
2025-12-26 09:53:24 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 09:53:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 09:53:25.202] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 09:53:25.239] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 09:53:25.267] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 09:53:25.305] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 09:53:25.338] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 09:53:25.597] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 09:53:25.685] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:53:25.731] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating session: E586B1AF8A8C1C23B7D5C51D2A47CB00 for user: deepak@gmail.com
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 09:53:25.796] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - ✅ Session created successfully: E586B1AF8A8C1C23B7D5C51D2A47CB00
[2025-12-26 09:53:25.824] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 09:53:25.872] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 537 ms
[2025-12-26 09:53:25.896] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 09:53:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 09:53:31 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 09:53:31.879] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:53:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:53:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:53:31.970] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 09:53:31.994] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : E586B1AF8A8C1C23B7D5C51D2A47CB00, userId : 1
[2025-12-26 09:53:32.022] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [E586B1AF8A8C1C23B7D5C51D2A47CB00]
2025-12-26 09:53:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 09:53:32.058] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 19 ms
[2025-12-26 09:53:32.087] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 09:53:32.113] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: E586B1AF8A8C1C23B7D5C51D2A47CB00
2025-12-26 09:53:47 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 09:53:47.061] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 09:53:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 09:53:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 09:53:47.093] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 09:53:47.117] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : E586B1AF8A8C1C23B7D5C51D2A47CB00, userId : 1
[2025-12-26 09:53:47.137] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [E586B1AF8A8C1C23B7D5C51D2A47CB00]
2025-12-26 09:53:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 09:53:47.158] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 3 ms
[2025-12-26 09:53:47.174] [http-nio-8080-exec-4] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 09:53:47.192] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: E586B1AF8A8C1C23B7D5C51D2A47CB00
2025-12-26 09:55:40 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 09:55:40 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 09:55:40 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 09:55:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 09:55:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 10:04:37 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 86842 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 10:04:37 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76 ms. Found 6 JPA repository interfaces.
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:04:39 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2025-12-26 10:04:39 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 10:04:39 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 10:04:39 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 10:04:40 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1986 ms
2025-12-26 10:04:40 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 10:04:40 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 10:04:40 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 10:04:40 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 10:04:41 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@9cdf13e
2025-12-26 10:04:41 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 10:04:41 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 10:04:41 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 10:04:42 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 10:04:42 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 10:04:42 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:04:42 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 10:04:44 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 10:04:44 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 10:04:44 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 10:04:45 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 10:04:45 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 10:04:45 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 10:04:45 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 10:04:45 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 10:04:46 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 10:04:46 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 8.666 seconds (process running for 9.164)
2025-12-26 10:04:46 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 10:04:46 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
[2025-12-26 10:04:46.155] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 10:04:46.180] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 10:04:46.204] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 10:04:46 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 10:04:46.259] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 10:04:46.673] [main] [ERROR] [ConnectionTestRunner] - ✗ Redis connection failed!
org.springframework.data.redis.RedisSystemException: Unknown redis exception
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.getFallback(FallbackExceptionTranslationStrategy.java:49)
	at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:39)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.convertLettuceAccessException(LettuceConnection.java:313)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$2(LettuceConnection.java:454)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$Synchronizer.invoke(LettuceInvoker.java:665)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker$DefaultSingleInvocationSpec.get(LettuceInvoker.java:583)
	at org.springframework.data.redis.connection.lettuce.LettuceStringCommands.set(LettuceStringCommands.java:104)
	at org.springframework.data.redis.connection.DefaultedRedisConnection.set(DefaultedRedisConnection.java:352)
	at org.springframework.data.redis.core.DefaultValueOperations.lambda$set$0(DefaultValueOperations.java:199)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:413)
	at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:380)
	at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:166)
	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:199)
	at com.cloudkeeper.cloudbalance_backend.config.ConnectionTestRunner.testRedisConnection(ConnectionTestRunner.java:31)
	at com.cloudkeeper.cloudbalance_backend.config.ConnectionTestRunner.run(ConnectionTestRunner.java:26)
	at org.springframework.boot.SpringApplication.lambda$callRunner$1(SpringApplication.java:801)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:809)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:800)
	at org.springframework.boot.SpringApplication.lambda$callRunners$0(SpringApplication.java:785)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:186)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:571)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:153)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:176)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:632)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:785)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:328)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at com.cloudkeeper.cloudbalance_backend.CloudbalanceBackendApplication.main(CloudbalanceBackendApplication.java:12)
Caused by: java.lang.IllegalStateException: cannot be started once stopped
	at io.netty.util.HashedWheelTimer.start(HashedWheelTimer.java:363)
	at io.netty.util.HashedWheelTimer.newTimeout(HashedWheelTimer.java:445)
	at io.lettuce.core.protocol.CommandExpiryWriter.potentiallyExpire(CommandExpiryWriter.java:180)
	at io.lettuce.core.protocol.CommandExpiryWriter.write(CommandExpiryWriter.java:124)
	at io.lettuce.core.RedisChannelHandler.dispatch(RedisChannelHandler.java:203)
	at io.lettuce.core.StatefulRedisConnectionImpl.dispatch(StatefulRedisConnectionImpl.java:187)
	at io.lettuce.core.AbstractRedisAsyncCommands.dispatch(AbstractRedisAsyncCommands.java:785)
	at io.lettuce.core.AbstractRedisAsyncCommands.set(AbstractRedisAsyncCommands.java:2593)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker.lambda$from$2(LettuceInvoker.java:198)
	at org.springframework.data.redis.connection.lettuce.LettuceInvoker.lambda$from$0(LettuceInvoker.java:169)
	at org.springframework.data.redis.connection.lettuce.LettuceConnection.lambda$doInvoke$2(LettuceConnection.java:450)
	... 31 more
[2025-12-26 10:04:46.704] [main] [ERROR] [ConnectionTestRunner] -   Please check if Redis is running on localhost:6379
[2025-12-26 10:04:46.725] [main] [ERROR] [ConnectionTestRunner] -   Error: Unknown redis exception
2025-12-26 10:04:46 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:04:46 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 10:04:46 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 10:13:00 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 87717 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 10:13:00 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 178 ms. Found 6 JPA repository interfaces.
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:13:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-12-26 10:13:02 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 10:13:02 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 10:13:02 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 10:13:02 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1964 ms
2025-12-26 10:13:03 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 10:13:03 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 10:13:04 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 10:13:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 10:13:04 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36e11b60
2025-12-26 10:13:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 10:13:04 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 10:13:04 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 10:13:05 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 10:13:05 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 10:13:05 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:13:06 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 10:13:06 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 10:13:06 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 10:13:07 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 10:13:07 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 10:13:07 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 10:13:07 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 10:13:07 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 10:13:07 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 10:13:07 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 10:13:07 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 7.704 seconds (process running for 8.36)
[2025-12-26 10:13:07.832] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 10:13:07.848] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 10:13:07.867] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 10:13:07 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 10:13:07.928] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 10:13:08.230] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 10:13:08.231] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 10:13:08 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 10:13:08 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 10:13:08 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 10:13:08 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 10:13:08 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 10:13:15 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 10:13:15 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@30cbba6b
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@14b810f9
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 10:13:15 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 10:13:15.490] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 10:13:15.524] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 10:13:15.554] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 10:13:15.583] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 10:13:15.614] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:13:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 10:13:16.046] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 10:13:16.198] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 10:13:16.252] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: DA6DE0AE14327317E203A56AE7D20D8B for user: deepak@gmail.com
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 10:13:16.292] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: DA6DE0AE14327317E203A56AE7D20D8B
[2025-12-26 10:13:16.304] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 10:13:16.359] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 747 ms
[2025-12-26 10:13:16.442] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 10:13:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 10:13:21.325] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [DA6DE0AE14327317E203A56AE7D20D8B]
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 10:13:21.362] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 10 ms
[2025-12-26 10:13:21.386] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 10:13:21.419] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : DA6DE0AE14327317E203A56AE7D20D8B
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from DA6DE0AE14327317E203A56AE7D20D8B
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DA6DE0AE14327317E203A56AE7D20D8B], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@2af8e8a7]
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 10:13:21.505] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 10:13:21.530] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 10:13:21.554] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 10:13:21.577] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 10:13:21.657] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 58 ms
[2025-12-26 10:13:21.688] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 10:13:21 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 10:13:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 10:13:27.272] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 10:13:27 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DA6DE0AE14327317E203A56AE7D20D8B], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 10:13:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/refresh-token
2025-12-26 10:13:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/refresh-token", parameters={}
2025-12-26 10:13:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#refreshToken(HttpServletRequest, HttpServletResponse)
[2025-12-26 10:13:27.300] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 10:13:27.323] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/refresh-token
[2025-12-26 10:13:27.347] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 10:13:27.372] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 10:13:27.401] [http-nio-8080-exec-4] [ERROR] [HttpLoggingAspect] - Request failed after 5 ms : Refresh token not found.
com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.
	at com.cloudkeeper.cloudbalance_backend.service.AuthService.refreshToken(AuthService.java:141)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.refreshToken(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.refreshToken(AuthController.java:56)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.refreshToken(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 10:13:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleInvalidCredentials(Exception)
[2025-12-26 10:13:27.464] [http-nio-8080-exec-4] [ERROR] [GlobalExceptionHandler] - Authentication failed: Refresh token not found.
2025-12-26 10:13:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 10:13:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=Invalid email or password)]
2025-12-26 10:13:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.]
2025-12-26 10:13:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-12-26 10:14:42 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 10:14:42 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 10:14:43 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:14:43 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 10:14:43 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 10:14:46 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 88248 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 10:14:46 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 148 ms. Found 6 JPA repository interfaces.
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:14:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2025-12-26 10:14:48 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 10:14:48 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 10:14:48 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 10:14:48 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1783 ms
2025-12-26 10:14:49 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 10:14:49 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 10:14:49 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 10:14:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 10:14:50 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36e11b60
2025-12-26 10:14:50 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 10:14:50 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 10:14:50 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 10:14:51 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 10:14:51 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 10:14:51 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:14:51 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 10:14:52 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 10:14:52 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 10:14:53 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 10:14:53 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 10:14:53 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 10:14:54 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 10:14:54 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 10:14:54 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 10:14:54 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 10:14:54 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 8.659 seconds (process running for 9.174)
[2025-12-26 10:14:54.625] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 10:14:54.641] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 10:14:54.657] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 10:14:54 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 10:14:54.691] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 10:14:55.412] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 10:14:55.413] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 10:14:55 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 10:14:55 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 10:14:55 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 10:14:55 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 10:14:55 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 10:14:57 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 10:14:57 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@30107313
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5d22af13
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 10:14:57 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 548BB32816EE441F7D9DEECDCD05B1A8
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 10:14:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 10:14:57.694] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 10:14:57.725] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 10:14:57.754] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 10:14:57.777] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 10:14:57.797] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 10:14:58.175] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 10:14:58.374] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 10:14:58.430] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: DB687DCC628666FE5CCBFC26496AD188 for user: deepak@gmail.com
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 10:14:58.486] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: DB687DCC628666FE5CCBFC26496AD188
[2025-12-26 10:14:58.517] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 10:14:58.553] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 759 ms
[2025-12-26 10:14:58.566] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 10:14:58 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 10:15:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 10:15:04.681] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 10:15:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:15:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 10:15:04.768] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 10:15:04.794] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : DB687DCC628666FE5CCBFC26496AD188, userId : 1
[2025-12-26 10:15:04.827] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [DB687DCC628666FE5CCBFC26496AD188]
2025-12-26 10:15:04 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 10:15:04.885] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 23 ms
[2025-12-26 10:15:04.916] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 10:15:04.944] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: DB687DCC628666FE5CCBFC26496AD188
2025-12-26 10:15:36 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 10:15:36.264] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 10:15:36 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:15:36 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 10:15:36.299] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 10:15:36.325] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : DB687DCC628666FE5CCBFC26496AD188, userId : 1
[2025-12-26 10:15:36.351] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [DB687DCC628666FE5CCBFC26496AD188]
2025-12-26 10:15:36 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 10:15:36.384] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 5 ms
[2025-12-26 10:15:36.411] [http-nio-8080-exec-4] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 10:15:36.440] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: DB687DCC628666FE5CCBFC26496AD188
2025-12-26 10:23:27 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 10:23:27 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 10:23:27 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:23:27 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 10:23:27 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 10:23:30 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 90367 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 10:23:30 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 144 ms. Found 6 JPA repository interfaces.
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:23:31 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-12-26 10:23:32 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 10:23:32 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 10:23:32 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 10:23:32 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1995 ms
2025-12-26 10:23:33 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 10:23:33 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 10:23:33 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 10:23:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 10:23:33 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36e11b60
2025-12-26 10:23:33 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 10:23:33 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 10:23:33 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 10:23:34 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 10:23:34 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 10:23:34 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:23:35 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 10:23:36 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 10:23:36 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 10:23:37 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 10:23:37 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 10:23:37 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 10:23:37 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 10:23:37 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 10:23:37 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 10:23:38 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 10:23:38 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 8.388 seconds (process running for 8.989)
[2025-12-26 10:23:38.563] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 10:23:38.586] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 10:23:38.606] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 10:23:38 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 10:23:38.667] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 10:23:38.984] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 10:23:38.985] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 10:23:39 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 10:23:39 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 10:23:39 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 10:23:39 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 10:23:39 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 10:23:41 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 10:23:41 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4100960
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7a456a79
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 10:23:41 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id DB687DCC628666FE5CCBFC26496AD188
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 10:23:41.473] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 10:23:41.504] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 10:23:41.531] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 10:23:41.554] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 10:23:41.585] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 10:23:41.832] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 10:23:41.964] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 10:23:41 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 10:23:42.012] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating session: 8A5A5B47ECE65852EC9530F94C816A78 for user: deepak@gmail.com
2025-12-26 10:23:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 10:23:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 10:23:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 10:23:42.075] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - ✅ Session created successfully: 8A5A5B47ECE65852EC9530F94C816A78
[2025-12-26 10:23:42.103] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 10:23:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 10:23:42.150] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 567 ms
[2025-12-26 10:23:42.179] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 10:23:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 10:23:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 10:23:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 10:23:50 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 10:23:50.956] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 10:23:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:23:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 10:23:51.068] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 10:23:51.091] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : 8A5A5B47ECE65852EC9530F94C816A78, userId : 1
[2025-12-26 10:23:51.126] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [8A5A5B47ECE65852EC9530F94C816A78]
2025-12-26 10:23:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 10:23:51.174] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 18 ms
[2025-12-26 10:23:51.209] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 10:23:51.235] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: 8A5A5B47ECE65852EC9530F94C816A78
2025-12-26 10:25:00 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 10:25:00 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 10:25:00 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:25:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 10:25:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 10:30:41 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 91440 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 10:30:41 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 65 ms. Found 6 JPA repository interfaces.
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:30:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-12-26 10:30:42 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 10:30:42 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 10:30:42 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 10:30:42 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 974 ms
2025-12-26 10:30:43 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 10:30:43 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 10:30:43 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 10:30:43 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 10:30:43 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@627cb3ed
2025-12-26 10:30:43 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 10:30:43 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 10:30:43 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 10:30:44 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 10:30:44 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 10:30:44 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:30:44 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 10:30:44 [main] WARN  o.s.aop.framework.CglibAopProxy - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(jakarta.servlet.FilterConfig) throws jakarta.servlet.ServletException] because it is marked as final, consider using interface-based JDK proxies instead.
2025-12-26 10:30:44 [main] ERROR o.a.c.c.C.[.[localhost].[/api/v1] - Exception starting filter [jwtAuthenticationFilter]
java.lang.NullPointerException: Cannot invoke "org.apache.commons.logging.Log.isDebugEnabled()" because "this.logger" is null
	at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:235)
	at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:236)
	at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:99)
	at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3853)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4452)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1162)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1158)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:81)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:149)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:714)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:767)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1162)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1158)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:81)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:149)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:714)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:201)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:410)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:864)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:435)
	at org.springframework.boot.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:131)
	at org.springframework.boot.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:110)
	at org.springframework.boot.tomcat.servlet.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:408)
	at org.springframework.boot.tomcat.servlet.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:166)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:190)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:164)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:614)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:454)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at com.cloudkeeper.cloudbalance_backend.CloudbalanceBackendApplication.main(CloudbalanceBackendApplication.java:12)
2025-12-26 10:30:44 [main] ERROR o.a.catalina.core.StandardContext - One or more Filters failed to start. Full details will be found in the appropriate container log file
2025-12-26 10:30:44 [main] ERROR o.a.catalina.core.StandardContext - Context [/api/v1] startup failed due to previous errors
2025-12-26 10:30:44 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [lettuce-timer-3-1] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/java.lang.Thread.sleepNanos0(Native Method)
 java.base/java.lang.Thread.sleepNanos(Thread.java:509)
 java.base/java.lang.Thread.sleep(Thread.java:540)
 io.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:598)
 io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:494)
 io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
 java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 10:30:44 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [HikariPool-1:housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:271)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1803)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1166)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:883)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1016)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
 java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 10:30:44 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [HikariPool-1:connection-adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:271)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1803)
 java.base/java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:460)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1015)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
 java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 10:30:44 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-26 10:30:44 [main] WARN  o.s.b.w.s.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-12-26 10:30:44 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:30:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 10:30:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 10:30:44 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-26 10:30:44 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:614)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:454)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at com.cloudkeeper.cloudbalance_backend.CloudbalanceBackendApplication.main(CloudbalanceBackendApplication.java:12)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:150)
	at org.springframework.boot.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:110)
	at org.springframework.boot.tomcat.servlet.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:408)
	at org.springframework.boot.tomcat.servlet.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:166)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:190)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:164)
	... 8 common frames omitted
Caused by: java.lang.IllegalStateException: StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[/api/v1] failed to start
	at org.springframework.boot.tomcat.TomcatWebServer.rethrowDeferredStartupExceptions(TomcatWebServer.java:206)
	at org.springframework.boot.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:134)
	... 13 common frames omitted
2025-12-26 10:31:58 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 91881 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 10:31:58 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 67 ms. Found 6 JPA repository interfaces.
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:31:58 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 10:31:59 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 10:31:59 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 10:31:59 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 10:31:59 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1016 ms
2025-12-26 10:31:59 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 10:31:59 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 10:31:59 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 10:31:59 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 10:31:59 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36e11b60
2025-12-26 10:31:59 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 10:31:59 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 10:31:59 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 10:32:00 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 10:32:00 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 10:32:00 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:32:00 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 10:32:01 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 10:32:01 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 10:32:01 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 10:32:01 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 10:32:01 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 10:32:01 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 10:32:01 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 10:32:01 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 10:32:01 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 10:32:01 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.897 seconds (process running for 4.242)
[2025-12-26 10:32:01.773] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 10:32:01.782] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 10:32:01.789] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 10:32:01 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 10:32:01.803] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 10:32:02.021] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 10:32:02.021] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 10:32:02 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 10:32:02 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 10:32:02 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 10:32:02 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 10:32:02 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 10:32:25 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 10:32:25 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 10:32:25 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:32:25 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 10:32:25 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 10:32:27 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 92315 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 10:32:27 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 67 ms. Found 6 JPA repository interfaces.
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:32:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-12-26 10:32:28 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 10:32:28 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 10:32:28 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 10:32:28 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1003 ms
2025-12-26 10:32:28 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 10:32:28 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 10:32:28 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 10:32:28 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 10:32:28 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@627cb3ed
2025-12-26 10:32:28 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 10:32:28 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 10:32:28 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 10:32:29 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 10:32:29 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 10:32:29 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:32:29 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 10:32:30 [main] WARN  o.s.aop.framework.CglibAopProxy - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(jakarta.servlet.FilterConfig) throws jakarta.servlet.ServletException] because it is marked as final, consider using interface-based JDK proxies instead.
2025-12-26 10:32:30 [main] ERROR o.a.c.c.C.[.[localhost].[/api/v1] - Exception starting filter [jwtAuthenticationFilter]
java.lang.NullPointerException: Cannot invoke "org.apache.commons.logging.Log.isDebugEnabled()" because "this.logger" is null
	at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:235)
	at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:236)
	at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:99)
	at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3853)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4452)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1162)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1158)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:81)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:149)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:714)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:767)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1162)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1158)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:328)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:81)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:149)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:714)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:201)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:410)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:864)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:435)
	at org.springframework.boot.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:131)
	at org.springframework.boot.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:110)
	at org.springframework.boot.tomcat.servlet.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:408)
	at org.springframework.boot.tomcat.servlet.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:166)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:190)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:164)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:614)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:454)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at com.cloudkeeper.cloudbalance_backend.CloudbalanceBackendApplication.main(CloudbalanceBackendApplication.java:12)
2025-12-26 10:32:30 [main] ERROR o.a.catalina.core.StandardContext - One or more Filters failed to start. Full details will be found in the appropriate container log file
2025-12-26 10:32:30 [main] ERROR o.a.catalina.core.StandardContext - Context [/api/v1] startup failed due to previous errors
2025-12-26 10:32:30 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [lettuce-timer-3-1] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/java.lang.Thread.sleepNanos0(Native Method)
 java.base/java.lang.Thread.sleepNanos(Thread.java:509)
 java.base/java.lang.Thread.sleep(Thread.java:540)
 io.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:598)
 io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:494)
 io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
 java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 10:32:30 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [HikariPool-1:housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:271)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1803)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1166)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:883)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1016)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
 java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 10:32:30 [main] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [HikariPool-1:connection-adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:271)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1803)
 java.base/java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:460)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1015)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
 java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 10:32:30 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-26 10:32:30 [main] WARN  o.s.b.w.s.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-12-26 10:32:30 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:32:30 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 10:32:30 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 10:32:30 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-26 10:32:30 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:614)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:454)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1374)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at com.cloudkeeper.cloudbalance_backend.CloudbalanceBackendApplication.main(CloudbalanceBackendApplication.java:12)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:150)
	at org.springframework.boot.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:110)
	at org.springframework.boot.tomcat.servlet.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:408)
	at org.springframework.boot.tomcat.servlet.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:166)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:190)
	at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:164)
	... 8 common frames omitted
Caused by: java.lang.IllegalStateException: StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[/api/v1] failed to start
	at org.springframework.boot.tomcat.TomcatWebServer.rethrowDeferredStartupExceptions(TomcatWebServer.java:206)
	at org.springframework.boot.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:134)
	... 13 common frames omitted
2025-12-26 10:33:19 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 92710 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 10:33:19 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 69 ms. Found 6 JPA repository interfaces.
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 10:33:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 10:33:20 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 10:33:20 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 10:33:20 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 10:33:20 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1011 ms
2025-12-26 10:33:20 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 10:33:20 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 10:33:21 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 10:33:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 10:33:21 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1ae26c59
2025-12-26 10:33:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 10:33:21 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 10:33:21 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 10:33:21 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 10:33:21 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 10:33:21 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:33:21 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 10:33:22 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 10:33:22 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 10:33:22 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 10:33:22 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 10:33:22 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 10:33:22 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 10:33:22 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 10:33:22 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 10:33:23 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 10:33:23 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.638 seconds (process running for 3.963)
[2025-12-26 10:33:23.045] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 10:33:23.052] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
2025-12-26 10:33:23 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 10:33:23.060] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2025-12-26 10:33:23.074] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 10:33:23.246] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 10:33:23.246] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 10:33:23 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 10:33:23 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 10:33:23 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 10:33:23 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 10:33:23 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 10:33:31 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 10:33:31 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7f9f873
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@e774bb3
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 10:33:31 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 8A5A5B47ECE65852EC9530F94C816A78
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 10:33:31.201] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 10:33:31.209] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 10:33:31.216] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 10:33:31.224] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 10:33:31.232] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 10:33:31.395] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 10:33:31.466] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 10:33:31.483] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: EE1055EE2FBBB4EDBEED1CDF1963F5A5 for user: deepak@gmail.com
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 10:33:31.502] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: EE1055EE2FBBB4EDBEED1CDF1963F5A5
[2025-12-26 10:33:31.511] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 10:33:31.524] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 293 ms
[2025-12-26 10:33:31.531] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 10:33:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 10:33:35.265] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [EE1055EE2FBBB4EDBEED1CDF1963F5A5]
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 10:33:35.277] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 4 ms
[2025-12-26 10:33:35.285] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 10:33:35.295] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : EE1055EE2FBBB4EDBEED1CDF1963F5A5
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from EE1055EE2FBBB4EDBEED1CDF1963F5A5
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EE1055EE2FBBB4EDBEED1CDF1963F5A5], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@74191fba]
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 10:33:35.318] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 10:33:35.326] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 10:33:35.333] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 10:33:35.340] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 10:33:35.362] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 15 ms
[2025-12-26 10:33:35.371] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 10:33:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 10:33:44.043] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EE1055EE2FBBB4EDBEED1CDF1963F5A5], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 10:33:44.055] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 10:33:44.066] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 10:33:44.074] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 10:33:44.081] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 10:33:44.094] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 5 ms
[2025-12-26 10:33:44.101] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 10:33:44 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 10:33:49 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 10:33:49.047] [http-nio-8080-exec-5] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 10:33:49 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EE1055EE2FBBB4EDBEED1CDF1963F5A5], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 10:33:49 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/refresh-token
2025-12-26 10:33:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/refresh-token", parameters={}
2025-12-26 10:33:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#refreshToken(HttpServletRequest, HttpServletResponse)
[2025-12-26 10:33:49.056] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 10:33:49.063] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/refresh-token
[2025-12-26 10:33:49.070] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 10:33:49.077] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 10:33:49.086] [http-nio-8080-exec-5] [ERROR] [HttpLoggingAspect] - Request failed after 3 ms : Refresh token not found.
com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.
	at com.cloudkeeper.cloudbalance_backend.service.AuthService.refreshToken(AuthService.java:141)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.refreshToken(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.refreshToken(AuthController.java:56)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.refreshToken(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 10:33:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleInvalidCredentials(Exception)
[2025-12-26 10:33:49.104] [http-nio-8080-exec-5] [ERROR] [GlobalExceptionHandler] - Authentication failed: Refresh token not found.
2025-12-26 10:33:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 10:33:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=Invalid email or password)]
2025-12-26 10:33:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.]
2025-12-26 10:33:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
[2025-12-26 10:34:09.825] [http-nio-8080-exec-6] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EE1055EE2FBBB4EDBEED1CDF1963F5A5], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/logout
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/logout", parameters={}
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#logout(Authentication, HttpServletRequest, HttpServletResponse)
[2025-12-26 10:34:09.834] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 10:34:09.842] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/logout
[2025-12-26 10:34:09.849] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 10:34:09.856] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 10:34:09.873] [http-nio-8080-exec-6] [INFO] [TokenBlackListService] - Token blacklisted : eyJhbGciOi...
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 10:34:09.885] [http-nio-8080-exec-6] [INFO] [TokenBlackListService] - Token blacklisted : 6ccb50d4-8...
[2025-12-26 10:34:09.894] [http-nio-8080-exec-6] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 10:34:09.905] [http-nio-8080-exec-6] [INFO] [AuthService] - User logged out : deepak@gmail.com
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
[2025-12-26 10:34:09.916] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 53 ms
[2025-12-26 10:34:09.923] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Logout successful, data=null, error=null)]
2025-12-26 10:34:09 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 10:58:42 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 10:58:42 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 10:58:42 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 10:58:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 10:58:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:02:17 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 98421 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:02:17 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 6 JPA repository interfaces.
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:02:18 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 11:02:18 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:02:18 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:02:18 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:02:18 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1027 ms
2025-12-26 11:02:19 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:02:19 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:02:19 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:02:19 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:02:19 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36e11b60
2025-12-26 11:02:19 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:02:19 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:02:19 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:02:19 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:02:19 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:02:19 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:02:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:02:20 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:02:20 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:02:20 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:02:20 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:02:20 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 11:02:21 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 11:02:21 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 11:02:21 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 11:02:21 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 11:02:21 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 11:02:21 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 11:02:21 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.921 seconds (process running for 4.208)
[2025-12-26 11:02:21.415] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 11:02:21.424] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 11:02:21.432] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 11:02:21 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:02:21.450] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 11:02:21.700] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 11:02:21.700] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 11:02:21 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 11:02:21 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 11:02:21 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 11:02:21 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 11:02:21 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 11:02:23 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 11:02:23 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@614ff138
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@26159658
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 11:02:23 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:02:23 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:02:24.010] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:02:24.018] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:02:24.026] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:02:24.033] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:02:24.042] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:02:24.210] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:02:24.277] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:02:24.291] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: 48456DB634ACAA93AA8C74E2E28B6E7F for user: deepak@gmail.com
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:02:24.308] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: 48456DB634ACAA93AA8C74E2E28B6E7F
[2025-12-26 11:02:24.315] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 11:02:24.334] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 293 ms
[2025-12-26 11:02:24.341] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 11:02:24 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:02:36 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:02:36.153] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:02:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:02:36.178] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 11:02:36.185] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : 48456DB634ACAA93AA8C74E2E28B6E7F, userId : 1
[2025-12-26 11:02:36.196] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [48456DB634ACAA93AA8C74E2E28B6E7F]
2025-12-26 11:02:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 11:02:36.210] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 6 ms
[2025-12-26 11:02:36.218] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 11:02:36.225] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: 48456DB634ACAA93AA8C74E2E28B6E7F
2025-12-26 11:02:41 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:02:41.210] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:02:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:02:41.221] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 11:02:41.228] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : 48456DB634ACAA93AA8C74E2E28B6E7F, userId : 1
[2025-12-26 11:02:41.236] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [48456DB634ACAA93AA8C74E2E28B6E7F]
2025-12-26 11:02:41 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 11:02:41.246] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 2 ms
[2025-12-26 11:02:41.254] [http-nio-8080-exec-4] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 11:02:41.261] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: 48456DB634ACAA93AA8C74E2E28B6E7F
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:02:49.549] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:02:49.556] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:02:49.563] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:02:49.570] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:02:49.579] [http-nio-8080-exec-5] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:02:49.659] [http-nio-8080-exec-5] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:02:49.670] [http-nio-8080-exec-5] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2025-12-26 11:02:49.678] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 99 ms
[2025-12-26 11:02:49.685] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2025-12-26 11:02:49 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/force-login
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/force-login
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/force-login", parameters={}
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#forceLogin(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:02:55.237] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:02:55.244] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/force-login
[2025-12-26 11:02:55.252] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:02:55.260] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:02:55.278] [http-nio-8080-exec-6] [INFO] [TokenBlackListService] - Token blacklisted : 502ca5fe-4...
[2025-12-26 11:02:55.288] [http-nio-8080-exec-6] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
[2025-12-26 11:02:55.298] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - All sessions invalidated for user : deepak@gmail.com
[2025-12-26 11:02:55.306] [http-nio-8080-exec-6] [INFO] [AuthService] - Force logout completed for user: deepak@gmail.com
[2025-12-26 11:02:55.315] [http-nio-8080-exec-6] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:02:55.387] [http-nio-8080-exec-6] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:02:55.403] [http-nio-8080-exec-6] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:02:55.414] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - Creating session: 48456DB634ACAA93AA8C74E2E28B6E7F for user: deepak@gmail.com
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:02:55.425] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - Reusing existing session row for id : 48456DB634ACAA93AA8C74E2E28B6E7F
[2025-12-26 11:02:55.434] [http-nio-8080-exec-6] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
[2025-12-26 11:02:55.446] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 177 ms
[2025-12-26 11:02:55.455] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Force login successful. Previous sessions terminated., data=AuthRe (truncated)...]
2025-12-26 11:02:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:02:58.405] [http-nio-8080-exec-7] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [48456DB634ACAA93AA8C74E2E28B6E7F]
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:02:58.414] [http-nio-8080-exec-7] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 2 ms
[2025-12-26 11:02:58.424] [http-nio-8080-exec-7] [INFO] [SessionManagementService] - Result : true
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:02:58.435] [http-nio-8080-exec-7] [INFO] [SessionManagementService] - Session invalidated : 48456DB634ACAA93AA8C74E2E28B6E7F
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 48456DB634ACAA93AA8C74E2E28B6E7F
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48456DB634ACAA93AA8C74E2E28B6E7F], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4df9a7df]
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:02:58.460] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:02:58.468] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:02:58.477] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:02:58.484] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:02:58.510] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 18 ms
[2025-12-26 11:02:58.520] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:02:58 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:03:02 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 11:03:02.338] [http-nio-8080-exec-8] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:03:02 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48456DB634ACAA93AA8C74E2E28B6E7F], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 11:03:02 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/refresh-token
2025-12-26 11:03:02 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/refresh-token", parameters={}
2025-12-26 11:03:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#refreshToken(HttpServletRequest, HttpServletResponse)
[2025-12-26 11:03:02.348] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:03:02.356] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/refresh-token
[2025-12-26 11:03:02.366] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:03:02.373] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:03:02.382] [http-nio-8080-exec-8] [ERROR] [HttpLoggingAspect] - Request failed after 2 ms : Refresh token not found.
com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.
	at com.cloudkeeper.cloudbalance_backend.service.AuthService.refreshToken(AuthService.java:141)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.refreshToken(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.refreshToken(AuthController.java:56)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.refreshToken(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 11:03:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleInvalidCredentials(Exception)
[2025-12-26 11:03:02.400] [http-nio-8080-exec-8] [ERROR] [GlobalExceptionHandler] - Authentication failed: Refresh token not found.
2025-12-26 11:03:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:03:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=Invalid email or password)]
2025-12-26 11:03:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.]
2025-12-26 11:03:02 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-12-26 11:09:16 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 11:09:16 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 11:09:16 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:09:16 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 11:09:16 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:09:18 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 99167 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:09:18 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 6 JPA repository interfaces.
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:09:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 11:09:19 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:09:19 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:09:19 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:09:19 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 964 ms
2025-12-26 11:09:19 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:09:19 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:09:19 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:09:19 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:09:20 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@299c86f0
2025-12-26 11:09:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:09:20 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:09:20 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:09:20 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:09:20 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:09:20 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:09:20 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:09:21 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:09:21 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:09:21 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 11:09:21 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 11:09:21 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 11:09:21 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 11:09:21 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 11:09:21 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 11:09:22 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 11:09:22 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.724 seconds (process running for 4.048)
[2025-12-26 11:09:22.016] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 11:09:22.024] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 11:09:22.031] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 11:09:22 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:09:22.049] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 11:09:22.228] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 11:09:22.229] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 11:09:22 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 11:09:22 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 11:09:22 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 11:09:22 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 11:09:22 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 11:09:26 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 11:09:26 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7def94bb
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@614ff138
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 11:09:26 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 21E9587FC96491A62A475C3C67842B5C
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:09:26.675] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:09:26.682] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:09:26.690] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:09:26.697] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:09:26.705] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:09:26.871] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:09:26.942] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:09:26.958] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating session: 169C6FCA052E327AC23F787FA2437954 for user: deepak@gmail.com
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 11:09:26 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:09:26.976] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - ✅ Session created successfully: 169C6FCA052E327AC23F787FA2437954
[2025-12-26 11:09:26.984] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:09:26.993] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:09:27.001] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 6b4f54b0-07ec-4144-8b35-97ab1966a1c6
[2025-12-26 11:09:27.010] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:09:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 11:09:27.028] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 324 ms
[2025-12-26 11:09:27.036] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:09:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:09:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 11:09:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:09:31.606] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [169C6FCA052E327AC23F787FA2437954]
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:09:31.617] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 3 ms
[2025-12-26 11:09:31.624] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:09:31.634] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : 169C6FCA052E327AC23F787FA2437954
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 169C6FCA052E327AC23F787FA2437954
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=169C6FCA052E327AC23F787FA2437954], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6dc4bbf1]
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/refresh-token
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/refresh-token", parameters={}
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#refreshToken(HttpServletRequest, HttpServletResponse)
[2025-12-26 11:09:31.651] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:09:31.659] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/refresh-token
[2025-12-26 11:09:31.667] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:09:31.676] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:09:31.684] [http-nio-8080-exec-3] [ERROR] [HttpLoggingAspect] - Request failed after 1 ms : Refresh token not found.
com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.
	at com.cloudkeeper.cloudbalance_backend.service.AuthService.refreshToken(AuthService.java:145)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.refreshToken(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.refreshToken(AuthController.java:56)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.refreshToken(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleInvalidCredentials(Exception)
[2025-12-26 11:09:31.701] [http-nio-8080-exec-3] [ERROR] [GlobalExceptionHandler] - Authentication failed: Refresh token not found.
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=Invalid email or password)]
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.cloudkeeper.cloudbalance_backend.exception.InvalidCredentialsException: Refresh token not found.]
2025-12-26 11:09:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 401 UNAUTHORIZED
2025-12-26 11:10:23 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 11:10:23 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 11:10:23 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:10:23 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 11:10:23 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:10:24 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 99655 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:10:24 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 58 ms. Found 6 JPA repository interfaces.
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:10:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 11:10:25 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:10:25 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:10:25 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:10:25 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 977 ms
2025-12-26 11:10:26 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:10:26 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:10:26 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:10:26 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:10:26 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36e11b60
2025-12-26 11:10:26 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:10:26 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:10:26 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:10:27 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:10:27 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:10:27 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:10:27 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:10:27 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:10:27 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:10:27 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 11:10:28 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 11:10:28 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 11:10:28 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 11:10:28 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 11:10:28 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 11:10:28 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 11:10:28 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.716 seconds (process running for 4.051)
[2025-12-26 11:10:28.480] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 11:10:28.488] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 11:10:28.497] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 11:10:28 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:10:28.512] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 11:10:28.727] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 11:10:28.728] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 11:10:28 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 11:10:28 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 11:10:28 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 11:10:28 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 11:10:28 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 11:10:31 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 11:10:31 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@52214284
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@78cf80a2
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 11:10:31 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 8678D4C63AB3605AF2A68F86F4412F40
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:10:31.147] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:10:31.155] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:10:31.163] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:10:31.172] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:10:31.180] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:10:31.335] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:10:31.400] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:10:31.416] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: 1AE9561DBC7E93604A729709C3DC2E45 for user: deepak@gmail.com
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:10:31.435] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: 1AE9561DBC7E93604A729709C3DC2E45
[2025-12-26 11:10:31.443] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:10:31.451] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:10:31.460] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 99406693-bacf-4368-adb8-85bbbb9239f7
[2025-12-26 11:10:31.469] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 11:10:31.487] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 308 ms
[2025-12-26 11:10:31.494] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 11:10:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:10:34.779] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [1AE9561DBC7E93604A729709C3DC2E45]
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:10:34.790] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 4 ms
[2025-12-26 11:10:34.797] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:10:34.807] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : 1AE9561DBC7E93604A729709C3DC2E45
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 1AE9561DBC7E93604A729709C3DC2E45
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1AE9561DBC7E93604A729709C3DC2E45], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@39f52dd0]
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/refresh-token
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/refresh-token", parameters={}
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#refreshToken(HttpServletRequest, HttpServletResponse)
[2025-12-26 11:10:34.820] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:10:34.827] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/refresh-token
[2025-12-26 11:10:34.835] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:10:34.842] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id,
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        refresh_tokens rt1_0 
    join
        users u1_0 
            on u1_0.id=rt1_0.user_id 
    where
        rt1_0.token=?
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2025-12-26 11:10:34.856] [http-nio-8080-exec-3] [INFO] [AuthService] - Token refreshed for user: deepak@gmail.com
[2025-12-26 11:10:34.864] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 14 ms
[2025-12-26 11:10:34.871] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Token refreshed successfully, data=AuthResponse(accessToken=eyJhbG (truncated)...]
2025-12-26 11:10:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:10:43.334] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1AE9561DBC7E93604A729709C3DC2E45], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:10:43.353] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:10:43.364] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:10:43.375] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:10:43.382] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:10:43.404] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 15 ms
[2025-12-26 11:10:43.412] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:10:43 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:10:48.730] [http-nio-8080-exec-5] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1AE9561DBC7E93604A729709C3DC2E45], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:10:48.740] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:10:48.747] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:10:48.756] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:10:48.763] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:10:48.777] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 6 ms
[2025-12-26 11:10:48.794] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:10:48 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:11:22 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 11:11:22 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 11:11:22 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:11:22 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 11:11:22 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:11:24 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 100124 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:11:24 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:11:24 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:11:24 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:11:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 59 ms. Found 6 JPA repository interfaces.
2025-12-26 11:11:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:11:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:11:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:11:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:11:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:11:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:11:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:11:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:11:25 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-12-26 11:11:25 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:11:25 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:11:25 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:11:25 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 953 ms
2025-12-26 11:11:25 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:11:25 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:11:25 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:11:25 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:11:26 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36e11b60
2025-12-26 11:11:26 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:11:26 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:11:26 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:11:26 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:11:26 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:11:26 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:11:26 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:11:27 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:11:27 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:11:27 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 11:11:27 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 11:11:27 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 11:11:27 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 11:11:27 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 11:11:27 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 11:11:27 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 11:11:27 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.713 seconds (process running for 4.02)
[2025-12-26 11:11:27.965] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 11:11:27.973] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 11:11:27.980] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 11:11:27 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:11:27.997] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 11:11:28.188] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 11:11:28.189] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 11:11:28 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 11:11:28 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 11:11:28 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 11:11:28 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 11:11:28 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 11:11:30 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 11:11:30 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@614ff138
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@26159658
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 11:11:30 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 7D2416AABFF5196CC47A816081D13947
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:11:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:11:30.913] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:11:30.921] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:11:30.929] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:11:30.937] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:11:30.945] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:11:31.096] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:11:31.159] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:11:31.174] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: 734C4B59196D714EC4C61EC419C2622D for user: deepak@gmail.com
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:11:31.192] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: 734C4B59196D714EC4C61EC419C2622D
[2025-12-26 11:11:31.200] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:11:31.208] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:11:31.217] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 9915ef0a-6292-41cb-bebe-2a5d0d26e4ce
[2025-12-26 11:11:31.225] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 11:11:31.239] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 295 ms
[2025-12-26 11:11:31.250] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 11:11:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:11:38 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 11:11:38.237] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:11:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:11:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:11:38.267] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 11:11:38.274] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : 734C4B59196D714EC4C61EC419C2622D, userId : 1
[2025-12-26 11:11:38.287] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [734C4B59196D714EC4C61EC419C2622D]
2025-12-26 11:11:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 11:11:38.301] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 6 ms
[2025-12-26 11:11:38.308] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 11:11:38.316] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: 734C4B59196D714EC4C61EC419C2622D
2025-12-26 11:11:47 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:11:47.443] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:11:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:11:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:11:47.456] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 11:11:47.474] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : 734C4B59196D714EC4C61EC419C2622D, userId : 1
[2025-12-26 11:11:47.482] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [734C4B59196D714EC4C61EC419C2622D]
2025-12-26 11:11:47 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 11:11:47.493] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 3 ms
[2025-12-26 11:11:47.503] [http-nio-8080-exec-4] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 11:11:47.510] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: 734C4B59196D714EC4C61EC419C2622D
2025-12-26 11:12:00 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 11:12:00 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 11:12:00 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:12:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 11:12:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:12:02 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 100564 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:12:02 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 62 ms. Found 6 JPA repository interfaces.
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:12:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 11:12:02 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:12:02 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:12:02 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:12:02 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 934 ms
2025-12-26 11:12:03 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:12:03 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:12:03 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:12:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:12:03 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@501956f9
2025-12-26 11:12:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:12:03 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:12:03 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:12:04 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:12:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:12:04 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:12:04 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:12:04 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:12:04 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:12:04 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 11:12:05 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 11:12:05 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 11:12:05 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 11:12:05 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 11:12:05 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 11:12:05 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 11:12:05 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.719 seconds (process running for 4.063)
[2025-12-26 11:12:05.506] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 11:12:05.514] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 11:12:05.522] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 11:12:05 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:12:05.549] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 11:12:05.719] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 11:12:05.720] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 11:12:05 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 11:12:05 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 11:12:05 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 11:12:05 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 11:12:05 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 11:12:08 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 11:12:08 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4178d53c
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@48d2a802
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 11:12:08 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 734C4B59196D714EC4C61EC419C2622D
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:12:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:12:08.926] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:12:08.933] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:12:08.942] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:12:08.951] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:12:08.959] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:12:09.109] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:12:09.181] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:12:09.198] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating session: 7FFAC1B9FA042F1F19069B345C865E0B for user: deepak@gmail.com
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:12:09.219] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - ✅ Session created successfully: 7FFAC1B9FA042F1F19069B345C865E0B
[2025-12-26 11:12:09.227] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:12:09.235] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:12:09.243] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: c9136d6e-b685-4f63-be4c-7da1d3420ee7
[2025-12-26 11:12:09.251] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 11:12:09.267] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 309 ms
[2025-12-26 11:12:09.274] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 11:12:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:12:16 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2025-12-26 11:12:16.656] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:12:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:12:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:12:16.685] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 11:12:16.692] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : 7FFAC1B9FA042F1F19069B345C865E0B, userId : 1
[2025-12-26 11:12:16.705] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [7FFAC1B9FA042F1F19069B345C865E0B]
2025-12-26 11:12:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 11:12:16.718] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 6 ms
[2025-12-26 11:12:16.726] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 11:12:16.735] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: 7FFAC1B9FA042F1F19069B345C865E0B
2025-12-26 11:15:01 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 11:15:01 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 11:15:01 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:15:02 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 11:15:02 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:15:05 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 101152 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:15:05 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 59 ms. Found 6 JPA repository interfaces.
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:15:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 11:15:06 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:15:06 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:15:06 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:15:06 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 933 ms
2025-12-26 11:15:06 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:15:06 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:15:06 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:15:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:15:06 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36e11b60
2025-12-26 11:15:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:15:06 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:15:06 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:15:07 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:15:07 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:15:07 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:15:07 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:15:08 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:15:08 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:15:08 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 11:15:08 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 11:15:08 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 11:15:08 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 11:15:08 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 11:15:08 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 11:15:08 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 11:15:08 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.653 seconds (process running for 4.001)
[2025-12-26 11:15:08.841] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 11:15:08.856] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 11:15:08.868] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 11:15:08 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:15:08.884] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 11:15:09.068] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 11:15:09.068] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 11:15:09 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 11:15:09 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 11:15:09 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 11:15:09 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 11:15:09 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 11:15:13 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 11:15:13 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3c00c7ab
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2732975
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 11:15:13 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 7FFAC1B9FA042F1F19069B345C865E0B
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:15:13.392] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:15:13.400] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:15:13.411] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:15:13.419] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:15:13.428] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:15:13.579] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:15:13.644] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:15:13.658] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating session: C1C3E090A6EB6F3E268A183BF87E5121 for user: deepak@gmail.com
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:15:13.675] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - ✅ Session created successfully: C1C3E090A6EB6F3E268A183BF87E5121
[2025-12-26 11:15:13.684] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:15:13.694] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:15:13.702] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 9894579f-fae6-478e-adac-2d2ee965299c
[2025-12-26 11:15:13.711] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 11:15:13.725] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 298 ms
[2025-12-26 11:15:13.732] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 11:15:13 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:15:22 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:15:22.262] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:15:22 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:15:22 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:15:22.286] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 11:15:22.297] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : C1C3E090A6EB6F3E268A183BF87E5121, userId : 1
[2025-12-26 11:15:22.310] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [C1C3E090A6EB6F3E268A183BF87E5121]
2025-12-26 11:15:22 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 11:15:22.324] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 6 ms
[2025-12-26 11:15:22.332] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 11:15:22.341] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: C1C3E090A6EB6F3E268A183BF87E5121
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/force-login
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/force-login
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/force-login", parameters={}
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#forceLogin(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:15:31.385] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:15:31.397] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/force-login
[2025-12-26 11:15:31.404] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:15:31.411] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:15:31.426] [http-nio-8080-exec-4] [INFO] [TokenBlackListService] - Token blacklisted : 9894579f-f...
[2025-12-26 11:15:31.435] [http-nio-8080-exec-4] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
[2025-12-26 11:15:31.444] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - All sessions invalidated for user : deepak@gmail.com
[2025-12-26 11:15:31.452] [http-nio-8080-exec-4] [INFO] [AuthService] - Force logout completed for user: deepak@gmail.com
[2025-12-26 11:15:31.460] [http-nio-8080-exec-4] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:15:31.527] [http-nio-8080-exec-4] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:15:31.540] [http-nio-8080-exec-4] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:15:31.551] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Creating session: C1C3E090A6EB6F3E268A183BF87E5121 for user: deepak@gmail.com
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:15:31.560] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Reusing existing session row for id : C1C3E090A6EB6F3E268A183BF87E5121
[2025-12-26 11:15:31.568] [http-nio-8080-exec-4] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:15:31.575] [http-nio-8080-exec-4] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:15:31.582] [http-nio-8080-exec-4] [INFO] [AuthService] - Refresh Token: 5ea45b0e-27d7-40ec-92aa-b635664b5102
[2025-12-26 11:15:31.591] [http-nio-8080-exec-4] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
[2025-12-26 11:15:31.603] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 184 ms
[2025-12-26 11:15:31.611] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Force login successful. Previous sessions terminated., data=AuthRe (truncated)...]
2025-12-26 11:15:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:15:35 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-12-26 11:15:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:15:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:15:35.980] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [C1C3E090A6EB6F3E268A183BF87E5121]
2025-12-26 11:15:35 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:15:35.994] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 1 ms
[2025-12-26 11:15:36.006] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Result : true
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:15:36.021] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Session invalidated : C1C3E090A6EB6F3E268A183BF87E5121
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from C1C3E090A6EB6F3E268A183BF87E5121
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C1C3E090A6EB6F3E268A183BF87E5121], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5c0fc55c]
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:15:36.045] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:15:36.053] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:15:36.066] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:15:36.078] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:15:36.110] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 24 ms
[2025-12-26 11:15:36.118] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:15:36 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:17:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:17:25.947] [http-nio-8080-exec-8] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:17:25 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C1C3E090A6EB6F3E268A183BF87E5121], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 11:17:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:17:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:17:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:17:25 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:17:25 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:17:25.956] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:17:25.964] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:17:25.972] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:17:25.981] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:17:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:17:25 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:17:25.993] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 4 ms
[2025-12-26 11:17:26.001] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:17:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:17:26 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:17:26 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:17:36 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 11:17:36 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 11:17:37 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:17:37 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 11:17:37 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:18:02 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 101759 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:18:02 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 6 JPA repository interfaces.
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:18:03 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2025-12-26 11:18:03 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:18:03 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:18:03 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:18:03 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 925 ms
2025-12-26 11:18:03 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:18:03 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:18:03 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:18:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:18:04 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@299c86f0
2025-12-26 11:18:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:18:04 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:18:04 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:18:04 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:18:04 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:18:04 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:18:04 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:18:05 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:18:05 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:18:05 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 11:18:05 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 11:18:05 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 11:18:05 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 11:18:05 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 11:18:05 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 11:18:06 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 11:18:06 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.686 seconds (process running for 3.873)
[2025-12-26 11:18:06.008] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 11:18:06.016] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 11:18:06.024] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 11:18:06 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:18:06.042] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 11:18:06.215] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 11:18:06.216] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 11:18:06 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 11:18:06 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 11:18:06 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 11:18:06 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 11:18:06 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 11:18:26 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 11:18:26 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@375121ce
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@26ceca00
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 11:18:26 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 8EAE06D531D090B4CF8142E4B24D457A
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:18:26.276] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:18:26.283] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:18:26.290] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:18:26.298] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:18:26.306] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:18:26.449] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:18:26.513] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:18:26.528] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: C4E71ABBDDE0F42F4861C0B7294A95FE for user: deepak@gmail.com
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:18:26.545] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: C4E71ABBDDE0F42F4861C0B7294A95FE
[2025-12-26 11:18:26.555] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:18:26.566] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:18:26.574] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 724b0ef6-763c-4e04-a6f3-b12e69b69f91
[2025-12-26 11:18:26.582] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 11:18:26.603] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 298 ms
[2025-12-26 11:18:26.611] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 11:18:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:18:43 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:18:43.900] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:18:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:18:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:18:43.926] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 11:18:43.934] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : C4E71ABBDDE0F42F4861C0B7294A95FE, userId : 1
[2025-12-26 11:18:43.945] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [C4E71ABBDDE0F42F4861C0B7294A95FE]
2025-12-26 11:18:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 11:18:43.958] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 6 ms
[2025-12-26 11:18:43.966] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 11:18:43.973] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: C4E71ABBDDE0F42F4861C0B7294A95FE
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/force-login
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/force-login
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/force-login", parameters={}
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#forceLogin(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:18:58.004] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:18:58.014] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/force-login
[2025-12-26 11:18:58.023] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:18:58.035] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:18:58.063] [http-nio-8080-exec-4] [INFO] [TokenBlackListService] - Token blacklisted : 724b0ef6-7...
[2025-12-26 11:18:58.072] [http-nio-8080-exec-4] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
[2025-12-26 11:18:58.083] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - All sessions invalidated for user : deepak@gmail.com
[2025-12-26 11:18:58.090] [http-nio-8080-exec-4] [INFO] [AuthService] - Force logout completed for user: deepak@gmail.com
[2025-12-26 11:18:58.099] [http-nio-8080-exec-4] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:18:58.169] [http-nio-8080-exec-4] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:18:58.182] [http-nio-8080-exec-4] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:18:58.191] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Creating session: C4E71ABBDDE0F42F4861C0B7294A95FE for user: deepak@gmail.com
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:18:58.203] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Reusing existing session row for id : C4E71ABBDDE0F42F4861C0B7294A95FE
[2025-12-26 11:18:58.212] [http-nio-8080-exec-4] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:18:58.222] [http-nio-8080-exec-4] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:18:58.230] [http-nio-8080-exec-4] [INFO] [AuthService] - Refresh Token: 5ff30305-97d2-4ce7-9e45-051f939a9cbb
[2025-12-26 11:18:58.242] [http-nio-8080-exec-4] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
[2025-12-26 11:18:58.255] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 209 ms
[2025-12-26 11:18:58.262] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Force login successful. Previous sessions terminated., data=AuthRe (truncated)...]
2025-12-26 11:18:58 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:19:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:19:04.404] [http-nio-8080-exec-5] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:19:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:19:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:19:04.455] [http-nio-8080-exec-5] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 11:19:04.467] [http-nio-8080-exec-5] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : C4E71ABBDDE0F42F4861C0B7294A95FE, userId : 1
[2025-12-26 11:19:04.479] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [C4E71ABBDDE0F42F4861C0B7294A95FE]
2025-12-26 11:19:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 11:19:04.495] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 4 ms
[2025-12-26 11:19:04.503] [http-nio-8080-exec-5] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 11:19:04.513] [http-nio-8080-exec-5] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: C4E71ABBDDE0F42F4861C0B7294A95FE
2025-12-26 11:19:14 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 11:19:14 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 11:19:14 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:19:14 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 11:19:14 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:19:19 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 102264 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:19:19 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 59 ms. Found 6 JPA repository interfaces.
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:19:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 11:19:20 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:19:20 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:19:20 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:19:20 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1045 ms
2025-12-26 11:19:21 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:19:21 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:19:21 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:19:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:19:21 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1ae26c59
2025-12-26 11:19:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:19:21 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:19:21 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:19:22 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:19:22 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:19:22 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:19:22 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:19:22 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:19:22 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:19:23 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 11:19:23 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 11:19:23 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 11:19:23 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 11:19:23 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 11:19:23 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 11:19:23 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 11:19:23 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.028 seconds (process running for 4.216)
[2025-12-26 11:19:23.605] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 11:19:23.618] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 11:19:23.628] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 11:19:23 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:19:23.652] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 11:19:23.876] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 11:19:23.876] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 11:19:23 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 11:19:23 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 11:19:24 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 11:19:24 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 11:19:24 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 11:19:29 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 11:19:29 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7f9f873
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@e774bb3
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 11:19:29 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id C4E71ABBDDE0F42F4861C0B7294A95FE
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:19:29.405] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:19:29.414] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:19:29.423] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:19:29.430] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:19:29.439] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:19:29.588] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:19:29.655] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:19:29.673] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: 96AE8C145CFC4A0543550933D6E1365B for user: deepak@gmail.com
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:19:29.689] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: 96AE8C145CFC4A0543550933D6E1365B
[2025-12-26 11:19:29.698] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:19:29.705] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:19:29.714] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: dc476521-813e-4c6b-bf89-6922a56e8c59
[2025-12-26 11:19:29.723] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 11:19:29.738] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 300 ms
[2025-12-26 11:19:29.746] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 11:19:29 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:19:33.504] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [96AE8C145CFC4A0543550933D6E1365B]
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:19:33.518] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 5 ms
[2025-12-26 11:19:33.533] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:19:33.547] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : 96AE8C145CFC4A0543550933D6E1365B
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 96AE8C145CFC4A0543550933D6E1365B
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=96AE8C145CFC4A0543550933D6E1365B], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@9bf3950]
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:19:33.572] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:19:33.581] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:19:33.589] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:19:33.596] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:19:33.619] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 15 ms
[2025-12-26 11:19:33.627] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:19:33 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:19:49.053] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=96AE8C145CFC4A0543550933D6E1365B], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:19:49.063] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:19:49.073] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:19:49.081] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:19:49.090] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:19:49.103] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 6 ms
[2025-12-26 11:19:49.112] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:19:49 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:20:37.608] [http-nio-8080-exec-5] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=96AE8C145CFC4A0543550933D6E1365B], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:20:37.626] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:20:37.640] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:20:37.649] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:20:37.657] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:20:37.669] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 4 ms
[2025-12-26 11:20:37.677] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:20:37 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:20:41.750] [http-nio-8080-exec-6] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=96AE8C145CFC4A0543550933D6E1365B], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:20:41.763] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:20:41.774] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:20:41.785] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:20:41.792] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:20:41.804] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 4 ms
[2025-12-26 11:20:41.810] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:20:41 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:20:56 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 11:20:56 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 11:20:56 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:20:56 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 11:20:56 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:21:09 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 102795 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:21:09 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 6 JPA repository interfaces.
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:21:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2025-12-26 11:21:10 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:21:10 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:21:10 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:21:10 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 985 ms
2025-12-26 11:21:10 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:21:10 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:21:11 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:21:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:21:11 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@501956f9
2025-12-26 11:21:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:21:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:21:11 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:21:11 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:21:11 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:21:11 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:21:11 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:21:12 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:21:12 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:21:12 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 11:21:12 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 11:21:12 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 11:21:12 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 11:21:12 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 11:21:12 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 11:21:13 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 11:21:13 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.732 seconds (process running for 3.919)
[2025-12-26 11:21:13.212] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 11:21:13.223] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 11:21:13.231] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 11:21:13 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:21:13.247] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 11:21:13.444] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 11:21:13.444] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 11:21:13 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 11:21:13 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 11:21:13 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 11:21:13 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 11:21:13 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 11:21:15 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 11:21:15 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@61e2a860
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@95d5d31
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 11:21:15 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id 48A493793DFF7B729F1BCBBB83FEF800
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:21:15.858] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:21:15.867] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:21:15.876] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:21:15.888] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:21:15.901] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:21:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:21:16.054] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:21:16.120] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:21:16.135] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: D59ED45502A7E7B33A2146924BF786CE for user: deepak@gmail.com
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:21:16.151] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: D59ED45502A7E7B33A2146924BF786CE
[2025-12-26 11:21:16.159] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:21:16.167] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:21:16.175] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 9369a65a-7627-4924-8f5c-2a52a6665c4a
[2025-12-26 11:21:16.184] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 11:21:16.201] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 301 ms
[2025-12-26 11:21:16.209] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 11:21:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:21:23 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 11:21:23.555] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 11:21:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:21:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:21:23.581] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 11:21:23.588] [http-nio-8080-exec-3] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : D59ED45502A7E7B33A2146924BF786CE, userId : 1
[2025-12-26 11:21:23.599] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [D59ED45502A7E7B33A2146924BF786CE]
2025-12-26 11:21:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 11:21:23.612] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 5 ms
[2025-12-26 11:21:23.619] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - Auto-refresh failed : Could not initialize proxy [com.cloudkeeper.cloudbalance_backend.entity.User#1] - no session
[2025-12-26 11:21:23.628] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: D59ED45502A7E7B33A2146924BF786CE
2025-12-26 11:21:35 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 11:21:35 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 11:21:35 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:21:35 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 11:21:35 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:25:33 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 103729 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:25:33 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 6 JPA repository interfaces.
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:25:33 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-12-26 11:25:34 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:25:34 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:25:34 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:25:34 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 910 ms
2025-12-26 11:25:34 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:25:34 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:25:34 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:25:34 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:25:34 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7e8f97dd
2025-12-26 11:25:34 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:25:34 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:25:34 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:25:35 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:25:35 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:25:35 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:25:35 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:25:36 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:25:36 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:25:36 [main] WARN  o.s.b.w.s.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'awsAccountController' defined in file [/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main/com/cloudkeeper/cloudbalance_backend/controller/AwsAccountController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'awsAccountService' defined in file [/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main/com/cloudkeeper/cloudbalance_backend/service/AwsAccountService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.security.crypto.encrypt.TextEncryptor' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-12-26 11:25:36 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:25:36 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:25:36 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 11:25:36 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-26 11:25:36 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-26 11:25:36 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-26 11:25:36 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in com.cloudkeeper.cloudbalance_backend.service.AwsAccountService required a bean of type 'org.springframework.security.crypto.encrypt.TextEncryptor' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.crypto.encrypt.TextEncryptor' in your configuration.

2025-12-26 11:26:16 [main] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 104117 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2025-12-26 11:26:16 [main] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 59 ms. Found 6 JPA repository interfaces.
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-12-26 11:26:16 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2025-12-26 11:26:17 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-26 11:26:17 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-26 11:26:17 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-26 11:26:17 [main] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 956 ms
2025-12-26 11:26:17 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26 11:26:17 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-26 11:26:17 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26 11:26:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-26 11:26:17 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36e11b60
2025-12-26 11:26:17 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-26 11:26:17 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26 11:26:17 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26 11:26:18 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2025-12-26 11:26:18 [main] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2025-12-26 11:26:18 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 11:26:18 [main] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-26 11:26:18 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-26 11:26:18 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-12-26 11:26:19 [main] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26 11:26:19 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-26 11:26:19 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-12-26 11:26:19 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-26 11:26:19 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-26 11:26:19 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-26 11:26:19 [main] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-26 11:26:19 [main] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.675 seconds (process running for 3.863)
[2025-12-26 11:26:19.582] [main] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2025-12-26 11:26:19.590] [main] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2025-12-26 11:26:19.598] [main] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2025-12-26 11:26:19 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:26:19.615] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2025-12-26 11:26:19.781] [main] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2025-12-26 11:26:19.781] [main] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2025-12-26 11:26:19 [main] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2025-12-26 11:26:19 [main] INFO  c.c.c.config.DataInitializer - Initializing default users...
2025-12-26 11:26:19 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-26 11:26:19 [main] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2025-12-26 11:26:19 [main] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2025-12-26 11:26:25 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26 11:26:25 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7a397f0f
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3c00c7ab
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-26 11:26:25 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.s.w.s.SessionManagementFilter - Request requested invalid session id D59ED45502A7E7B33A2146924BF786CE
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 11:26:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 11:26:26.020] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:26:26.028] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 11:26:26.036] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:26:26.044] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 11:26:26.052] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 11:26:26.198] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 11:26:26.264] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:26:26.279] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: 9136DA591DAFB91501B1EB5AF5546934 for user: deepak@gmail.com
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2025-12-26 11:26:26.296] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: 9136DA591DAFB91501B1EB5AF5546934
[2025-12-26 11:26:26.305] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2025-12-26 11:26:26.314] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2025-12-26 11:26:26.322] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 5c935108-8380-46b9-ae7e-78cb8954f4b5
[2025-12-26 11:26:26.331] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2025-12-26 11:26:26.346] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 295 ms
[2025-12-26 11:26:26.356] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2025-12-26 11:26:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:26:44.885] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [9136DA591DAFB91501B1EB5AF5546934]
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:26:44.897] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 4 ms
[2025-12-26 11:26:44.904] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2025-12-26 11:26:44.915] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : 9136DA591DAFB91501B1EB5AF5546934
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 9136DA591DAFB91501B1EB5AF5546934
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9136DA591DAFB91501B1EB5AF5546934], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@175a70ef]
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:26:44 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:26:44.938] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:26:44.947] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:26:44.954] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:26:44.962] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:26:45 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:26:45 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:26:45.012] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 33 ms
[2025-12-26 11:26:45.022] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:26:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:26:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:26:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9136DA591DAFB91501B1EB5AF5546934], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:26:59.755] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:26:59.766] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:26:59.775] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:26:59.794] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:26:59.809] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 5 ms
[2025-12-26 11:26:59.817] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:26:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9136DA591DAFB91501B1EB5AF5546934], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:29:21.549] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:29:21.559] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:29:21.572] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:29:21.584] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:29:21.600] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 5 ms
[2025-12-26 11:29:21.608] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:29:21 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9136DA591DAFB91501B1EB5AF5546934], Granted Authorities=[ROLE_ADMIN]]]
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users", parameters={}
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2025-12-26 11:35:26.498] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 11:35:26.514] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2025-12-26 11:35:26.525] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 11:35:26.533] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    order by
        u1_0.created_at desc 
    offset
        ? rows 
    fetch
        first ? rows only
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 11:35:26.545] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Response Time : 4 ms
[2025-12-26 11:35:26.552] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2025-12-26 11:35:26 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 11:56:19 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2025-12-26 11:56:19.587] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
2025-12-26 12:01:20 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
[2025-12-26 12:01:20.015] [http-nio-8080-exec-2] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2025-12-26 12:01:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 12:01:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2025-12-26 12:01:20.030] [http-nio-8080-exec-2] [WARN] [JwtAuthenticationFilter] - No HTTP session found - creating new session
[2025-12-26 12:01:20.044] [http-nio-8080-exec-2] [INFO] [JwtAuthenticationFilter] - Created new HTTP session: 35DF416251F0894CE1E81E165067AF55
[2025-12-26 12:01:20.070] [http-nio-8080-exec-2] [WARN] [JwtAuthenticationFilter] - Token expired or invalid - Attempting auto-refresh...
[2025-12-26 12:01:20.107] [http-nio-8080-exec-2] [INFO] [JwtAuthenticationFilter] - Starting auto-refresh for session : 35DF416251F0894CE1E81E165067AF55, userId : 1
[2025-12-26 12:01:20.146] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.findActiveSessionById() with args : [35DF416251F0894CE1E81E165067AF55]
2025-12-26 12:01:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=? 
        and us1_0.active=true
[2025-12-26 12:01:20.201] [http-nio-8080-exec-2] [WARN] [SessionManagementService] - Active session not found for ID : 35DF416251F0894CE1E81E165067AF55
[2025-12-26 12:01:20.228] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.findActiveSessionById() in 37 ms
[2025-12-26 12:01:20.260] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Result : Optional.empty
[2025-12-26 12:01:20.288] [http-nio-8080-exec-2] [WARN] [JwtAuthenticationFilter] - Session not found : 35DF416251F0894CE1E81E165067AF55
[2025-12-26 12:01:20.327] [http-nio-8080-exec-2] [WARN] [JwtAuthenticationFilter] - ❌ Auto-refresh failed for session: 35DF416251F0894CE1E81E165067AF55
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2025-12-26 12:01:32.241] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2025-12-26 12:01:32.249] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2025-12-26 12:01:32.258] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2025-12-26 12:01:32.273] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2025-12-26 12:01:32.289] [http-nio-8080-exec-4] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2025-12-26 12:01:32.448] [http-nio-8080-exec-4] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2025-12-26 12:01:32.462] [http-nio-8080-exec-4] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2025-12-26 12:01:32.476] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 188 ms
[2025-12-26 12:01:32.497] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2025-12-26 12:01:32 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-26 12:02:26 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-12-26 12:02:26 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2025-12-26 12:02:27 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2025-12-26 12:02:27 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-12-26 12:02:27 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-26 12:02:27 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
