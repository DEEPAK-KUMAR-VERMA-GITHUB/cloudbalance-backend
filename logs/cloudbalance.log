2026-01-02 16:13:25 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 400122 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-02 16:13:25 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-02 16:13:25 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-02 16:13:25 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 79 ms. Found 6 JPA repository interfaces.
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:13:26 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2026-01-02 16:13:27 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-02 16:13:27 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-02 16:13:27 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-02 16:13:27 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1305 ms
2026-01-02 16:13:27 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-02 16:13:27 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-02 16:13:27 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-02 16:13:27 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-02 16:13:27 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@62c69ce6
2026-01-02 16:13:27 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-02 16:13:27 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-02 16:13:28 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-02 16:13:28 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-02 16:13:28 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-02 16:13:28 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-02 16:13:28 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-02 16:13:29 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-02 16:13:29 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-02 16:13:29 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-02 16:13:29 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-02 16:13:30 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 24 mappings in 'requestMappingHandlerMapping'
2026-01-02 16:13:30 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-02 16:13:30 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-02 16:13:30 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-02 16:13:30 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-02 16:13:30 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.877 seconds (process running for 5.225)
[2026-01-02 16:13:30.480] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-02 16:13:30.489] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-02 16:13:30.496] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2026-01-02 16:13:30 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2026-01-02 16:13:30.521] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2026-01-02 16:13:30.782] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-02 16:13:30.783] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-02 16:13:30 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-02 16:13:30 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-02 16:13:30 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-02 16:13:30 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-02 16:13:30 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-02 16:14:47 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-02 16:14:47 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@60bc02d8
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@44aea704
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-02 16:14:47 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/force-login
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/force-login
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/force-login", parameters={}
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#forceLogin(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-02 16:14:47.883] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-02 16:14:47.890] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/force-login
[2026-01-02 16:14:47.896] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-02 16:14:47.901] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-02 16:14:47.939] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2026-01-02 16:14:47 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
[2026-01-02 16:14:47.949] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - All sessions invalidated for user : deepak@gmail.com
[2026-01-02 16:14:47.956] [http-nio-8080-exec-1] [INFO] [AuthService] - Force logout completed for user: deepak@gmail.com
[2026-01-02 16:14:47.963] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-02 16:14:48.100] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-02 16:14:48.165] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-02 16:14:48.179] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating session: 244A5CB7836517FE1C753244753F0C40 for user: deepak@gmail.com
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2026-01-02 16:14:48.192] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - ✅ Session created successfully: 244A5CB7836517FE1C753244753F0C40
[2026-01-02 16:14:48.201] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-02 16:14:48.210] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-02 16:14:48.216] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 8e16f225-3344-4160-859c-8540267a2fc9
[2026-01-02 16:14:48.223] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-02 16:14:48.233] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 326 ms
[2026-01-02 16:14:48.238] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Force login successful. Previous sessions terminated., data=AuthRe (truncated)...]
2026-01-02 16:14:48 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts/my-accounts
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-02 16:15:00.681] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [244A5CB7836517FE1C753244753F0C40]
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2026-01-02 16:15:00.691] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 3 ms
[2026-01-02 16:15:00.697] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2026-01-02 16:15:00.705] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : 244A5CB7836517FE1C753244753F0C40
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 244A5CB7836517FE1C753244753F0C40
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=244A5CB7836517FE1C753244753F0C40], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1d188035]
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts/my-accounts
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts/my-accounts", parameters={}
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getMyAccounts(Authentication)
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getMyAccounts(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleGlobalException(Exception)
[2026-01-02 16:15:00.724] [http-nio-8080-exec-3] [ERROR] [GlobalExceptionHandler] - Unexpected error: 
java.lang.NullPointerException: Cannot invoke "com.cloudkeeper.cloudbalance_backend.entity.UserRole.name()" because "role" is null
	at com.cloudkeeper.cloudbalance_backend.helper.RoleEvaluator.hasAnyRole(RoleEvaluator.java:27)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:114)
	at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:221)
	at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:453)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:114)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:267)
	at org.springframework.security.authorization.method.ExpressionUtils.evaluate(ExpressionUtils.java:45)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.authorize(PreAuthorizeAuthorizationManager.java:88)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.authorize(PreAuthorizeAuthorizationManager.java:42)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:252)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController$$SpringCGLIB$$0.getMyAccounts(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:892)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=An unexpected error occurred)]
2026-01-02 16:15:00 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.NullPointerException: Cannot invoke "com.cloudkeeper.cloudbalance_backend.entity.UserRole.name()" because "role" is null]
2026-01-02 16:15:00 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-02 16:17:53.742] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-02 16:17:53.748] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-02 16:17:53.755] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-02 16:17:53.762] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-02 16:17:53.771] [http-nio-8080-exec-5] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@58bbf9a], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@1b42bf3]
[2026-01-02 16:17:53.779] [http-nio-8080-exec-5] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-02 16:17:53.847] [http-nio-8080-exec-5] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-02 16:17:53.859] [http-nio-8080-exec-5] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2026-01-02 16:17:53.867] [http-nio-8080-exec-5] [INFO] [AuthController] - <<< Completed AuthController.login() in 88 ms
[2026-01-02 16:17:53.874] [http-nio-8080-exec-5] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=Deepak Kumar Verma, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true), error=null),[]>
[2026-01-02 16:17:53.880] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 109 ms
[2026-01-02 16:17:53.886] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-02 16:17:53 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=244A5CB7836517FE1C753244753F0C40], Granted Authorities=[ROLE_ADMIN]]]
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=244A5CB7836517FE1C753244753F0C40], Granted Authorities=[ROLE_ADMIN]]]
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-02 16:18:00.706] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-02 16:18:00.719] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-02 16:18:00.730] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-02 16:18:00.738] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        aa1_0.id,
        aa1_0.access_key_id,
        aa1_0.account_alias,
        aa1_0.account_id,
        aa1_0.active,
        aa1_0.created_at,
        aa1_0.monthly_budget,
        aa1_0.region,
        aa1_0.secret_access_key,
        aa1_0.update_at 
    from
        aws_accounts aa1_0
[2026-01-02 16:18:00.761] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 15 ms
[2026-01-02 16:18:00.772] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=null, data=[], error=null)]
2026-01-02 16:18:00 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-02 16:18:05 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts/my-accounts
2026-01-02 16:18:05 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=244A5CB7836517FE1C753244753F0C40], Granted Authorities=[ROLE_ADMIN]]]
2026-01-02 16:18:05 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts/my-accounts
2026-01-02 16:18:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts/my-accounts", parameters={}
2026-01-02 16:18:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getMyAccounts(Authentication)
2026-01-02 16:18:05 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getMyAccounts(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-02 16:18:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleGlobalException(Exception)
[2026-01-02 16:18:05.822] [http-nio-8080-exec-7] [ERROR] [GlobalExceptionHandler] - Unexpected error: 
java.lang.NullPointerException: Cannot invoke "com.cloudkeeper.cloudbalance_backend.entity.UserRole.name()" because "role" is null
	at com.cloudkeeper.cloudbalance_backend.helper.RoleEvaluator.hasAnyRole(RoleEvaluator.java:27)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:114)
	at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:159)
	at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:453)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:114)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:267)
	at org.springframework.security.authorization.method.ExpressionUtils.evaluate(ExpressionUtils.java:45)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.authorize(PreAuthorizeAuthorizationManager.java:88)
	at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.authorize(PreAuthorizeAuthorizationManager.java:42)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:252)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController$$SpringCGLIB$$0.getMyAccounts(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:892)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-02 16:18:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-02 16:18:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=An unexpected error occurred)]
2026-01-02 16:18:05 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.NullPointerException: Cannot invoke "com.cloudkeeper.cloudbalance_backend.entity.UserRole.name()" because "role" is null]
2026-01-02 16:18:05 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2026-01-02 16:28:32 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-02 16:28:32 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-02 16:28:33 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-02 16:28:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-02 16:28:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-02 16:28:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-02 16:37:12 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 403835 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-02 16:37:12 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-02 16:37:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-02 16:37:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68 ms. Found 6 JPA repository interfaces.
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:37:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2026-01-02 16:37:13 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-02 16:37:13 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-02 16:37:13 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-02 16:37:13 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 978 ms
2026-01-02 16:37:13 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-02 16:37:13 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-02 16:37:14 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-02 16:37:14 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-02 16:37:14 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3f3bed0
2026-01-02 16:37:14 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-02 16:37:14 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-02 16:37:14 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-02 16:37:14 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-02 16:37:14 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-02 16:37:14 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-02 16:37:15 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-02 16:37:15 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-02 16:37:15 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-02 16:37:15 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-02 16:37:15 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-02 16:37:15 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 24 mappings in 'requestMappingHandlerMapping'
2026-01-02 16:37:15 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-02 16:37:15 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-02 16:37:15 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-02 16:37:16 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-02 16:37:16 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.686 seconds (process running for 3.911)
[2026-01-02 16:37:16.206] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-02 16:37:16.214] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-02 16:37:16.220] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2026-01-02 16:37:16 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2026-01-02 16:37:16.240] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2026-01-02 16:37:16.461] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-02 16:37:16.461] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-02 16:37:16 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-02 16:37:16 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-02 16:37:16 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-02 16:37:16 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-02 16:37:16 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-02 16:37:25 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-02 16:37:25 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4a322ed1
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@10f29a3c
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-02 16:37:25 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-02 16:37:25.529] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-02 16:37:25.536] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-02 16:37:25.543] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-02 16:37:25.553] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-02 16:37:25.564] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@24bb0ef], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@259ff11]
[2026-01-02 16:37:25.573] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-02 16:37:25.739] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-02 16:37:25.895] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-02 16:37:25.945] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: B450A02A76E3D154A880ADCF238092F9 for user: deepak@gmail.com
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2026-01-02 16:37:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2026-01-02 16:37:25.989] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: B450A02A76E3D154A880ADCF238092F9
[2026-01-02 16:37:25.997] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-02 16:37:26.004] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-02 16:37:26.011] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 009ff34e-fd0a-4f9b-be34-5ed92d446542
[2026-01-02 16:37:26.018] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-02 16:37:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-02 16:37:26.032] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 461 ms
[2026-01-02 16:37:26.041] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjczNTIwNDUsImV4cCI6MTc2NzM1Mjk0NX0.Mj_Pv2YcCCfIu5t_iSkLQDw0OLeXZoE-AviQD96sMLs, sessionId=B450A02A76E3D154A880ADCF238092F9, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false), error=null),[]>
[2026-01-02 16:37:26.049] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 488 ms
[2026-01-02 16:37:26.056] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-02 16:37:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-02 16:37:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-02 16:37:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts/my-accounts
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-02 16:37:36.505] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [B450A02A76E3D154A880ADCF238092F9]
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2026-01-02 16:37:36.517] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 4 ms
[2026-01-02 16:37:36.525] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Result : true
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
[2026-01-02 16:37:36.533] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Session invalidated : B450A02A76E3D154A880ADCF238092F9
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_sessions 
    set
        active=?,
        device_info=?,
        ip_address=?,
        last_activity_time=?,
        login_time=?,
        session_id=?,
        user_id=? 
    where
        id=?
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from B450A02A76E3D154A880ADCF238092F9
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B450A02A76E3D154A880ADCF238092F9], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@786853a5]
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts/my-accounts
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts/my-accounts", parameters={}
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getMyAccounts(Authentication)
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getMyAccounts(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleIllegalArgument(IllegalArgumentException)
[2026-01-02 16:37:36.552] [http-nio-8080-exec-3] [ERROR] [GlobalExceptionHandler] - Invalid argument: Failed to evaluate expression 'hasRole('ADMIN','CUSTOMER')'
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=Failed to evaluate expression 'hasRole('AD (truncated)...]
2026-01-02 16:37:36 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ADMIN','CUSTOMER')']
2026-01-02 16:37:36 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2026-01-02 16:38:09 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-02 16:38:09 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-02 16:38:09 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-02 16:38:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-02 16:38:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-02 16:38:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-02 16:38:11 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 404367 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-02 16:38:11 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-02 16:38:11 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-02 16:38:11 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-02 16:38:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-02 16:38:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-02 16:38:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 6 JPA repository interfaces.
2026-01-02 16:38:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-02 16:38:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-02 16:38:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AccountAssignmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:38:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.AwsAccountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:38:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RefreshTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:38:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:38:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:38:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.cloudkeeper.cloudbalance_backend.repository.UserSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-02 16:38:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 3 ms. Found 0 Redis repository interfaces.
2026-01-02 16:38:12 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-02 16:38:12 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-02 16:38:12 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-02 16:38:12 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 921 ms
2026-01-02 16:38:12 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-02 16:38:12 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-02 16:38:12 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-02 16:38:12 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-02 16:38:13 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@55c12e9c
2026-01-02 16:38:13 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-02 16:38:13 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-02 16:38:13 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-02 16:38:13 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-02 16:38:13 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-02 16:38:13 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-02 16:38:13 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-02 16:38:14 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-02 16:38:14 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-02 16:38:14 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-02 16:38:14 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-02 16:38:14 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 24 mappings in 'requestMappingHandlerMapping'
2026-01-02 16:38:14 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-02 16:38:14 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-02 16:38:14 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-02 16:38:14 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-02 16:38:14 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 3.605 seconds (process running for 3.834)
[2026-01-02 16:38:14.899] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-02 16:38:14.908] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-02 16:38:14.918] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
2026-01-02 16:38:14 [scheduling-1] DEBUG org.hibernate.SQL - 
    delete 
    from
        user_sessions us1_0 
    where
        us1_0.last_activity_time<?
[2026-01-02 16:38:14.944] [scheduling-1] [INFO] [SessionManagementService] - Inactive sessions cleaned up.
[2026-01-02 16:38:15.104] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-02 16:38:15.105] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-02 16:38:15 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-02 16:38:15 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-02 16:38:15 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-02 16:38:15 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-02 16:38:15 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-02 16:38:25 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-02 16:38:25 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1a4f0236
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3844fae0
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-02 16:38:25 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-02 16:38:25.640] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-02 16:38:25.648] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-02 16:38:25.655] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-02 16:38:25.662] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-02 16:38:25.671] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@f85849d], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@27b49b84]
[2026-01-02 16:38:25.678] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-02 16:38:25.824] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-02 16:38:25.890] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-02 16:38:25.901] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating session: ACAA1CBA1C4411526BE988ED2B6F6FDE for user: deepak@gmail.com
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_sessions us1_0 
    set
        active=false 
    where
        us1_0.user_id=?
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        us1_0.id,
        us1_0.active,
        us1_0.device_info,
        us1_0.ip_address,
        us1_0.last_activity_time,
        us1_0.login_time,
        us1_0.session_id,
        us1_0.user_id 
    from
        user_sessions us1_0 
    where
        us1_0.session_id=?
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_sessions
        (active, device_info, ip_address, last_activity_time, login_time, session_id, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
[2026-01-02 16:38:25.923] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - ✅ Session created successfully: ACAA1CBA1C4411526BE988ED2B6F6FDE
[2026-01-02 16:38:25.936] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-02 16:38:25.946] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-02 16:38:25.959] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 4cc15710-1df8-475a-a8fe-c5d60e7a926e
[2026-01-02 16:38:25.969] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-02 16:38:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-02 16:38:25.983] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 306 ms
[2026-01-02 16:38:25.992] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjczNTIxMDUsImV4cCI6MTc2NzM1MzAwNX0.bFaM2kutpDdEn4A9k4D4oG-bp_wmPFG9OAcM67sC2E0, sessionId=ACAA1CBA1C4411526BE988ED2B6F6FDE, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false), error=null),[]>
[2026-01-02 16:38:25.999] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 331 ms
[2026-01-02 16:38:26.006] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-02 16:38:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-02 16:38:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-02 16:38:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-02 16:38:26 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B450A02A76E3D154A880ADCF238092F9], Granted Authorities=[ROLE_ADMIN]]]
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts/my-accounts
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=B450A02A76E3D154A880ADCF238092F9], Granted Authorities=[ROLE_ADMIN]]]
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts/my-accounts
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts/my-accounts", parameters={}
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getMyAccounts(Authentication)
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getMyAccounts(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getMyAccounts(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-02 16:38:31.540] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-02 16:38:31.546] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts/my-accounts
[2026-01-02 16:38:31.553] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-02 16:38:31.559] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        aa1_0.id,
        aa1_0.access_key_id,
        aa1_0.account_alias,
        aa1_0.account_id,
        aa1_0.active,
        aa1_0.created_at,
        aa1_0.monthly_budget,
        aa1_0.region,
        aa1_0.secret_access_key,
        aa1_0.update_at 
    from
        aws_accounts aa1_0 
    join
        account_assignments a1_0 
            on aa1_0.id=a1_0.aws_account_id 
    where
        a1_0.user_id=? 
        and aa1_0.active=true 
        and a1_0.active=true
[2026-01-02 16:38:31.572] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 7 ms
[2026-01-02 16:38:31.578] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Your accounts retrieved successfully., data=[], error=null)]
2026-01-02 16:38:31 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-02 16:38:41 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-02 16:38:41 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-02 16:38:41 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-02 16:38:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-02 16:38:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-02 16:38:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
