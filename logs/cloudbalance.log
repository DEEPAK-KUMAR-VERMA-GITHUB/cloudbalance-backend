2026-01-03 00:01:24 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 438212 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 00:01:24 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 00:01:24 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 00:01:24 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 00:01:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 00:01:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 00:01:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 1 Redis repository interface.
2026-01-03 00:01:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 00:01:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 00:01:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2026-01-03 00:01:25 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 00:01:25 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 00:01:25 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 00:01:25 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1038 ms
2026-01-03 00:01:25 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 00:01:25 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 00:01:25 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 00:01:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 00:01:25 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@d8c31e0
2026-01-03 00:01:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 00:01:25 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 00:01:25 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 00:01:26 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 00:01:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 00:01:26 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 00:01:26 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 00:01:27 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 00:01:27 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 00:01:28 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 00:01:28 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 00:01:28 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 24 mappings in 'requestMappingHandlerMapping'
2026-01-03 00:01:28 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 00:01:28 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 00:01:28 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 00:01:28 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 00:01:28 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.791 seconds (process running for 5.172)
[2026-01-03 00:01:28.602] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 00:01:28.612] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 00:01:28.625] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 00:01:28.941] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 00:01:28.941] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 00:01:29 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 00:01:29 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 00:01:29 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 00:01:29 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 00:01:29 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 00:01:33 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 00:01:33 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 00:01:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 00:01:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 00:01:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@50d5d651
2026-01-03 00:01:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@43990a80
2026-01-03 00:01:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 00:01:33 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2026-01-03 00:01:33 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 00:01:33 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 00:01:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 00:01:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:01:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:01:33.877] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:01:33.892] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 00:01:33.918] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 00:01:33.932] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 00:01:33.976] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@929169], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@735ae02e]
[2026-01-03 00:01:34.013] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:01:34.394] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:01:34.466] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 00:01:34.477] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com
[2026-01-03 00:01:34.570] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Reactivated existing Redis session: C563061E3C287755BA7DE228E4201726
[2026-01-03 00:01:34.570] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 00:01:34.587] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 00:01:34.606] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: b22d4fbc-161b-4bdc-b008-083c105ef626
[2026-01-03 00:01:34.633] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 00:01:34.684] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 677 ms
[2026-01-03 00:01:34.721] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjczNzg2OTQsImV4cCI6MTc2NzM3OTU5NH0.tqmPLzElsGJW9ikpK_rir42xfxk1IFkjuo4NxBFgrOY, sessionId=C563061E3C287755BA7DE228E4201726, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false), error=null),[]>
[2026-01-03 00:01:34.749] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 785 ms
[2026-01-03 00:01:34.776] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:01:34 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C5737E95BD50B4E4E2DCA468DE7DE9D8], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:01:37 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 00:01:37 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 00:01:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 00:01:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:01:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:01:37.873] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:01:37.879] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 00:01:37.901] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 00:01:37.908] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 00:01:37.915] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@5ec76811], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@5af8f711]
[2026-01-03 00:01:37.922] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:01:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:01:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:01:38 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:01:38.003] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:01:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:01:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:01:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:01:38.015] [http-nio-8080-exec-3] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2026-01-03 00:01:38.024] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 103 ms
[2026-01-03 00:01:38.034] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=Deepak Kumar Verma, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true), error=null),[]>
[2026-01-03 00:01:38.042] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 127 ms
[2026-01-03 00:01:38.050] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:01:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:01:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 00:01:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:01:38 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C5737E95BD50B4E4E2DCA468DE7DE9D8], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:02:13 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2026-01-03 00:02:13 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:02:13 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2026-01-03 00:02:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/index.html", parameters={}
2026-01-03 00:02:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:02:13 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:02:13 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2026-01-03 00:02:13 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2026-01-03 00:02:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2026-01-03 00:02:13 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2026-01-03 00:02:13 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:02:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2026-01-03 00:02:13 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:02:13 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:02:13 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2026-01-03 00:02:13 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:02:13 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2026-01-03 00:02:13 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2026-01-03 00:02:13 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:02:13 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2026-01-03 00:02:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui.css", parameters={}
2026-01-03 00:02:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/index.css", parameters={}
2026-01-03 00:02:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2026-01-03 00:02:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui-bundle.js", parameters={}
2026-01-03 00:02:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2026-01-03 00:02:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-initializer.js", parameters={}
2026-01-03 00:02:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:02:13 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:02:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:02:13 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:02:13 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:02:13 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:02:13 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:02:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:02:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:02:13 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:02:14 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-16x16.png
2026-01-03 00:02:14 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:02:14 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-16x16.png
2026-01-03 00:02:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/favicon-16x16.png", parameters={}
2026-01-03 00:02:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:02:14 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:02:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/api-docs/swagger-config
2026-01-03 00:02:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:02:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/api-docs/swagger-config
2026-01-03 00:02:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/v1/api-docs/swagger-config", parameters={}
2026-01-03 00:02:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2026-01-03 00:02:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2026-01-03 00:02:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/api/v1/v1/api-docs/swagger-config, displayRequestDuration=true, oauth2RedirectUrl=http:/ (truncated)...]
2026-01-03 00:02:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:02:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/api-docs
2026-01-03 00:02:14 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:02:14 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/api-docs
2026-01-03 00:02:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/v1/api-docs", parameters={}
2026-01-03 00:02:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2026-01-03 00:02:14 [http-nio-8080-exec-3] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 387 ms
2026-01-03 00:02:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2026-01-03 00:02:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{7b226f70656e617069223a22332e312e30222c22696e666f223a7b227469746c65223a22436c6f756442616c616e6365204 (truncated)...]
2026-01-03 00:02:14 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:02:26 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/force-login
2026-01-03 00:02:26 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:02:26 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/force-login
2026-01-03 00:02:26 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/force-login", parameters={}
2026-01-03 00:02:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#forceLogin(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:02:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:02:26.778] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:02:26.797] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/force-login
[2026-01-03 00:02:26.814] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 00:02:26.834] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
2026-01-03 00:02:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:02:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:02:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:02:26.870] [http-nio-8080-exec-4] [INFO] [TokenBlackListService] - Token blacklisted : b22d4fbc-1...
[2026-01-03 00:02:26.896] [http-nio-8080-exec-4] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
[2026-01-03 00:02:26.943] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - All sessions invalidated for userId : 1
[2026-01-03 00:02:26.944] [http-nio-8080-exec-4] [INFO] [AuthService] - Force logout completed for user: deepak@gmail.com
[2026-01-03 00:02:26.968] [http-nio-8080-exec-4] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:02:26 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:02:27.123] [http-nio-8080-exec-4] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:02:27.136] [http-nio-8080-exec-4] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 00:02:27.145] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com
[2026-01-03 00:02:27.158] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Redis session created: E86A61673F8C87A5124202B243BD5280 for user: deepak@gmail.com
[2026-01-03 00:02:27.158] [http-nio-8080-exec-4] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 00:02:27.164] [http-nio-8080-exec-4] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 00:02:27.170] [http-nio-8080-exec-4] [INFO] [AuthService] - Refresh Token: e08c7b48-41e4-4698-add3-d5ae27931eb1
[2026-01-03 00:02:27.176] [http-nio-8080-exec-4] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 00:02:27.186] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 338 ms
[2026-01-03 00:02:27.193] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Force login successful. Previous sessions terminated., data=AuthRe (truncated)...]
2026-01-03 00:02:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C5737E95BD50B4E4E2DCA468DE7DE9D8], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN", parameters={masked}
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-03 00:02:55.483] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:02:55.490] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-03 00:02:55.500] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 00:02:55.516] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.email) like lower(('%'||?||'%')) escape '' 
    order by
        u1_0.created_at desc 
    fetch
        first ? rows only
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 00:02:55.581] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 48 ms
[2026-01-03 00:02:55.600] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-03 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C5737E95BD50B4E4E2DCA468DE7DE9D8], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN", parameters={masked}
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-03 00:07:33.798] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:07:33.816] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-03 00:07:33.837] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 00:07:33.857] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.email) like lower(('%'||?||'%')) escape '' 
    order by
        u1_0.created_at desc 
    fetch
        first ? rows only
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 00:07:33.894] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 16 ms
[2026-01-03 00:07:33.918] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-03 00:07:33 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:07:48.047] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:07:48.056] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 00:07:48.066] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 00:07:48.080] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 00:07:48.095] [http-nio-8080-exec-7] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@574eb604], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@12a074ed]
[2026-01-03 00:07:48.107] [http-nio-8080-exec-7] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:07:48.179] [http-nio-8080-exec-7] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:07:48.190] [http-nio-8080-exec-7] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2026-01-03 00:07:48.198] [http-nio-8080-exec-7] [INFO] [AuthController] - <<< Completed AuthController.login() in 92 ms
[2026-01-03 00:07:48.204] [http-nio-8080-exec-7] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=Deepak Kumar Verma, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true), error=null),[]>
[2026-01-03 00:07:48.210] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 116 ms
[2026-01-03 00:07:48.216] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:07:48 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C5737E95BD50B4E4E2DCA468DE7DE9D8], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/force-login
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/force-login
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/force-login", parameters={}
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#forceLogin(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:08:22.064] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:08:22.076] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/force-login
[2026-01-03 00:08:22.092] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 00:08:22.107] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:08:22.125] [http-nio-8080-exec-6] [INFO] [TokenBlackListService] - Token blacklisted : e08c7b48-4...
[2026-01-03 00:08:22.137] [http-nio-8080-exec-6] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
[2026-01-03 00:08:22.163] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - All sessions invalidated for userId : 1
[2026-01-03 00:08:22.185] [http-nio-8080-exec-6] [INFO] [AuthService] - Force logout completed for user: deepak@gmail.com
[2026-01-03 00:08:22.205] [http-nio-8080-exec-6] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:08:22.302] [http-nio-8080-exec-6] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:08:22.314] [http-nio-8080-exec-6] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 00:08:22.326] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com
[2026-01-03 00:08:22.340] [http-nio-8080-exec-6] [INFO] [SessionManagementService] - Reactivated existing Redis session: E86A61673F8C87A5124202B243BD5280
[2026-01-03 00:08:22.355] [http-nio-8080-exec-6] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 00:08:22.372] [http-nio-8080-exec-6] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 00:08:22.391] [http-nio-8080-exec-6] [INFO] [AuthService] - Refresh Token: a5258617-9da6-49d8-aba7-f47b94c5c5fa
[2026-01-03 00:08:22.406] [http-nio-8080-exec-6] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 00:08:22.430] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 311 ms
[2026-01-03 00:08:22.454] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Force login successful. Previous sessions terminated., data=AuthRe (truncated)...]
2026-01-03 00:08:22 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:08:31 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 00:08:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:08:31 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 00:08:31.609] [http-nio-8080-exec-9] [WARN] [JwtAuthenticationFilter] - No HTTP session found - creating new session
[2026-01-03 00:08:31.627] [http-nio-8080-exec-9] [INFO] [JwtAuthenticationFilter] - Created new HTTP session: CE13FE073A7E714393C3373B74DF5D95
[2026-01-03 00:08:31.649] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [CE13FE073A7E714393C3373B74DF5D95]
[2026-01-03 00:08:31.672] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 3 ms
[2026-01-03 00:08:31.694] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - Result : false
[2026-01-03 00:08:31.716] [http-nio-8080-exec-9] [WARN] [JwtAuthenticationFilter] - SESSION INVALID (idle timeout): CE13FE073A7E714393C3373B74DF5D95
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:09:06.628] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:09:06.642] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 00:09:06.653] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 00:09:06.660] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 00:09:06.667] [http-nio-8080-exec-8] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@4c177f6a], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@62338fb7]
[2026-01-03 00:09:06.677] [http-nio-8080-exec-8] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:09:06.780] [http-nio-8080-exec-8] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:09:06.792] [http-nio-8080-exec-8] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2026-01-03 00:09:06.801] [http-nio-8080-exec-8] [INFO] [AuthController] - <<< Completed AuthController.login() in 125 ms
[2026-01-03 00:09:06.811] [http-nio-8080-exec-8] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=Deepak Kumar Verma, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true), error=null),[]>
[2026-01-03 00:09:06.823] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 156 ms
[2026-01-03 00:09:06.839] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 00:09:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:09:13.610] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:09:13.632] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 00:09:13.652] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 00:09:13.664] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 00:09:13.672] [http-nio-8080-exec-10] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@60685e1c], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@5ee1a5b6]
[2026-01-03 00:09:13.680] [http-nio-8080-exec-10] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:09:13.768] [http-nio-8080-exec-10] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:09:13.781] [http-nio-8080-exec-10] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2026-01-03 00:09:13.792] [http-nio-8080-exec-10] [INFO] [AuthController] - <<< Completed AuthController.login() in 112 ms
[2026-01-03 00:09:13.805] [http-nio-8080-exec-10] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=Deepak Kumar Verma, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true), error=null),[]>
[2026-01-03 00:09:13.821] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Response Time : 149 ms
[2026-01-03 00:09:13.832] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 00:09:13 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:25 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2026-01-03 00:09:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:25 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 00:09:25.383] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [E86A61673F8C87A5124202B243BD5280]
[2026-01-03 00:09:25.416] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 6 ms
[2026-01-03 00:09:25.435] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Result : true
2026-01-03 00:09:25 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from E86A61673F8C87A5124202B243BD5280
2026-01-03 00:09:25 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5ee6ba4c]
2026-01-03 00:09:25 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2026-01-03 00:09:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/index.html", parameters={}
2026-01-03 00:09:25 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:09:25 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:25 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2026-01-03 00:09:25 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2026-01-03 00:09:25 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2026-01-03 00:09:25 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2026-01-03 00:09:25 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:09:25 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2026-01-03 00:09:25 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2026-01-03 00:09:25 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:09:25 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:09:25 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:09:25 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2026-01-03 00:09:25 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2026-01-03 00:09:25 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2026-01-03 00:09:25 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:09:25 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/index.css", parameters={}
2026-01-03 00:09:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui.css", parameters={}
2026-01-03 00:09:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui-bundle.js", parameters={}
2026-01-03 00:09:25 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:09:25 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:09:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:09:25 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2026-01-03 00:09:25 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:25 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:09:25 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2026-01-03 00:09:25 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-initializer.js", parameters={}
2026-01-03 00:09:25 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:09:25 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:25 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:25 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:25 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-16x16.png
2026-01-03 00:09:25 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:09:25 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-16x16.png
2026-01-03 00:09:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/favicon-16x16.png", parameters={}
2026-01-03 00:09:25 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 00:09:25 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/api-docs/swagger-config
2026-01-03 00:09:25 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:09:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/api-docs/swagger-config
2026-01-03 00:09:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/v1/api-docs/swagger-config", parameters={}
2026-01-03 00:09:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2026-01-03 00:09:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2026-01-03 00:09:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/api/v1/v1/api-docs/swagger-config, displayRequestDuration=true, oauth2RedirectUrl=http:/ (truncated)...]
2026-01-03 00:09:25 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:25 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/api-docs
2026-01-03 00:09:25 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:09:25 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/api-docs
2026-01-03 00:09:25 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/v1/api-docs", parameters={}
2026-01-03 00:09:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2026-01-03 00:09:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2026-01-03 00:09:25 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{7b226f70656e617069223a22332e312e30222c22696e666f223a7b227469746c65223a22436c6f756442616c616e6365204 (truncated)...]
2026-01-03 00:09:25 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:09:36.791] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:09:36.811] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 00:09:36.833] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 00:09:36.855] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 00:09:36.877] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@20b31e9a], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@37b5d87]
[2026-01-03 00:09:36.898] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:09:36.988] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:36 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:09:36.999] [http-nio-8080-exec-1] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2026-01-03 00:09:37.007] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 110 ms
[2026-01-03 00:09:37.017] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=Deepak Kumar Verma, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true), error=null),[]>
[2026-01-03 00:09:37.027] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 150 ms
[2026-01-03 00:09:37.034] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:09:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:09:37 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 00:09:37 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:09:37 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:09:45 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 00:09:45 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 00:09:45 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 00:09:45 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 00:09:45 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 00:09:45 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 00:09:49 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 440728 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 00:09:49 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 00:09:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 00:09:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 00:09:49 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 00:09:49 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 00:09:49 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 1 Redis repository interface.
2026-01-03 00:09:49 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 00:09:49 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 00:09:49 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 5 JPA repository interfaces.
2026-01-03 00:09:50 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 00:09:50 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 00:09:50 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 00:09:50 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1061 ms
2026-01-03 00:09:50 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 00:09:50 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 00:09:51 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 00:09:51 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 00:09:51 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2aefbb8d
2026-01-03 00:09:51 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 00:09:51 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 00:09:51 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 00:09:52 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 00:09:52 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 00:09:52 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 00:09:52 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 00:09:53 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 00:09:53 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 00:09:53 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 00:09:54 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 00:09:54 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 24 mappings in 'requestMappingHandlerMapping'
2026-01-03 00:09:54 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 00:09:54 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 00:09:54 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 00:09:54 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 00:09:54 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.338 seconds (process running for 5.74)
[2026-01-03 00:09:54.445] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 00:09:54.455] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 00:09:54.465] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 00:09:54.727] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 00:09:54.727] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 00:09:54 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 00:09:54 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 00:09:54 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 00:09:55 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 00:09:55 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 00:09:59 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 00:09:59 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@64cdd926
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6d89eca2
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 00:09:59 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:09:59.764] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:09:59.780] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 00:09:59.797] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 00:09:59.818] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 00:09:59.850] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1c2548cd], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@3ffaa009]
[2026-01-03 00:09:59.878] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:09:59 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:10:00.067] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:10:00.193] [http-nio-8080-exec-1] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 00:10:00.217] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com
[2026-01-03 00:10:00.370] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Redis session created: 954CED66DD39F042B84D623F3FBA015C for user: deepak@gmail.com
[2026-01-03 00:10:00.371] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 00:10:00.397] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 00:10:00.415] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 3ca23526-7826-49ba-905e-c246dc06ffc2
[2026-01-03 00:10:00.430] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 00:10:00.454] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 580 ms
[2026-01-03 00:10:00.478] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3NjczNzkyMDAsImV4cCI6MTc2NzM4MDEwMH0.4DMFfOAPpTVUjPuY4R1joq9eVXDdNT6MNccUkezbSLI, sessionId=954CED66DD39F042B84D623F3FBA015C, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false), error=null),[]>
[2026-01-03 00:10:00.498] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 658 ms
[2026-01-03 00:10:00.516] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:10:00 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:10:08.353] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:10:08.362] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 00:10:08.373] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 00:10:08.384] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 00:10:08.400] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@37dbff6a], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@72d977f5]
[2026-01-03 00:10:08.421] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:10:08.535] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:10:08.574] [http-nio-8080-exec-2] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2026-01-03 00:10:08.612] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 193 ms
[2026-01-03 00:10:08.665] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=Deepak Kumar Verma, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true), error=null),[]>
[2026-01-03 00:10:08.675] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 275 ms
[2026-01-03 00:10:08.686] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 00:10:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:18:48 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 00:18:48 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:18:48 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 00:18:48 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 00:18:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:18:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:18:48.988] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:18:48.999] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 00:18:49.013] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 00:18:49.027] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 00:18:49.045] [http-nio-8080-exec-7] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@5742a88a], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@537d36ba]
[2026-01-03 00:18:49.069] [http-nio-8080-exec-7] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:18:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:18:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:18:49 [http-nio-8080-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:18:49.179] [http-nio-8080-exec-7] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:18:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:18:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:18:49 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:18:49.192] [http-nio-8080-exec-7] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2026-01-03 00:18:49.201] [http-nio-8080-exec-7] [INFO] [AuthController] - <<< Completed AuthController.login() in 134 ms
[2026-01-03 00:18:49.207] [http-nio-8080-exec-7] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=Deepak Kumar Verma, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true), error=null),[]>
[2026-01-03 00:18:49.218] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 173 ms
[2026-01-03 00:18:49.235] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:18:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:18:49 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 00:18:49 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:19:01.428] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:19:01.443] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 00:19:01.457] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 00:19:01.470] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 00:19:01.480] [http-nio-8080-exec-8] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1f999f59], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@1ba61872]
[2026-01-03 00:19:01.491] [http-nio-8080-exec-8] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:19:01.629] [http-nio-8080-exec-8] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:19:01.641] [http-nio-8080-exec-8] [WARN] [AuthService] - User already has active session : deepak@gmail.com
[2026-01-03 00:19:01.648] [http-nio-8080-exec-8] [INFO] [AuthController] - <<< Completed AuthController.login() in 158 ms
[2026-01-03 00:19:01.655] [http-nio-8080-exec-8] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=Deepak Kumar Verma, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true), error=null),[]>
[2026-01-03 00:19:01.661] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 181 ms
[2026-01-03 00:19:01.668] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:19:01 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=E86A61673F8C87A5124202B243BD5280], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 00:19:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/force-login
2026-01-03 00:19:12 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 00:19:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/force-login
2026-01-03 00:19:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/force-login", parameters={}
2026-01-03 00:19:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#forceLogin(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 00:19:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 00:19:12.987] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 00:19:12.996] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/force-login
[2026-01-03 00:19:13.005] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 00:19:13.014] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:19:13.046] [http-nio-8080-exec-9] [INFO] [TokenBlackListService] - Token blacklisted : 3ca23526-7...
[2026-01-03 00:19:13.113] [http-nio-8080-exec-9] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
[2026-01-03 00:19:13.148] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - All sessions invalidated for userId : 1
[2026-01-03 00:19:13.174] [http-nio-8080-exec-9] [INFO] [AuthService] - Force logout completed for user: deepak@gmail.com
[2026-01-03 00:19:13.194] [http-nio-8080-exec-9] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        refresh_tokens 
    set
        device_info=?,
        expiry_date=?,
        ip_address=?,
        last_activity_time=?,
        revoked=?,
        token=?,
        token_version=?,
        user_id=? 
    where
        id=?
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 00:19:13.363] [http-nio-8080-exec-9] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 00:19:13.378] [http-nio-8080-exec-9] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 00:19:13.401] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com
[2026-01-03 00:19:13.440] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - Redis session created: CE13FE073A7E714393C3373B74DF5D95 for user: deepak@gmail.com
[2026-01-03 00:19:13.464] [http-nio-8080-exec-9] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 00:19:13.486] [http-nio-8080-exec-9] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 00:19:13.506] [http-nio-8080-exec-9] [INFO] [AuthService] - Refresh Token: 549efc95-b962-4359-b954-4f2c662a88bb
[2026-01-03 00:19:13.525] [http-nio-8080-exec-9] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 00:19:13.544] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Response Time : 520 ms
[2026-01-03 00:19:13.557] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Force login successful. Previous sessions terminated., data=AuthRe (truncated)...]
2026-01-03 00:19:13 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 00:21:12 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 00:21:12 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 00:21:12 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 00:21:12 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 00:21:12 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 00:21:12 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 14:43:49 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 25469 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 14:43:49 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 14:43:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 14:43:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 14:43:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 14:43:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 14:43:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 81 ms. Found 1 Redis repository interface.
2026-01-03 14:43:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 14:43:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 14:43:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2026-01-03 14:43:52 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 14:43:52 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 14:43:52 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 14:43:52 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 2784 ms
2026-01-03 14:43:52 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 14:43:52 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 14:43:52 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 14:43:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 14:43:53 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36664bb1
2026-01-03 14:43:53 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 14:43:53 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 14:43:53 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 14:43:54 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 14:43:54 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 14:43:54 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 14:43:55 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 14:43:55 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 14:43:55 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 14:43:55 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 14:43:56 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 14:43:56 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 14:43:56 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 14:43:56 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 14:43:56 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 14:43:56 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 14:43:56 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 7.612 seconds (process running for 8.298)
[2026-01-03 14:43:56.518] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 14:43:56.540] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 14:43:56.561] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 14:43:57.007] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 14:43:57.007] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 14:43:57 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 14:43:57 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 14:43:57 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 14:43:57 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 14:43:57 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 14:44:25 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 14:44:25 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@264fa3ad
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@17d67846
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 14:44:25 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 14:44:25.278] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:44:25.304] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 14:44:25.330] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 14:44:25.362] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 14:44:25.401] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@4e636257], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@567bb26c]
[2026-01-03 14:44:25.429] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 14:44:25.820] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:44:25 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 14:44:25.867] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Unknown Browser on Unknown OS
[2026-01-03 14:44:25.928] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Redis session created: F48369BD0804252CCDFF1B1054B53264 for user: deepak@gmail.com
2026-01-03 14:44:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 14:44:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 14:44:26.127] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 14:44:26.152] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 14:44:26.174] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 3dc92864-c3ec-4c1d-8dd9-1cdd590b220f
[2026-01-03 14:44:26.202] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 14:44:26 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 14:44:26.274] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 848 ms
[2026-01-03 14:44:26.301] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0MzE2NjYsImV4cCI6MTc2NzQzMjU2Nn0.ETQ7LDq8H2KYZ-IT_J2j4rgCMV_tpJ16081NTpDOq2w, sessionId=F48369BD0804252CCDFF1B1054B53264, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 14:44:26.323] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 931 ms
[2026-01-03 14:44:26.348] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:44:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:44:26 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 14:44:26 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 14:45:30.397] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [F48369BD0804252CCDFF1B1054B53264]
[2026-01-03 14:45:30.479] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 30 ms
[2026-01-03 14:45:30.509] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Result : true
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from F48369BD0804252CCDFF1B1054B53264
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F48369BD0804252CCDFF1B1054B53264], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6007da70]
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/logout
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/logout", parameters={}
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#logout(Authentication, HttpServletRequest, HttpServletResponse)
[2026-01-03 14:45:30.581] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:45:30.608] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/logout
[2026-01-03 14:45:30.634] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 14:45:30.658] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 14:45:30.716] [http-nio-8080-exec-5] [INFO] [TokenBlackListService] - Token blacklisted : eyJhbGciOi...
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
[2026-01-03 14:45:30.757] [http-nio-8080-exec-5] [INFO] [RefreshTokenService] - Refresh token revoked for session : 7DDBD37557C6916E01724B7745D3D2CA
[2026-01-03 14:45:30.788] [http-nio-8080-exec-5] [INFO] [AuthService] - User logged out from device: deepak@gmail.com session: 7DDBD37557C6916E01724B7745D3D2CA
[2026-01-03 14:45:30.820] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 133 ms
[2026-01-03 14:45:30.848] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Logout successful, data=null, error=null)]
2026-01-03 14:45:30 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:45:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
[2026-01-03 14:45:49.815] [http-nio-8080-exec-6] [WARN] [JwtAuthenticationFilter] - BLACKLISTED token attempted
2026-01-03 14:45:59 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
[2026-01-03 14:45:59.987] [http-nio-8080-exec-7] [WARN] [JwtAuthenticationFilter] - BLACKLISTED token attempted
2026-01-03 14:46:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 14:46:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 14:46:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 14:46:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 14:46:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 14:46:04.804] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:46:04.828] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 14:46:04.855] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 14:46:04.881] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 14:46:04.906] [http-nio-8080-exec-8] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@39fb2736], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@3dc4a4d1]
[2026-01-03 14:46:04.934] [http-nio-8080-exec-8] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 14:46:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:46:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 14:46:05 [http-nio-8080-exec-8] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 14:46:05.196] [http-nio-8080-exec-8] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 14:46:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:46:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 14:46:05.232] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Unknown Browser on Unknown OS
[2026-01-03 14:46:05.278] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - Redis session created: 7DDBD37557C6916E01724B7745D3D2CA for user: deepak@gmail.com
2026-01-03 14:46:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 14:46:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 14:46:05.327] [http-nio-8080-exec-8] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 14:46:05.359] [http-nio-8080-exec-8] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 14:46:05.383] [http-nio-8080-exec-8] [INFO] [AuthService] - Refresh Token: e5dd99cc-6d2a-467f-af43-ec976998e757
[2026-01-03 14:46:05.402] [http-nio-8080-exec-8] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 14:46:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 14:46:05.429] [http-nio-8080-exec-8] [INFO] [AuthController] - <<< Completed AuthController.login() in 497 ms
[2026-01-03 14:46:05.443] [http-nio-8080-exec-8] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0MzE3NjUsImV4cCI6MTc2NzQzMjY2NX0.G2vx8ifC50EmdzD3ArhSPaESj8Ns4PpABCJiccF6AM4, sessionId=7DDBD37557C6916E01724B7745D3D2CA, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 14:46:05.458] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 552 ms
[2026-01-03 14:46:05.471] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:46:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:46:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 14:46:05 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:05 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F48369BD0804252CCDFF1B1054B53264], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 14:46:16 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 14:46:16 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F48369BD0804252CCDFF1B1054B53264], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 14:46:16 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 14:46:16 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN", parameters={masked}
2026-01-03 14:46:16 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-03 14:46:16 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-03 14:46:16 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-03 14:46:16.865] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:46:16.894] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-03 14:46:16.918] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 14:46:16.943] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 14:46:16 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.email) like lower(('%'||?||'%')) escape '' 
    order by
        u1_0.created_at desc 
    fetch
        first ? rows only
2026-01-03 14:46:17 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 14:46:17.016] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Response Time : 48 ms
[2026-01-03 14:46:17.045] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:46:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:46:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-03 14:46:17 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2026-01-03 14:46:35 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:46:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2026-01-03 14:46:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/index.html", parameters={}
2026-01-03 14:46:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 14:46:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:35 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2026-01-03 14:46:35 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:46:35 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2026-01-03 14:46:35 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2026-01-03 14:46:35 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2026-01-03 14:46:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui.css", parameters={}
2026-01-03 14:46:35 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2026-01-03 14:46:35 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:46:35 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:46:35 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2026-01-03 14:46:35 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:46:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui-bundle.js", parameters={}
2026-01-03 14:46:35 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2026-01-03 14:46:35 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2026-01-03 14:46:35 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/index.css", parameters={}
2026-01-03 14:46:35 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2026-01-03 14:46:35 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2026-01-03 14:46:35 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:46:35 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2026-01-03 14:46:35 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/swagger-initializer.js", parameters={}
2026-01-03 14:46:35 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 14:46:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 14:46:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 14:46:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 14:46:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 14:46:35 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:35 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:35 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:35 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:35 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-16x16.png
2026-01-03 14:46:35 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:46:35 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-16x16.png
2026-01-03 14:46:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/swagger-ui/favicon-16x16.png", parameters={}
2026-01-03 14:46:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2026-01-03 14:46:35 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:35 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/api-docs/swagger-config
2026-01-03 14:46:35 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:46:35 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/api-docs/swagger-config
2026-01-03 14:46:35 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/v1/api-docs/swagger-config", parameters={}
2026-01-03 14:46:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2026-01-03 14:46:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2026-01-03 14:46:35 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/api/v1/v1/api-docs/swagger-config, displayRequestDuration=true, oauth2RedirectUrl=http:/ (truncated)...]
2026-01-03 14:46:35 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:35 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/api-docs
2026-01-03 14:46:35 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:46:35 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/api-docs
2026-01-03 14:46:35 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/v1/api-docs", parameters={}
2026-01-03 14:46:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2026-01-03 14:46:36 [http-nio-8080-exec-10] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 622 ms
2026-01-03 14:46:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2026-01-03 14:46:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{7b226f70656e617069223a22332e312e30222c22696e666f223a7b227469746c65223a22436c6f756442616c616e6365204 (truncated)...]
2026-01-03 14:46:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 14:46:54.026] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:46:54.053] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 14:46:54.083] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 14:46:54.108] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 14:46:54.132] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@633dee9f], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@285dbf31]
[2026-01-03 14:46:54.159] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 14:46:54.362] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 14:46:54.380] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 14:46:54.407] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Redis session created: CBA6097AA55B72BA6E6961F8F35E960B for user: deepak@gmail.com
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 14:46:54.439] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 14:46:54.468] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 14:46:54.496] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 7d57542e-a1cd-4622-b3f6-d967a1e27e0e
[2026-01-03 14:46:54.527] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 14:46:54.562] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 405 ms
[2026-01-03 14:46:54.591] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0MzE4MTQsImV4cCI6MTc2NzQzMjcxNH0.Qetxfg5eC4I4ZY6Fei3IxBsH0inrBQfw4J1aywARxII, sessionId=CBA6097AA55B72BA6E6961F8F35E960B, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 14:46:54.621] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 489 ms
[2026-01-03 14:46:54.648] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 14:46:54 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /auth/sessions
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 14:47:59.082] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [CBA6097AA55B72BA6E6961F8F35E960B]
[2026-01-03 14:47:59.118] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 7 ms
[2026-01-03 14:47:59.143] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - Result : true
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from CBA6097AA55B72BA6E6961F8F35E960B
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=CBA6097AA55B72BA6E6961F8F35E960B], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1623ea66]
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /auth/sessions
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/auth/sessions", parameters={}
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#getActiveSessions(Authentication)
[2026-01-03 14:47:59.197] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:47:59.223] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/auth/sessions
[2026-01-03 14:47:59.249] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 14:47:59.274] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 14:47:59.317] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 13 ms
[2026-01-03 14:47:59.347] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=null, data=[], error=null)]
2026-01-03 14:47:59 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F48369BD0804252CCDFF1B1054B53264], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN", parameters={masked}
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-03 14:48:26.101] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:48:26.127] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-03 14:48:26.152] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 14:48:26.177] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.email) like lower(('%'||?||'%')) escape '' 
    order by
        u1_0.created_at desc 
    fetch
        first ? rows only
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 14:48:26.214] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Response Time : 13 ms
[2026-01-03 14:48:26.240] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-03 14:48:26 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:48:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 14:48:59 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=CBA6097AA55B72BA6E6961F8F35E960B], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 14:48:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 14:48:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN", parameters={masked}
2026-01-03 14:48:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-03 14:48:59 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-03 14:48:59 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-03 14:48:59.934] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:48:59.964] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-03 14:48:59.989] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 14:49:00.016] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
2026-01-03 14:49:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.email) like lower(('%'||?||'%')) escape '' 
    order by
        u1_0.created_at desc 
    fetch
        first ? rows only
2026-01-03 14:49:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 14:49:00.057] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 13 ms
[2026-01-03 14:49:00.086] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:49:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:49:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-03 14:49:00 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=CBA6097AA55B72BA6E6961F8F35E960B], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/logout
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/logout", parameters={}
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#logout(Authentication, HttpServletRequest, HttpServletResponse)
[2026-01-03 14:49:07.458] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:49:07.487] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/logout
[2026-01-03 14:49:07.512] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 14:49:07.537] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 14:49:07.574] [http-nio-8080-exec-6] [INFO] [TokenBlackListService] - Token blacklisted : eyJhbGciOi...
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
[2026-01-03 14:49:07.607] [http-nio-8080-exec-6] [INFO] [RefreshTokenService] - Refresh token revoked for session : 5B89E03FF72D036321ADC31A573A0F6F
[2026-01-03 14:49:07.633] [http-nio-8080-exec-6] [INFO] [AuthService] - User logged out from device: deepak@gmail.com session: 5B89E03FF72D036321ADC31A573A0F6F
[2026-01-03 14:49:07.660] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Response Time : 96 ms
[2026-01-03 14:49:07.690] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Logout successful, data=null, error=null)]
2026-01-03 14:49:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:49:43 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 14:49:43 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F48369BD0804252CCDFF1B1054B53264], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 14:49:43 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 14:49:43 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN", parameters={masked}
2026-01-03 14:49:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-03 14:49:43 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-03 14:49:43 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-03 14:49:43.881] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:49:43.908] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-03 14:49:43.941] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 14:49:43.972] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 14:49:44 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.email) like lower(('%'||?||'%')) escape '' 
    order by
        u1_0.created_at desc 
    fetch
        first ? rows only
2026-01-03 14:49:44 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 14:49:44.017] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 15 ms
[2026-01-03 14:49:44.043] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:49:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:49:44 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-03 14:49:44 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/refresh-token
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F48369BD0804252CCDFF1B1054B53264], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/refresh-token
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/refresh-token", parameters={}
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#refreshToken(HttpServletRequest, HttpServletResponse)
[2026-01-03 14:49:51.156] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:49:51.182] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/refresh-token
[2026-01-03 14:49:51.208] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 14:49:51.232] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id,
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        refresh_tokens rt1_0 
    join
        users u1_0 
            on u1_0.id=rt1_0.user_id 
    where
        rt1_0.token=?
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 14:49:51.284] [http-nio-8080-exec-5] [INFO] [AuthService] - Token refreshed for user: deepak@gmail.com
[2026-01-03 14:49:51.316] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 59 ms
[2026-01-03 14:49:51.344] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Token refreshed successfully, data=AuthResponse(accessToken=eyJhbG (truncated)...]
2026-01-03 14:49:51 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:50:01 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
2026-01-03 14:50:01 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F48369BD0804252CCDFF1B1054B53264], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 14:50:01 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/logout
2026-01-03 14:50:01 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/logout", parameters={}
2026-01-03 14:50:01 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#logout(Authentication, HttpServletRequest, HttpServletResponse)
[2026-01-03 14:50:01.777] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 14:50:01.799] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/logout
[2026-01-03 14:50:01.822] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 14:50:01.845] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 14:50:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 14:50:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 14:50:01.881] [http-nio-8080-exec-8] [INFO] [TokenBlackListService] - Token blacklisted : eyJhbGciOi...
[2026-01-03 14:50:01.927] [http-nio-8080-exec-8] [INFO] [SessionManagementService] - Session invalidated: 7DDBD37557C6916E01724B7745D3D2CA
2026-01-03 14:50:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
[2026-01-03 14:50:01.957] [http-nio-8080-exec-8] [INFO] [RefreshTokenService] - Refresh token revoked for session : 7DDBD37557C6916E01724B7745D3D2CA
[2026-01-03 14:50:01.982] [http-nio-8080-exec-8] [INFO] [AuthService] - User logged out from device: deepak@gmail.com session: 7DDBD37557C6916E01724B7745D3D2CA
[2026-01-03 14:50:02.017] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 146 ms
[2026-01-03 14:50:02.049] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 14:50:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 14:50:02 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Logout successful, data=null, error=null)]
2026-01-03 14:50:02 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 14:50:42 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
[2026-01-03 14:50:42.933] [http-nio-8080-exec-10] [WARN] [JwtAuthenticationFilter] - BLACKLISTED token attempted
2026-01-03 16:18:25 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m35s461ms847µs183ns).
2026-01-03 16:50:34 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 16:50:34 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 16:50:34 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 16:50:34 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 16:50:34 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 16:50:34 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 16:50:58 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 28927 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 16:50:58 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 16:50:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 16:50:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 16:50:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 16:50:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 16:50:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 55 ms. Found 1 Redis repository interface.
2026-01-03 16:50:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 16:50:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 16:50:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2026-01-03 16:50:59 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 16:50:59 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 16:50:59 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 16:50:59 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1280 ms
2026-01-03 16:51:00 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 16:51:00 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 16:51:00 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 16:51:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 16:51:00 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@459891a6
2026-01-03 16:51:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 16:51:00 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 16:51:00 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 16:51:01 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 16:51:01 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 16:51:01 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 16:51:01 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 16:51:02 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 16:51:02 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 16:51:02 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 16:51:02 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 16:51:02 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 16:51:02 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 16:51:02 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 16:51:02 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 16:51:03 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 16:51:03 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.741 seconds (process running for 5.373)
[2026-01-03 16:51:03.026] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 16:51:03.033] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 16:51:03.042] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 16:51:03.588] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 16:51:03.588] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 16:51:03 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 16:51:03 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 16:51:03 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 16:51:03 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 16:51:03 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 16:51:14 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 16:51:14 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7aeee4b8
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3bdc14a2
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 16:51:14 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/logout
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8080/api/v1/auth/logout?continue to session
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8080/api/v1/error?continue to session
2026-01-03 16:51:14 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 16:51:21.332] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 16:51:21.340] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 16:51:21.348] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 16:51:21.357] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 16:51:21.373] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@8d4fb64], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@2a9023c8]
[2026-01-03 16:51:21.397] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 16:51:21.642] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 16:51:21.676] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 16:51:21.700] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Redis session created: 41526E263BF797540502312EF50C3DD7 for user: deepak@gmail.com
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 16:51:21.766] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 16:51:21.774] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 16:51:21.782] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: f667a236-4803-419a-bac4-97c25a24fb55
[2026-01-03 16:51:21.793] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 16:51:21.814] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 421 ms
[2026-01-03 16:51:21.829] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0MzkyODEsImV4cCI6MTc2NzQ0MDE4MX0.Nw5HgpO_BS-BE4wmXj6NWMRUtUOwwhXiEIJrGGGCeCg, sessionId=41526E263BF797540502312EF50C3DD7, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 16:51:21.848] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 479 ms
[2026-01-03 16:51:21.863] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 16:51:21 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 16:51:29.207] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 16:51:29.215] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 16:51:29.223] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 16:51:29.230] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 16:51:29.240] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@6994784e], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@6dabf1a4]
[2026-01-03 16:51:29.250] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 16:51:29.341] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 16:51:29.369] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Unknown Browser on Unknown OS
[2026-01-03 16:51:29.398] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Redis session created: EB9389BD32600C4C6997998524C7476D for user: deepak@gmail.com
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 16:51:29.435] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 16:51:29.455] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 16:51:29.477] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: a7e05631-2c3c-409d-a1cd-25ce5a315831
[2026-01-03 16:51:29.492] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 16:51:29.510] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 261 ms
[2026-01-03 16:51:29.523] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0MzkyODksImV4cCI6MTc2NzQ0MDE4OX0.Z0ZjMTDEgbwBPMMSyV-nBhUhTLz0_IHFEVDHs6Bdq1Y, sessionId=EB9389BD32600C4C6997998524C7476D, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 16:51:29.539] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 299 ms
[2026-01-03 16:51:29.560] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 16:51:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 16:51:40.617] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [EB9389BD32600C4C6997998524C7476D]
[2026-01-03 16:51:40.633] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 7 ms
[2026-01-03 16:51:40.645] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Result : true
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from EB9389BD32600C4C6997998524C7476D
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB9389BD32600C4C6997998524C7476D], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@23fd01bb]
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN", parameters={masked}
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-03 16:51:40.697] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 16:51:40.713] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-03 16:51:40.729] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 16:51:40.740] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.email) like lower(('%'||?||'%')) escape '' 
    order by
        u1_0.created_at desc 
    fetch
        first ? rows only
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 16:51:40.760] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 12 ms
[2026-01-03 16:51:40.768] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-03 16:51:40 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /auth/sessions
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 16:52:30.795] [http-nio-8080-exec-7] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [41526E263BF797540502312EF50C3DD7]
[2026-01-03 16:52:30.821] [http-nio-8080-exec-7] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 4 ms
[2026-01-03 16:52:30.844] [http-nio-8080-exec-7] [INFO] [SessionManagementService] - Result : true
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 41526E263BF797540502312EF50C3DD7
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=41526E263BF797540502312EF50C3DD7], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1be6a55e]
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /auth/sessions
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/auth/sessions", parameters={}
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#getActiveSessions(Authentication)
[2026-01-03 16:52:30.895] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 16:52:30.919] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/auth/sessions
[2026-01-03 16:52:30.933] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 16:52:30.944] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 16:52:30.956] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 5 ms
[2026-01-03 16:52:30.965] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=null, data=[], error=null)]
2026-01-03 16:52:30 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 16:52:47 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 16:52:47 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 16:52:47 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 16:52:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 16:52:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 16:52:47.811] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 16:52:47.821] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 16:52:47.834] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 16:52:47.848] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 16:52:47.866] [http-nio-8080-exec-9] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@353f10b], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@76c75b9]
[2026-01-03 16:52:47.888] [http-nio-8080-exec-9] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 16:52:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:52:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 16:52:48 [http-nio-8080-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 16:52:48.032] [http-nio-8080-exec-9] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 16:52:48 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:52:48 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 16:52:48.043] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 16:52:48.053] [http-nio-8080-exec-9] [INFO] [SessionManagementService] - Redis session created: 3649E77DED619CB8E17E55CB567C9F1E for user: deepak@gmail.com
2026-01-03 16:52:48 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 16:52:48 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 16:52:48.066] [http-nio-8080-exec-9] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 16:52:48.073] [http-nio-8080-exec-9] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 16:52:48.084] [http-nio-8080-exec-9] [INFO] [AuthService] - Refresh Token: f9cd2172-e758-4716-8b29-95f57f211705
[2026-01-03 16:52:48.099] [http-nio-8080-exec-9] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 16:52:48 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 16:52:48.116] [http-nio-8080-exec-9] [INFO] [AuthController] - <<< Completed AuthController.login() in 231 ms
[2026-01-03 16:52:48.129] [http-nio-8080-exec-9] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0MzkzNjgsImV4cCI6MTc2NzQ0MDI2OH0.5qNP3DXO5vlpIjp-dpNB4jmu1W15N7ABz1xIsGf4LAY, sessionId=3649E77DED619CB8E17E55CB567C9F1E, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 16:52:48.139] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Response Time : 273 ms
[2026-01-03 16:52:48.150] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 16:52:48 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 16:52:48 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 16:52:48 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 16:52:48 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=41526E263BF797540502312EF50C3DD7], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 16:53:05.194] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 16:53:05.202] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 16:53:05.212] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 16:53:05.220] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 16:53:05.236] [http-nio-8080-exec-10] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@cf49ea5], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@8cb0be3]
[2026-01-03 16:53:05.258] [http-nio-8080-exec-10] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 16:53:05.384] [http-nio-8080-exec-10] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 16:53:05.404] [http-nio-8080-exec-10] [INFO] [SessionManagementService] - Reactivated existing Redis session: 3649E77DED619CB8E17E55CB567C9F1E
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 16:53:05.418] [http-nio-8080-exec-10] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 16:53:05.428] [http-nio-8080-exec-10] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 16:53:05.437] [http-nio-8080-exec-10] [INFO] [AuthService] - Refresh Token: 8e4ff1f6-7196-453c-9bb7-40764d4d5b9f
[2026-01-03 16:53:05.448] [http-nio-8080-exec-10] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 16:53:05.465] [http-nio-8080-exec-10] [INFO] [AuthController] - <<< Completed AuthController.login() in 209 ms
[2026-01-03 16:53:05.475] [http-nio-8080-exec-10] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0MzkzODUsImV4cCI6MTc2NzQ0MDI4NX0.wvxTzSiSsTzLI5cyTkxad6y31GvSeW1s7UhcEU22LM0, sessionId=3649E77DED619CB8E17E55CB567C9F1E, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 16:53:05.492] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Response Time : 256 ms
[2026-01-03 16:53:05.512] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 16:53:05 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=41526E263BF797540502312EF50C3DD7], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 16:53:13.456] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 16:53:13.466] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 16:53:13.479] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 16:53:13.495] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 16:53:13.512] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@19614457], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@63518bfc]
[2026-01-03 16:53:13.528] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 16:53:13.601] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 16:53:13.614] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Unknown Browser on Unknown OS
[2026-01-03 16:53:13.624] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Redis session created: 579AC52DFD8E4DFD7F980C309CA457C3 for user: deepak@gmail.com
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 16:53:13.639] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 16:53:13.658] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 16:53:13.682] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 9884114c-2022-4a62-a467-c061d797c7da
[2026-01-03 16:53:13.708] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 16:53:13.742] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 215 ms
[2026-01-03 16:53:13.765] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0MzkzOTMsImV4cCI6MTc2NzQ0MDI5M30.uH--JdvhodIkqWTysenQIjqxfNn6usdQRUdKdy6AitI, sessionId=579AC52DFD8E4DFD7F980C309CA457C3, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 16:53:13.780] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 268 ms
[2026-01-03 16:53:13.798] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 16:53:13 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB9389BD32600C4C6997998524C7476D], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 16:53:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 16:53:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 16:53:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 16:53:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 16:53:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 16:53:15.946] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 16:53:15.954] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 16:53:15.963] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 16:53:15.972] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 16:53:15.986] [http-nio-8080-exec-4] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@5e35412], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@40e1daca]
[2026-01-03 16:53:16.002] [http-nio-8080-exec-4] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 16:53:16.230] [http-nio-8080-exec-4] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 16:53:16.249] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Reactivated existing Redis session: 579AC52DFD8E4DFD7F980C309CA457C3
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 16:53:16.272] [http-nio-8080-exec-4] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 16:53:16.283] [http-nio-8080-exec-4] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 16:53:16.292] [http-nio-8080-exec-4] [INFO] [AuthService] - Refresh Token: 9f1a85db-5b18-44b5-81fa-252afcb84e85
[2026-01-03 16:53:16.314] [http-nio-8080-exec-4] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 16:53:16.373] [http-nio-8080-exec-4] [INFO] [AuthController] - <<< Completed AuthController.login() in 372 ms
[2026-01-03 16:53:16.392] [http-nio-8080-exec-4] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0MzkzOTYsImV4cCI6MTc2NzQ0MDI5Nn0.GT6Dy7B7dmAHs_n2zTOReW8LRged9p1W1eDl5iFYzcU, sessionId=579AC52DFD8E4DFD7F980C309CA457C3, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 16:53:16.423] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 438 ms
[2026-01-03 16:53:16.469] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 16:53:16 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB9389BD32600C4C6997998524C7476D], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 16:55:03 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 16:55:03 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 16:55:03 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 16:55:03 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 16:55:03 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 16:55:03 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 16:57:08 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 29719 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 16:57:08 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 16:57:08 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 16:57:08 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 16:57:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 16:57:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 16:57:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 55 ms. Found 1 Redis repository interface.
2026-01-03 16:57:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 16:57:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 16:57:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2026-01-03 16:57:09 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 16:57:09 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 16:57:09 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 16:57:09 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1085 ms
2026-01-03 16:57:09 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 16:57:09 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 16:57:10 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 16:57:10 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 16:57:10 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1a0d8fb1
2026-01-03 16:57:10 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 16:57:10 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 16:57:10 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 16:57:10 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 16:57:10 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 16:57:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 16:57:11 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 16:57:11 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 16:57:12 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 16:57:12 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 16:57:12 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 16:57:12 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 16:57:12 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 16:57:12 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 16:57:12 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 16:57:12 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 16:57:13 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 16:57:13 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.915 seconds (process running for 5.267)
[2026-01-03 16:57:13.207] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 16:57:13.214] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 16:57:13.223] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 16:57:13.518] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 16:57:13.519] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 16:57:13 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 16:57:13 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 16:57:13 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 16:57:13 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 16:57:13 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 16:57:19 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 16:57:19 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 16:57:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 16:57:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 16:57:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@496d89b4
2026-01-03 16:57:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@669a8d3e
2026-01-03 16:57:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 16:57:19 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2026-01-03 16:57:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 16:57:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 16:57:19 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 16:57:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 16:57:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 16:57:19.914] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 16:57:19.934] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 16:57:19.956] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 16:57:19.979] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 16:57:20.014] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@6027f23d], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@7831378b]
[2026-01-03 16:57:20.046] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 16:57:20.347] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 16:57:20.390] [http-nio-8080-exec-2] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 16:57:20.412] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Reactivated existing Redis session: 579AC52DFD8E4DFD7F980C309CA457C3
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 16:57:20.492] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 16:57:20.521] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 16:57:20.551] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 6f96bfdb-66a6-4a36-b61e-efdadc16d200
[2026-01-03 16:57:20.615] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 16:57:20.673] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 631 ms
[2026-01-03 16:57:20.684] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0Mzk2NDAsImV4cCI6MTc2NzQ0MDU0MH0.ngUEHyraMQhqdPTNLR5JPA5iJSdF-Q5IWJH9Nl3HECM, sessionId=579AC52DFD8E4DFD7F980C309CA457C3, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 16:57:20.698] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 694 ms
[2026-01-03 16:57:20.721] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 16:57:20 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB9389BD32600C4C6997998524C7476D], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 16:57:52 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 16:57:52 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 16:57:52 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 16:57:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 16:57:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 16:57:52.927] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 16:57:52.935] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 16:57:52.948] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 16:57:52.967] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 16:57:52.988] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@2166dcc8], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@25595c3c]
[2026-01-03 16:57:53.011] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 16:57:53.173] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 16:57:53.186] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 16:57:53.198] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Reactivated existing Redis session: 579AC52DFD8E4DFD7F980C309CA457C3
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 16:57:53.210] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 16:57:53.221] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 16:57:53.232] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: fa27d5f5-2431-4c28-9c76-8f1117b2c70e
[2026-01-03 16:57:53.241] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 16:57:53.253] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 244 ms
[2026-01-03 16:57:53.263] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0Mzk2NzMsImV4cCI6MTc2NzQ0MDU3M30.pKz8JwgEiAIkS-n4_RTYiEYnzS09uS69cNaKQOn44ko, sessionId=579AC52DFD8E4DFD7F980C309CA457C3, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 16:57:53.277] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 289 ms
[2026-01-03 16:57:53.294] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 16:57:53 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB9389BD32600C4C6997998524C7476D], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 17:00:52 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 17:00:52 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 17:00:52 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 17:00:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 17:00:52 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 17:00:52 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 17:00:55 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 30372 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 17:00:55 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 17:00:55 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 17:00:55 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 17:00:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 17:00:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 17:00:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 1 Redis repository interface.
2026-01-03 17:00:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 17:00:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 17:00:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2026-01-03 17:00:57 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 17:00:57 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 17:00:57 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 17:00:57 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1088 ms
2026-01-03 17:00:57 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 17:00:57 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 17:00:57 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 17:00:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 17:00:57 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@35ba210
2026-01-03 17:00:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 17:00:57 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 17:00:57 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 17:00:58 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 17:00:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 17:00:58 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 17:00:58 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 17:00:59 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 17:00:59 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 17:00:59 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 17:00:59 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 17:00:59 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 17:00:59 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 17:00:59 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 17:00:59 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 17:01:00 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 17:01:00 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.594 seconds (process running for 4.825)
[2026-01-03 17:01:00.127] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 17:01:00.136] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 17:01:00.145] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 17:01:00.421] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 17:01:00.422] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 17:01:00 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 17:01:00 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 17:01:00 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 17:01:00 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 17:01:00 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 17:01:04 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 17:01:04 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@e246927
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@337aafd
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 17:01:04 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 17:01:04.770] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 17:01:04.777] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 17:01:04.786] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 17:01:04.793] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 17:01:04.804] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@3a5fdb0d], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@4b63495]
[2026-01-03 17:01:04.813] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 17:01:04 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 17:01:04.992] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 17:01:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:01:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 17:01:05.039] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 17:01:05.064] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Reactivated existing Redis session: 3649E77DED619CB8E17E55CB567C9F1E
2026-01-03 17:01:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 17:01:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 17:01:05.131] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 17:01:05.139] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 17:01:05.150] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 79d11a11-7402-45c6-8f5d-3a1f5444b95f
[2026-01-03 17:01:05.162] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 17:01:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 17:01:05.184] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 373 ms
[2026-01-03 17:01:05.200] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0Mzk4NjUsImV4cCI6MTc2NzQ0MDc2NX0.HQPZO_89q41PxYutID4ZwgyAoZZYhfa4_4CKSZhNSRA, sessionId=3649E77DED619CB8E17E55CB567C9F1E, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 17:01:05.217] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 417 ms
[2026-01-03 17:01:05.233] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 17:01:05 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 17:01:05 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 17:01:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 17:01:05 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=41526E263BF797540502312EF50C3DD7], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 17:01:16.220] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 17:01:16.240] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 17:01:16.265] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 17:01:16.288] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 17:01:16.314] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@6b7afb4c], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@6f4562fb]
[2026-01-03 17:01:16.371] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 17:01:16.520] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 17:01:16.533] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 17:01:16.554] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Reactivated existing Redis session: 579AC52DFD8E4DFD7F980C309CA457C3
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 17:01:16.581] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 17:01:16.596] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 17:01:16.612] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: c4d3874b-4663-4e98-91e7-4ed135af2cd8
[2026-01-03 17:01:16.622] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 17:01:16.633] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 263 ms
[2026-01-03 17:01:16.640] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0Mzk4NzYsImV4cCI6MTc2NzQ0MDc3Nn0.oHi8FvW8nvS82dmlHPNT_p-1RyEGuzsc1aFoxPIOYI4, sessionId=579AC52DFD8E4DFD7F980C309CA457C3, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 17:01:16.650] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 336 ms
[2026-01-03 17:01:16.672] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 17:01:16 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB9389BD32600C4C6997998524C7476D], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 17:04:01 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 17:04:01 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 17:04:01 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 17:04:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 17:04:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 17:04:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 17:05:25 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 30985 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 17:05:25 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 17:05:25 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 17:05:25 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 17:05:25 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 17:05:25 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 17:05:25 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 1 Redis repository interface.
2026-01-03 17:05:25 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 17:05:25 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 17:05:25 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 5 JPA repository interfaces.
2026-01-03 17:05:26 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 17:05:26 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 17:05:26 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 17:05:26 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1064 ms
2026-01-03 17:05:26 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 17:05:26 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 17:05:26 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 17:05:26 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 17:05:26 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@61b286c6
2026-01-03 17:05:26 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 17:05:26 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 17:05:26 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 17:05:27 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 17:05:27 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 17:05:27 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 17:05:27 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 17:05:28 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 17:05:28 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 17:05:28 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 17:05:29 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 17:05:29 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 17:05:29 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 17:05:29 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 17:05:29 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 17:05:29 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 17:05:29 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.738 seconds (process running for 5.073)
[2026-01-03 17:05:29.546] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 17:05:29.580] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 17:05:29.617] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 17:05:29.944] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 17:05:29.945] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 17:05:29 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 17:05:29 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 17:05:30 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 17:05:30 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 17:05:30 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 17:05:34 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 17:05:34 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 17:05:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 17:05:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 17:05:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3c5e3929
2026-01-03 17:05:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@18797701
2026-01-03 17:05:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 17:05:34 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-01-03 17:05:34 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 17:05:34 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 17:05:34 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 17:05:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 17:05:34 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 17:05:34.957] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 17:05:34.980] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 17:05:35.003] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 17:05:35.026] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 17:05:35.054] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@624995cf], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@2dbfe82e]
[2026-01-03 17:05:35.079] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 17:05:35.340] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 17:05:35.362] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 17:05:35.380] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 17:05:35.460] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1)
[2026-01-03 17:05:35.531] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Reactivated existing Redis session: 3649E77DED619CB8E17E55CB567C9F1E
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 17:05:35.662] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 17:05:35.673] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 17:05:35.691] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 18c5d705-7928-43c5-89f5-8c83128e4fea
[2026-01-03 17:05:35.716] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 17:05:35.763] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 686 ms
[2026-01-03 17:05:35.793] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDAxMzUsImV4cCI6MTc2NzQ0MTAzNX0.i5YSRW6GyI-1HUlTXijC4szdH1E8EYUOOvdsbS8OQYg, sessionId=3649E77DED619CB8E17E55CB567C9F1E, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 17:05:35.816] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 770 ms
[2026-01-03 17:05:35.840] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 17:05:35 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=41526E263BF797540502312EF50C3DD7], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 17:05:42.106] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 17:05:42.115] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 17:05:42.125] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 17:05:42.136] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 17:05:42.148] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@3ac416df], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@3efb855f]
[2026-01-03 17:05:42.161] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 17:05:42.248] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 17:05:42.259] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 17:05:42.266] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Unknown Browser on Unknown OS
[2026-01-03 17:05:42.275] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1)
[2026-01-03 17:05:42.289] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Reactivated existing Redis session: 579AC52DFD8E4DFD7F980C309CA457C3
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 17:05:42.301] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 17:05:42.310] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 17:05:42.321] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: 9f41da54-5458-407d-9058-87d7a4e91bbb
[2026-01-03 17:05:42.331] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 17:05:42.344] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 184 ms
[2026-01-03 17:05:42.352] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDAxNDIsImV4cCI6MTc2NzQ0MTA0Mn0.UeA58KeWpndc-1XG14m5NJ6QDA5ZGdbc5tpM1wGqjSw, sessionId=579AC52DFD8E4DFD7F980C309CA457C3, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 17:05:42.363] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 215 ms
[2026-01-03 17:05:42.373] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 17:05:42 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB9389BD32600C4C6997998524C7476D], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 17:10:25 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 17:10:25 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 17:10:25 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 17:10:25 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 17:10:25 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 17:10:25 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 17:10:30 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 31752 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 17:10:30 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 17:10:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 17:10:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 17:10:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 17:10:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 17:10:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 84 ms. Found 1 Redis repository interface.
2026-01-03 17:10:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 17:10:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 17:10:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 5 JPA repository interfaces.
2026-01-03 17:10:31 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 17:10:31 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 17:10:31 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 17:10:31 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1359 ms
2026-01-03 17:10:31 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 17:10:31 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 17:10:31 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 17:10:32 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 17:10:32 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1502c884
2026-01-03 17:10:32 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 17:10:32 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 17:10:32 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 17:10:32 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 17:10:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 17:10:32 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 17:10:32 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 17:10:33 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 17:10:33 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 17:10:33 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 17:10:33 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 17:10:34 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 17:10:34 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 17:10:34 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 17:10:34 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 17:10:34 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 17:10:34 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.699 seconds (process running for 5.014)
[2026-01-03 17:10:34.479] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 17:10:34.486] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 17:10:34.494] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 17:10:34.748] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 17:10:34.748] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 17:10:34 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 17:10:34 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 17:10:34 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 17:10:34 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 17:10:34 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 17:12:49 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 17:12:49 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4b829bb3
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@43f09c23
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 17:12:49 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 17:12:49.539] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 17:12:49.548] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 17:12:49.557] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 17:12:49.567] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 17:12:49.580] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@3d585b49], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@ba3c356]
[2026-01-03 17:12:49.593] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 17:12:49.783] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:12:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 17:12:49.798] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 17:12:49.806] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 17:12:49.838] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - 📊 Found 0 active sessions in Redis for userId 1: []
[2026-01-03 17:12:49.839] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1)
[2026-01-03 17:12:49.885] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - New Redis session created: B6EE1577622B0F4A333CF35C89127BE9 for user: deepak@gmail.com
2026-01-03 17:12:50 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 17:12:50 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 17:12:50.028] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 17:12:50.049] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 17:12:50.073] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 6f97434b-6b54-4677-a55e-1764686d6713
[2026-01-03 17:12:50.096] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 17:12:50 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 17:12:50.146] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 553 ms
[2026-01-03 17:12:50.175] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDA1NjksImV4cCI6MTc2NzQ0MTQ2OX0.7Ao8awcIemvq2bhSycctlBQxK-tGII7zEZdY-bqpAYc, sessionId=B6EE1577622B0F4A333CF35C89127BE9, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 17:12:50.200] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 624 ms
[2026-01-03 17:12:50.221] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 17:12:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 17:12:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 17:12:50 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 17:13:11.078] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 17:13:11.092] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 17:13:11.107] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 17:13:11.122] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 17:13:11.135] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@346daac6], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@30522893]
[2026-01-03 17:13:11.146] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 17:13:11.251] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 17:13:11.262] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 17:13:11.269] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Unknown Browser on Unknown OS
[2026-01-03 17:13:11.279] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - 📊 Found 0 active sessions in Redis for userId 1: []
[2026-01-03 17:13:11.287] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1)
[2026-01-03 17:13:11.319] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - New Redis session created: 5F363913039D15E48D14BD7F3B91F70E for user: deepak@gmail.com
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 17:13:11.352] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 17:13:11.371] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 17:13:11.399] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: 832e1dcf-9883-49d5-b0b0-b1f3ab4397d7
[2026-01-03 17:13:11.434] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 17:13:11.472] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 327 ms
[2026-01-03 17:13:11.498] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDA1OTEsImV4cCI6MTc2NzQ0MTQ5MX0.sLdHNofDUummlUzki1x2DDyuecd_Ng3R9jilv4g4q-4, sessionId=5F363913039D15E48D14BD7F3B91F70E, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 17:13:11.527] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 393 ms
[2026-01-03 17:13:11.552] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 17:13:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 17:15:49 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 17:15:49 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 17:15:49 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 17:15:49 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 17:15:49 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 17:15:49 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 17:20:50 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 32909 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 17:20:50 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 17:20:50 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 17:20:50 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 17:20:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 17:20:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 17:20:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 1 Redis repository interface.
2026-01-03 17:20:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 17:20:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 17:20:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2026-01-03 17:20:51 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 17:20:51 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 17:20:51 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 17:20:51 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1349 ms
2026-01-03 17:20:51 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 17:20:51 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 17:20:52 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 17:20:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 17:20:52 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2edd7cb7
2026-01-03 17:20:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 17:20:52 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 17:20:52 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 17:20:53 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 17:20:53 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 17:20:53 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 17:20:53 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 17:20:54 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 17:20:54 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 17:20:54 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 17:20:54 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 17:20:54 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 17:20:54 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 17:20:54 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 17:20:54 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 17:20:54 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 17:20:54 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.946 seconds (process running for 5.264)
[2026-01-03 17:20:54.889] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 17:20:54.901] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 17:20:54.914] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 17:20:55.155] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 17:20:55.156] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 17:20:55 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 17:20:55 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 17:20:55 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 17:20:55 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 17:20:55 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 17:21:04 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 17:21:04 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7daa9fa3
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@229eb506
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 17:21:04 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 17:21:04.610] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 17:21:04.619] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 17:21:04.632] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 17:21:04.647] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 17:21:04.676] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@71b6c08a], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@b27e0a1]
[2026-01-03 17:21:04.705] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 17:21:04.935] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:21:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 17:21:04.948] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 17:21:04.955] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 17:21:05.010] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - 📊 Found 0 active sessions in Redis for userId 1: []
[2026-01-03 17:21:05.012] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1)
[2026-01-03 17:21:05.147] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Reactivated existing Redis session: B6EE1577622B0F4A333CF35C89127BE9
2026-01-03 17:21:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 17:21:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 17:21:05.337] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 17:21:05.356] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 17:21:05.383] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: b215c901-3885-42b3-8055-f8f34e039114
[2026-01-03 17:21:05.425] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 17:21:05 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 17:21:05.488] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 785 ms
[2026-01-03 17:21:05.525] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDEwNjUsImV4cCI6MTc2NzQ0MTk2NX0.xHLfTTR7U_1x7GlJdxCXEd0TWPLHV1JjQPMSObCrTpE, sessionId=B6EE1577622B0F4A333CF35C89127BE9, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 17:21:05.546] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 878 ms
[2026-01-03 17:21:05.561] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 17:21:05 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 17:21:05 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 17:21:05 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 17:21:13.029] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 17:21:13.037] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 17:21:13.052] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 17:21:13.068] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 17:21:13.090] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@67e864a1], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@63d7ec84]
[2026-01-03 17:21:13.116] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 17:21:13.295] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 17:21:13.307] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 17:21:13.316] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Unknown Browser on Unknown OS
[2026-01-03 17:21:13.325] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - 📊 Found 0 active sessions in Redis for userId 1: []
[2026-01-03 17:21:13.335] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1)
[2026-01-03 17:21:13.366] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Reactivated existing Redis session: 5F363913039D15E48D14BD7F3B91F70E
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 17:21:13.400] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 17:21:13.413] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 17:21:13.428] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: fc037cb4-a0a7-48ea-b0e8-3992a31f57fe
[2026-01-03 17:21:13.441] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 17:21:13.461] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 347 ms
[2026-01-03 17:21:13.475] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDEwNzMsImV4cCI6MTc2NzQ0MTk3M30.qQPKqHj5uPG4sRIwuHaDt4WR4LAZL9iDXa_RLLBrjj4, sessionId=5F363913039D15E48D14BD7F3B91F70E, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 17:21:13.490] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 400 ms
[2026-01-03 17:21:13.501] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 17:21:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 17:22:33 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 17:22:33 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 17:22:33 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 17:22:33 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 17:22:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 17:22:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 18:05:16 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 36104 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 18:05:16 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 18:05:16 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 18:05:16 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 18:05:17 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:05:17 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 18:05:17 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 1 Redis repository interface.
2026-01-03 18:05:17 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:05:17 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 18:05:17 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2026-01-03 18:05:17 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 18:05:17 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 18:05:17 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 18:05:17 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1080 ms
2026-01-03 18:05:18 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 18:05:18 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 18:05:18 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 18:05:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 18:05:18 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5b1c39ad
2026-01-03 18:05:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 18:05:18 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 18:05:18 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 18:05:19 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 18:05:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 18:05:19 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:05:19 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 18:05:20 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 18:05:20 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 18:05:20 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 18:05:20 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 18:05:20 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 18:05:20 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 18:05:20 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 18:05:20 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 18:05:21 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 18:05:21 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.829 seconds (process running for 5.338)
[2026-01-03 18:05:21.022] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 18:05:21.030] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 18:05:21.037] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 18:05:21.262] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 18:05:21.262] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 18:05:21 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 18:05:21 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 18:05:21 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 18:05:21 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 18:05:21 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 18:05:32 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 18:05:32 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 18:05:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 18:05:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 18:05:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6171dddc
2026-01-03 18:05:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6d17c633
2026-01-03 18:05:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 18:05:32 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-01-03 18:05:32 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 18:05:32 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 18:05:32 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 18:05:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 18:05:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 18:05:33.044] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 18:05:33.052] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 18:05:33.062] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 18:05:33.070] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 18:05:33.081] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@173dab5e], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@dde1820]
[2026-01-03 18:05:33.089] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 18:05:33.262] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 18:05:33.273] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 18:05:33.283] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 18:05:33.317] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 18:05:33.349] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - New Redis session created: 6151964E3AF14933A7F1A5A7D2605265 for user: deepak@gmail.com
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 18:05:33.433] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 18:05:33.442] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 18:05:33.451] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 004f57a2-e1c6-4abe-998d-adc3d9ac3286
[2026-01-03 18:05:33.463] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 18:05:33.482] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 394 ms
[2026-01-03 18:05:33.499] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDM3MzMsImV4cCI6MTc2NzQ0NDYzM30.d_TTeM5G8vvjkjiIr6rBY0SXpeBATeX72mnkc-dXT7g, sessionId=6151964E3AF14933A7F1A5A7D2605265, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 18:05:33.516] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 439 ms
[2026-01-03 18:05:33.547] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 18:05:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 18:05:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 18:05:42 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 18:05:42 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 18:05:42 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 18:05:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 18:05:42 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 18:05:42.867] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 18:05:42.880] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 18:05:42.902] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 18:05:42.926] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 18:05:42.944] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@24d58e70], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@20ea1e32]
[2026-01-03 18:05:42.959] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 18:05:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:05:42 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 18:05:43 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 18:05:43.075] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 18:05:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:05:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 18:05:43.086] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 18:05:43.094] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 18:05:43.106] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 18:05:43.127] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - New Redis session created: D62EF124A8B546FEAEE0275D162CB589 for user: deepak@gmail.com
2026-01-03 18:05:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 18:05:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 18:05:43.145] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 18:05:43.160] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 18:05:43.171] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: 36197c97-d9d1-40f5-844c-5f960f6e3d33
[2026-01-03 18:05:43.182] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 18:05:43 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 18:05:43.195] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 237 ms
[2026-01-03 18:05:43.205] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDM3NDMsImV4cCI6MTc2NzQ0NDY0M30.yusxUYxJe2lO17Y9J3ovv_PFeSIElVU6KG1QS6fSbuo, sessionId=D62EF124A8B546FEAEE0275D162CB589, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 18:05:43.213] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 269 ms
[2026-01-03 18:05:43.222] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 18:05:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 18:05:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 18:05:43 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 18:08:28 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 18:08:28 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 18:08:28 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:08:28 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:08:28 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 18:08:28 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 18:08:38 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 36853 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 18:08:38 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 18:08:38 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 18:08:38 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 18:08:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:08:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 18:08:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 54 ms. Found 1 Redis repository interface.
2026-01-03 18:08:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:08:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 18:08:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 5 JPA repository interfaces.
2026-01-03 18:08:40 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 18:08:40 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 18:08:40 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 18:08:40 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1842 ms
2026-01-03 18:08:40 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 18:08:40 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 18:08:41 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 18:08:41 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 18:08:41 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@59f4b797
2026-01-03 18:08:41 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 18:08:41 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 18:08:41 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 18:08:42 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 18:08:42 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 18:08:42 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:08:42 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 18:08:43 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 18:08:43 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 18:08:43 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 18:08:43 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 18:08:43 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 18:08:43 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 18:08:43 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 18:08:43 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 18:08:43 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 18:08:44 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.935 seconds (process running for 6.815)
[2026-01-03 18:08:44.185] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 18:08:44.205] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 18:08:44.224] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 18:08:44.253] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 18:08:44.273] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 18:08:44 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 18:08:44 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 18:08:44 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 18:08:44 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 18:08:44 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 18:08:49 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 18:08:49 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@796fcfc7
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@cd5f187
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 18:08:49 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 18:08:49.345] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 18:08:49.354] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 18:08:49.365] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 18:08:49.378] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 18:08:49.401] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@481851f6], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@47d6d48]
[2026-01-03 18:08:49.427] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 18:08:49.700] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 18:08:49.712] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 18:08:49.721] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 18:08:49.753] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 18:08:49.768] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - New Redis session created: 426CE15C32A84FDEA7577A86EF30A7BE for user: deepak@gmail.com
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 18:08:49.824] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 18:08:49.833] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 18:08:49.843] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: d9663727-0fc6-4a5a-bf7c-ba097cbf0118
[2026-01-03 18:08:49.860] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 18:08:49 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 18:08:49.902] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 477 ms
[2026-01-03 18:08:49.921] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDM5MjksImV4cCI6MTc2NzQ0NDgyOX0.eu1Kg1q7xd2-KfdXuxo_c4KLoKzIVe2-ZdxzWaBwcqk, sessionId=426CE15C32A84FDEA7577A86EF30A7BE, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 18:08:49.934] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 540 ms
[2026-01-03 18:08:49.960] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 18:08:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 18:08:50 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 18:08:50 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 18:08:54.635] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 18:08:54.647] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 18:08:54.661] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 18:08:54.678] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 18:08:54.697] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@64fe8bcf], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@60c10388]
[2026-01-03 18:08:54.720] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 18:08:54.873] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 18:08:54.885] [http-nio-8080-exec-2] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 18:08:54.893] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 18:08:54.909] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 18:08:54.966] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - New Redis session created: 7F80728D62044C989F810C2F5AF2DE58 for user: deepak@gmail.com
2026-01-03 18:08:54 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 18:08:55 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 18:08:55.006] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 18:08:55.023] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 18:08:55.045] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: fd8cc2bc-a7bd-4a16-ac10-18fce75516cc
[2026-01-03 18:08:55.060] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 18:08:55 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 18:08:55.088] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 370 ms
[2026-01-03 18:08:55.116] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDM5MzQsImV4cCI6MTc2NzQ0NDgzNH0.W4q_-H9RYMn3IZ-lzG9T3N-cd9d6zqE5dZOMd9EBKnI, sessionId=7F80728D62044C989F810C2F5AF2DE58, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 18:08:55.133] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 436 ms
[2026-01-03 18:08:55.156] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 18:08:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 18:08:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 18:08:55 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 18:10:41 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 18:10:41 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 18:10:41 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:10:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:10:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 18:10:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 18:10:43 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 37421 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 18:10:43 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 18:10:43 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 18:10:43 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 18:10:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:10:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 18:10:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 149 ms. Found 1 Redis repository interface.
2026-01-03 18:10:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:10:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 18:10:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 5 JPA repository interfaces.
2026-01-03 18:10:45 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 18:10:45 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 18:10:45 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 18:10:45 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1333 ms
2026-01-03 18:10:45 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 18:10:45 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 18:10:45 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 18:10:45 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 18:10:46 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@60c69b5f
2026-01-03 18:10:46 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 18:10:46 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 18:10:46 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 18:10:46 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 18:10:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 18:10:46 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:10:46 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 18:10:47 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 18:10:47 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 18:10:47 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 18:10:48 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 18:10:48 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 18:10:48 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 18:10:48 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 18:10:48 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 18:10:48 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 18:10:48 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.414 seconds (process running for 5.739)
[2026-01-03 18:10:48.763] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 18:10:48.771] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 18:10:48.782] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 18:10:48.807] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 18:10:48.827] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 18:10:48 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 18:10:48 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 18:10:48 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 18:10:49 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 18:10:49 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 18:10:53 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 18:10:53 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 18:10:53 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:10:53 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:10:53 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 18:10:53 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 18:11:55 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 37884 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 18:11:55 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 18:11:55 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 18:11:55 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 18:11:55 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:11:55 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 18:11:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 1 Redis repository interface.
2026-01-03 18:11:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:11:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 18:11:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2026-01-03 18:11:56 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 18:11:56 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 18:11:56 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 18:11:56 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1141 ms
2026-01-03 18:11:57 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 18:11:57 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 18:11:57 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 18:11:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 18:11:57 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1333cc0a
2026-01-03 18:11:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 18:11:57 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 18:11:57 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 18:11:57 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:11:57 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 18:11:58 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 18:11:58 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:11:58 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:11:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 18:11:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 18:11:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 18:11:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 18:11:58 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 18:11:58 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:11:58 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 18:11:58 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 18:11:58 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 18:11:59 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 18:11:59 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 18:11:59 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 18:11:59 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 18:11:59 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 18:11:59 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 18:11:59 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 18:11:59 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.505 seconds (process running for 4.907)
[2026-01-03 18:11:59.824] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 18:11:59.834] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 18:11:59.847] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 18:11:59.869] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 18:11:59.888] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 18:11:59 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 18:11:59 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 18:12:00 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 18:12:00 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 18:12:00 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 18:12:06 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 18:12:06 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3ab20a23
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4a43f9d3
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 18:12:06 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 18:12:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 18:12:06.719] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 18:12:06.740] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 18:12:06.764] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 18:12:06.793] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 18:12:06.838] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@76a42a15], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@3fac3d4d]
[2026-01-03 18:12:06.870] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 18:12:07.309] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 18:12:07.321] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 18:12:07.332] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 18:12:07.376] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 18:12:07.398] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - New Redis session created: 1A4CD2B0F4E74FC59E8A345E9615639B for user: deepak@gmail.com
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 18:12:07.469] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 18:12:07.481] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 18:12:07.506] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 014e63e8-dbb3-4c09-9b29-4b772699deff
[2026-01-03 18:12:07.533] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 18:12:07.563] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 696 ms
[2026-01-03 18:12:07.591] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDQxMjcsImV4cCI6MTc2NzQ0NTAyN30.Fm2D2VEQ0v_gfnGXXAK18KPkSWBi9pKQ0Pdf5PzQ33I, sessionId=1A4CD2B0F4E74FC59E8A345E9615639B, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 18:12:07.608] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 782 ms
[2026-01-03 18:12:07.625] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 18:12:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 18:12:13.302] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 18:12:13.314] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 18:12:13.325] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 18:12:13.337] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 18:12:13.347] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@5a62f98d], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@5e5d6619]
[2026-01-03 18:12:13.358] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 18:12:13.596] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 18:12:13.612] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 18:12:13.625] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 18:12:13.651] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 18:12:13.687] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - New Redis session created: 262EBCACACF248DD8A1D769EE20BAD10 for user: deepak@gmail.com
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 18:12:13.714] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 18:12:13.736] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 18:12:13.755] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: be8ee2de-a928-4e82-957d-0384ed0d64c4
[2026-01-03 18:12:13.772] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 18:12:13.792] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 435 ms
[2026-01-03 18:12:13.818] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDQxMzMsImV4cCI6MTc2NzQ0NTAzM30.y5UGCdoevv2I3jqAmofldtG91HT3GbbJTxCuCg6rw1g, sessionId=262EBCACACF248DD8A1D769EE20BAD10, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 18:12:13.849] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 502 ms
[2026-01-03 18:12:13.880] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 18:12:13 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 18:15:54 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 18:15:54 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 18:15:54 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:15:54 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:15:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 18:15:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 18:25:06 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 38912 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 18:25:06 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 18:25:06 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 18:25:06 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 18:25:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:25:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 18:25:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 1 Redis repository interface.
2026-01-03 18:25:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:25:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 18:25:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2026-01-03 18:25:07 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 18:25:07 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 18:25:07 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 18:25:07 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1132 ms
2026-01-03 18:25:08 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 18:25:08 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 18:25:08 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 18:25:08 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 18:25:08 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7937980
2026-01-03 18:25:08 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 18:25:08 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 18:25:08 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 18:25:09 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 18:25:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 18:25:09 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:25:09 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 18:25:10 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 18:25:10 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 18:25:10 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 18:25:10 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 18:25:10 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 18:25:10 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 18:25:10 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 18:25:10 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 18:25:11 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 18:25:11 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.12 seconds (process running for 5.575)
[2026-01-03 18:25:11.501] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 18:25:11.572] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 18:25:11.597] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 18:25:11.624] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 18:25:11.644] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 18:25:11 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 18:25:11 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 18:25:11 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 18:25:11 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 18:25:11 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 18:25:39 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 18:25:39 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@549fbbab
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@24f3b650
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 18:25:39 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 18:25:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 18:25:39.930] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 18:25:39.940] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 18:25:39.951] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 18:25:39.962] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 18:25:39.981] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@534c14b1], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@47703096]
[2026-01-03 18:25:40.006] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 18:25:40 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:25:40 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 18:25:40 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 18:25:40.376] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 18:25:40 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:25:40 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 18:25:40.424] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 18:25:40.446] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 18:25:40.540] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 18:25:40.581] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - New Redis session created: 13EF140577C84B38863778F75898D8D0 for user: deepak@gmail.com
2026-01-03 18:25:40 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 18:25:40 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 18:25:40.767] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 18:25:40.785] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 18:25:40.813] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 69a7984a-956d-4e55-8593-76f89b17b86d
[2026-01-03 18:25:40.849] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 18:25:40 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 18:25:40.902] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 899 ms
[2026-01-03 18:25:40.930] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDQ5NDAsImV4cCI6MTc2NzQ0NTg0MH0.qHfEJ6G7fX17J297FhGuwctSCsUwxB-ioAkfqA9b_Fc, sessionId=13EF140577C84B38863778F75898D8D0, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 18:25:40.954] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 978 ms
[2026-01-03 18:25:40.970] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 18:25:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 18:25:40 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 18:25:41 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 18:31:34.605] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 18:31:34.617] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 18:31:34.627] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 18:31:34.640] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 18:31:34.654] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@68a8b9ae], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@6c972063]
[2026-01-03 18:31:34.677] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 18:31:34.801] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 18:31:34.819] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 18:31:34.840] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 18:31:34.879] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 18:31:34.943] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - New Redis session created: E43947DE7BCE4DC5A337936A4EE115FA for user: deepak@gmail.com
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 18:31:34 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 18:31:35.000] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 18:31:35.044] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 18:31:35.075] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: c7d76701-737a-477c-a1fc-5d4d7c823476
[2026-01-03 18:31:35.093] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 18:31:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 18:31:35.112] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 437 ms
[2026-01-03 18:31:35.140] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDUyOTQsImV4cCI6MTc2NzQ0NjE5NH0.9Nr2ImV7r4gPVHPW3sBe_fYxU_8NLQpZqryNbyaud7A, sessionId=E43947DE7BCE4DC5A337936A4EE115FA, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 18:31:35.164] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 510 ms
[2026-01-03 18:31:35.203] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 18:31:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 18:31:35 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 18:31:35 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 18:32:42.444] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 18:32:42.475] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 18:32:42.506] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 18:32:42.544] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 18:32:42.576] [http-nio-8080-exec-7] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1806525b], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@1c39c583]
[2026-01-03 18:32:42.606] [http-nio-8080-exec-7] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 18:32:42.710] [http-nio-8080-exec-7] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 18:32:42.722] [http-nio-8080-exec-7] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 18:32:42.734] [http-nio-8080-exec-7] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 18:32:42.751] [http-nio-8080-exec-7] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 18:32:42.785] [http-nio-8080-exec-7] [INFO] [SessionManagementService] - New Redis session created: 4976137CD0D44DD38F52B6CDF431472B for user: deepak@gmail.com
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 18:32:42.821] [http-nio-8080-exec-7] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 18:32:42.853] [http-nio-8080-exec-7] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 18:32:42.882] [http-nio-8080-exec-7] [INFO] [AuthService] - Refresh Token: 0a824acb-2048-44b6-b381-e9bad59831a4
[2026-01-03 18:32:42.916] [http-nio-8080-exec-7] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 18:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 18:32:42.942] [http-nio-8080-exec-7] [INFO] [AuthController] - <<< Completed AuthController.login() in 337 ms
[2026-01-03 18:32:42.971] [http-nio-8080-exec-7] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDUzNjIsImV4cCI6MTc2NzQ0NjI2Mn0.FILCeOpaurWG6koBPN0R4RmzXbHgOjENQ9Ub4nVtHXk, sessionId=4976137CD0D44DD38F52B6CDF431472B, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 18:32:43.004] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 428 ms
[2026-01-03 18:32:43.037] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 18:32:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 18:32:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 18:32:43 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 18:33:08 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 18:33:08 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 18:33:08 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:33:08 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:33:08 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 18:33:08 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 18:58:30 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 40943 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 18:58:30 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 18:58:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 18:58:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 18:58:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:58:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 18:58:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 1 Redis repository interface.
2026-01-03 18:58:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:58:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 18:58:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2026-01-03 18:58:31 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 18:58:31 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 18:58:31 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 18:58:31 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1243 ms
2026-01-03 18:58:31 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 18:58:31 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 18:58:32 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 18:58:32 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 18:58:32 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@59f4b797
2026-01-03 18:58:32 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 18:58:32 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 18:58:32 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 18:58:33 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 18:58:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 18:58:33 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:58:33 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 18:58:33 [restartedMain] ERROR o.s.b.t.s.DeferredServletContainerInitializers - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter' defined in file [/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main/com/cloudkeeper/cloudbalance_backend/config/JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'sessionManagementService' defined in file [/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main/com/cloudkeeper/cloudbalance_backend/service/SessionManagementService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.data.redis.core.RedisTemplate<java.lang.Object, java.lang.Object>' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2026-01-03 18:58:34 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2026-01-03 18:58:34 [restartedMain] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [lettuce-timer-3-1] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/java.lang.Thread.sleepNanos0(Native Method)
 java.base/java.lang.Thread.sleepNanos(Thread.java:509)
 java.base/java.lang.Thread.sleep(Thread.java:540)
 io.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:598)
 io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:494)
 io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
 java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 18:58:34 [restartedMain] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [HikariPool-1:housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:271)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1803)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1166)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:883)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1016)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
 java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 18:58:34 [restartedMain] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [HikariPool-1:connection-adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:271)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1803)
 java.base/java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:460)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1015)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
 java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 18:58:34 [restartedMain] WARN  o.s.b.w.s.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2026-01-03 18:58:34 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:58:34 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:58:34 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 18:58:34 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 18:58:34 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-03 18:58:34 [restartedMain] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in com.cloudkeeper.cloudbalance_backend.service.SessionManagementService required a bean of type 'org.springframework.data.redis.core.RedisTemplate' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.data.redis.core.RedisTemplate' in your configuration.

2026-01-03 18:59:44 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 41374 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 18:59:44 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 18:59:44 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 18:59:44 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 18:59:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:59:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 18:59:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 69 ms. Found 1 Redis repository interface.
2026-01-03 18:59:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 18:59:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 18:59:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2026-01-03 18:59:45 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 18:59:45 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 18:59:45 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 18:59:45 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1124 ms
2026-01-03 18:59:46 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 18:59:46 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 18:59:46 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 18:59:46 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 18:59:46 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@81dcb38
2026-01-03 18:59:46 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 18:59:46 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 18:59:46 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 18:59:47 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 18:59:47 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:59:47 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 18:59:47 [restartedMain] ERROR o.s.b.t.s.DeferredServletContainerInitializers - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter' defined in file [/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main/com/cloudkeeper/cloudbalance_backend/config/JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 3: Error creating bean with name 'sessionManagementService' defined in file [/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main/com/cloudkeeper/cloudbalance_backend/service/SessionManagementService.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'org.springframework.data.redis.core.RedisTemplate<java.lang.Object, java.lang.Object>' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2026-01-03 18:59:47 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2026-01-03 18:59:47 [restartedMain] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [lettuce-timer-3-1] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/java.lang.Thread.sleepNanos0(Native Method)
 java.base/java.lang.Thread.sleepNanos(Thread.java:509)
 java.base/java.lang.Thread.sleep(Thread.java:540)
 io.netty.util.HashedWheelTimer$Worker.waitForNextTick(HashedWheelTimer.java:598)
 io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:494)
 io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
 java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 18:59:47 [restartedMain] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [HikariPool-1:housekeeper] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:271)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1803)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1166)
 java.base/java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:883)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1016)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
 java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 18:59:47 [restartedMain] WARN  o.a.c.loader.WebappClassLoaderBase - The web application [api#v1] appears to have started a thread named [HikariPool-1:connection-adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base/jdk.internal.misc.Unsafe.park(Native Method)
 java.base/java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:271)
 java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1803)
 java.base/java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:460)
 java.base/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1015)
 java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
 java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 18:59:47 [restartedMain] WARN  o.s.b.w.s.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2026-01-03 18:59:47 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 18:59:47 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 18:59:47 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 18:59:47 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 18:59:48 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-03 18:59:48 [restartedMain] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in com.cloudkeeper.cloudbalance_backend.service.SessionManagementService required a bean of type 'org.springframework.data.redis.core.RedisTemplate' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.data.redis.core.RedisTemplate' in your configuration.

2026-01-03 19:00:30 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 41803 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 19:00:30 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 19:00:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 19:00:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 19:00:31 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:00:31 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 19:00:31 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 57 ms. Found 1 Redis repository interface.
2026-01-03 19:00:31 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:00:31 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 19:00:31 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2026-01-03 19:00:32 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 19:00:32 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 19:00:32 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 19:00:32 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1241 ms
2026-01-03 19:00:32 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 19:00:32 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 19:00:32 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 19:00:32 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 19:00:32 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@137f8641
2026-01-03 19:00:32 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 19:00:32 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 19:00:32 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 19:00:33 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 19:00:33 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 19:00:33 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:00:33 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 19:00:34 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 19:00:34 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 19:00:34 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 19:00:34 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 19:00:34 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 19:00:34 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 19:00:34 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 19:00:34 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 19:00:35 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 19:00:35 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.959 seconds (process running for 5.373)
[2026-01-03 19:00:35.395] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 19:00:35.475] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 19:00:35.493] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 19:00:35.521] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 19:00:35.541] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 19:00:35 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 19:00:35 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 19:00:35 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 19:00:35 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 19:00:35 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 19:00:42 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 19:00:42 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@50c3fa86
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@12fddaa5
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 19:00:42 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:00:42.252] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:00:42.261] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:00:42.268] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 19:00:42.276] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 19:00:42.287] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@2eaab92c], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@4e2765a6]
[2026-01-03 19:00:42.296] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:00:42.453] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:00:42.466] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:00:42.475] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 19:00:42.488] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 19:00:42.530] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - New Redis session created: 3876EB5ABDA6443B8ED9A05CFF310720 for user: deepak@gmail.com
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 19:00:42.617] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 19:00:42.630] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 19:00:42.653] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 6fc10ae6-8033-4e25-af3b-cc3c819a3cb2
[2026-01-03 19:00:42.683] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 19:00:42.739] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 444 ms
[2026-01-03 19:00:42.774] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDcwNDIsImV4cCI6MTc2NzQ0Nzk0Mn0.lDmWwMoFt7EuDdzzKsQ4ShnuNQdpEC6FsnmMFMqw-OA, sessionId=3876EB5ABDA6443B8ED9A05CFF310720, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 19:00:42.794] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 510 ms
[2026-01-03 19:00:42.814] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 19:00:42 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 19:00:50 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:00:50 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:00:50 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:00:50 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:00:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:00:50 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:00:50.887] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:00:50.898] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:00:50.906] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 19:00:50.915] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 19:00:50.927] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@7e7073c9], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@7a4ff8df]
[2026-01-03 19:00:50.942] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:00:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:00:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:00:51 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:00:51.067] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:00:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:00:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:00:51.078] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:00:51.085] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 19:00:51.095] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 19:00:51.111] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - New Redis session created: 2B28C7BF05694F7CB82F5BB36E22A678 for user: deepak@gmail.com
2026-01-03 19:00:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 19:00:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 19:00:51.142] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 19:00:51.159] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 19:00:51.175] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: 18768a80-7e09-4d88-adc1-6f696724ef70
[2026-01-03 19:00:51.189] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 19:00:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 19:00:51.204] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 263 ms
[2026-01-03 19:00:51.211] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDcwNTEsImV4cCI6MTc2NzQ0Nzk1MX0.AtRT_At3Tphzi2WeVR0k7gGzGKjKWE617pll-ky5EJo, sessionId=2B28C7BF05694F7CB82F5BB36E22A678, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 19:00:51.219] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 292 ms
[2026-01-03 19:00:51.227] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 19:00:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:00:51 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 19:00:51 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 19:06:06 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 19:06:06 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 19:06:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:06:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:06:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 19:06:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 19:12:19 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 42989 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 19:12:19 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 19:12:19 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 19:12:19 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 19:12:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:12:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 19:12:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 55 ms. Found 1 Redis repository interface.
2026-01-03 19:12:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:12:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 19:12:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2026-01-03 19:12:21 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 19:12:21 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 19:12:21 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 19:12:21 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1328 ms
2026-01-03 19:12:21 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 19:12:21 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 19:12:21 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 19:12:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 19:12:21 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6d8fe204
2026-01-03 19:12:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 19:12:21 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 19:12:21 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 19:12:22 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 19:12:22 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 19:12:22 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:12:22 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 19:12:23 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 19:12:23 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 19:12:23 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 19:12:23 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 19:12:23 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 19:12:23 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 19:12:23 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 19:12:24 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 19:12:24 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 19:12:24 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.101 seconds (process running for 5.633)
[2026-01-03 19:12:24.531] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 19:12:24.546] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 19:12:24.563] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 19:12:24.586] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 19:12:24.598] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 19:12:24 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 19:12:24 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 19:12:24 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 19:12:24 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 19:12:24 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 19:12:31 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 19:12:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@59ddbfef
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@669667
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 19:12:31 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:12:31.794] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:12:31.803] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:12:31.813] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 19:12:31.825] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 19:12:31.845] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@6cbda24a], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@7cb69a05]
[2026-01-03 19:12:31.868] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:12:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:12:32 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:12:32.073] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:12:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:12:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:12:32.087] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:12:32.100] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 19:12:32.129] [http-nio-8080-exec-1] [ERROR] [SessionManagementService] - Error fetching sessions for userId 1: Could not read JSON:Unexpected character ('B' (code 66)) in numeric value: Exponent indicator not followed by a digit
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 6] 
[2026-01-03 19:12:32.156] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 19:12:32.310] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - New Redis session created: 2FB35ED097934D908E2FF212885BB9C4 for user: deepak@gmail.com
2026-01-03 19:12:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 19:12:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 19:12:32.429] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 19:12:32.437] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 19:12:32.444] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 08a75f25-0046-4728-be25-b2d7a701e85b
[2026-01-03 19:12:32.454] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 19:12:32 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 19:12:32.472] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 607 ms
[2026-01-03 19:12:32.487] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDc3NTIsImV4cCI6MTc2NzQ0ODY1Mn0.qEDmaCJTN-2IHm6tbNNroW6cxXQoXk6iU1tlszqcBbE, sessionId=2FB35ED097934D908E2FF212885BB9C4, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 19:12:32.504] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 664 ms
[2026-01-03 19:12:32.527] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 19:12:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:12:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 19:12:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 19:12:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:12:39 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:12:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:12:39 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:12:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:12:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:12:39.915] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:12:39.936] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:12:39.950] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 19:12:39.967] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 19:12:39.988] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1806525b], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@1c39c583]
[2026-01-03 19:12:40.005] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:12:40.142] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:12:40.155] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:12:40.166] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 19:12:40.179] [http-nio-8080-exec-3] [ERROR] [SessionManagementService] - Error fetching sessions for userId 1: Could not read JSON:Unexpected character ('B' (code 66)) in numeric value: Exponent indicator not followed by a digit
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 6] 
[2026-01-03 19:12:40.195] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 19:12:40.221] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - New Redis session created: 9848C9FEB9124E33A68C0B84998B6AD4 for user: deepak@gmail.com
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 19:12:40.253] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 19:12:40.282] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 19:12:40.313] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: 07c3dac3-af5c-4e5f-9dc6-e79481015e65
[2026-01-03 19:12:40.334] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 19:12:40.363] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 359 ms
[2026-01-03 19:12:40.388] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDc3NjAsImV4cCI6MTc2NzQ0ODY2MH0.PQHZc-hrYKV2bzvWCN59sXqCaUWJK0QAXmNmYQgtLRE, sessionId=9848C9FEB9124E33A68C0B84998B6AD4, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 19:12:40.407] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 420 ms
[2026-01-03 19:12:40.420] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 19:12:40 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 19:13:01 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 19:13:01 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 19:13:01 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:13:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:13:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 19:13:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 19:25:46 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 44090 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 19:25:46 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 19:25:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 19:25:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 19:25:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:25:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 19:25:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 1 Redis repository interface.
2026-01-03 19:25:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:25:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 19:25:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2026-01-03 19:25:47 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 19:25:47 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 19:25:47 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 19:25:47 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1066 ms
2026-01-03 19:25:48 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 19:25:48 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 19:25:48 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 19:25:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 19:25:48 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@720a810d
2026-01-03 19:25:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 19:25:48 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 19:25:48 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 19:25:49 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 19:25:49 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 19:25:49 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:25:49 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 19:25:50 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 19:25:50 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 19:25:50 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 19:25:50 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 19:25:51 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 19:25:51 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 19:25:51 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 19:25:51 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 19:25:51 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 19:25:51 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.216 seconds (process running for 5.655)
[2026-01-03 19:25:51.763] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 19:25:51.845] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 19:25:51.868] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 19:25:51.900] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 19:25:51.924] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 19:25:52 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 19:25:52 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 19:25:52 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 19:25:52 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 19:25:52 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 19:25:58 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 19:25:58 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7d5f841a
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@52cd66e8
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 19:25:58 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:25:58.389] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:25:58.401] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:25:58.414] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 19:25:58.445] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 19:25:58.481] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@47d6d48], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@1c21931d]
[2026-01-03 19:25:58.509] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:25:58.724] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:25:58 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:25:58.738] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:25:58.746] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 19:25:58.845] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Retrieved 4 active sessions for userId: 1
[2026-01-03 19:25:58.846] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 4 active sessions (max allowed: 1) : [3876EB5ABDA6443B8ED9A05CFF310720, 2B28C7BF05694F7CB82F5BB36E22A678, 2FB35ED097934D908E2FF212885BB9C4, 9848C9FEB9124E33A68C0B84998B6AD4]
[2026-01-03 19:25:58.879] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - Max sessions (1) reached for user: deepak@gmail.com
[2026-01-03 19:25:58.913] [http-nio-8080-exec-1] [ERROR] [SessionManagementService] - ❌ Session limit reached! User: deepak@gmail.com, Active: 4, Max: 1
[2026-01-03 19:25:58.971] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Retrieved 4 active sessions for userId: 1
[2026-01-03 19:25:59.005] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 498 ms
[2026-01-03 19:25:59.033] [http-nio-8080-exec-1] [ERROR] [HttpLoggingAspect] - Request failed after 560 ms : Transaction silently rolled back because it has been marked as rollback-only
org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:803)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:684)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:406)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.login(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.login(AuthController.java:41)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.LoggingAspect.logExecutionTime(LoggingAspect.java:36)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 19:25:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleGlobalException(Exception)
[2026-01-03 19:25:59.061] [http-nio-8080-exec-1] [ERROR] [GlobalExceptionHandler] - Unexpected error: 
org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:803)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:684)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:406)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.login(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.login(AuthController.java:41)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.LoggingAspect.logExecutionTime(LoggingAspect.java:36)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 19:25:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:25:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=An unexpected error occurred)]
2026-01-03 19:25:59 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only]
2026-01-03 19:25:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:34:31.226] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:34:31.238] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:34:31.252] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 19:34:31.269] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 19:34:31.290] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@64fe8bcf], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@60c10388]
[2026-01-03 19:34:31.311] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:34:31.500] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:34:31.518] [http-nio-8080-exec-2] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:34:31.529] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 19:34:31.542] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Retrieved 0 active sessions for userId: 1
[2026-01-03 19:34:31.558] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 19:34:31.621] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - New Redis session created: 910B025690304629A03C857FFC7EE08C for user: deepak@gmail.com
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 19:34:31.691] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 19:34:31.707] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 19:34:31.725] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: 1e33abac-3275-4c5e-b1ea-a3d197c8286b
[2026-01-03 19:34:31.743] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 19:34:31.773] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 463 ms
[2026-01-03 19:34:31.800] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDkwNzEsImV4cCI6MTc2NzQ0OTk3MX0.GZ2E4gUSC1po-nWDMhVtMHqUdu4TKGYexoYZKv3gy4Y, sessionId=910B025690304629A03C857FFC7EE08C, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 19:34:31.827] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 537 ms
[2026-01-03 19:34:31.851] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 19:34:31 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:35:30.698] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:35:30.708] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:35:30.719] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 19:35:30.733] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 19:35:30.750] [http-nio-8080-exec-4] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@149f8e11], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@10a0085a]
[2026-01-03 19:35:30.770] [http-nio-8080-exec-4] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:35:30.903] [http-nio-8080-exec-4] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:35:30 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:35:30.916] [http-nio-8080-exec-4] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:35:30.930] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 19:35:30.952] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 19:35:30.981] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 1 active sessions (max allowed: 1) : [910B025690304629A03C857FFC7EE08C]
[2026-01-03 19:35:31.011] [http-nio-8080-exec-4] [WARN] [SessionManagementService] - Max sessions (1) reached for user: deepak@gmail.com
[2026-01-03 19:35:31.032] [http-nio-8080-exec-4] [ERROR] [SessionManagementService] - ❌ Session limit reached! User: deepak@gmail.com, Active: 1, Max: 1
[2026-01-03 19:35:31.049] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 19:35:31.066] [http-nio-8080-exec-4] [INFO] [AuthController] - <<< Completed AuthController.login() in 298 ms
[2026-01-03 19:35:31.079] [http-nio-8080-exec-4] [ERROR] [HttpLoggingAspect] - Request failed after 330 ms : Transaction silently rolled back because it has been marked as rollback-only
org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:803)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:684)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:406)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.login(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.login(AuthController.java:41)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.LoggingAspect.logExecutionTime(LoggingAspect.java:36)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 19:35:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleGlobalException(Exception)
[2026-01-03 19:35:31.126] [http-nio-8080-exec-4] [ERROR] [GlobalExceptionHandler] - Unexpected error: 
org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:803)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:684)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:406)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.login(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.login(AuthController.java:41)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.LoggingAspect.logExecutionTime(LoggingAspect.java:36)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 19:35:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:35:31 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=An unexpected error occurred)]
2026-01-03 19:35:31 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only]
2026-01-03 19:35:31 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2026-01-03 19:40:04 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 19:40:04 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 19:40:04 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:40:04 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:40:04 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 19:40:04 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 19:40:06 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 45288 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 19:40:06 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 19:40:06 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 19:40:06 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 19:40:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:40:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 19:40:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 1 Redis repository interface.
2026-01-03 19:40:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:40:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 19:40:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2026-01-03 19:40:08 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 19:40:08 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 19:40:08 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 19:40:08 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1138 ms
2026-01-03 19:40:08 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 19:40:08 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 19:40:08 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 19:40:08 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 19:40:08 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@239a5d51
2026-01-03 19:40:08 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 19:40:08 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 19:40:08 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 19:40:09 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 19:40:09 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 19:40:09 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:40:09 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 19:40:10 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 19:40:10 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 19:40:10 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 19:40:10 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 19:40:11 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 19:40:11 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 19:40:11 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 19:40:11 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 19:40:11 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 19:40:11 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.133 seconds (process running for 5.43)
[2026-01-03 19:40:11.665] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 19:40:11.698] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 19:40:11.719] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 19:40:11.750] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 19:40:11.771] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 19:40:11 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 19:40:11 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 19:40:11 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 19:40:11 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 19:40:11 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 19:41:32 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 19:41:32 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@34804acf
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4b7d2619
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 19:41:32 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:41:32 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:41:32.666] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:41:32.777] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:41:32.810] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 19:41:32.838] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 19:41:32.869] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@650c1160], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@742c0f86]
[2026-01-03 19:41:32.888] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:41:33.150] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:41:33.161] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:41:33.169] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 19:41:33.206] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Retrieved 0 active sessions for userId: 1
[2026-01-03 19:41:33.206] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 19:41:33.249] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - New Redis session created: 1CC1124D92004F32ADC00F875026F7AA for user: deepak@gmail.com
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 19:41:33.326] [http-nio-8080-exec-1] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 19:41:33.335] [http-nio-8080-exec-1] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 19:41:33.343] [http-nio-8080-exec-1] [INFO] [AuthService] - Refresh Token: 5eb5e8a5-212a-4fb1-b3f9-311347a9eb06
[2026-01-03 19:41:33.354] [http-nio-8080-exec-1] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 19:41:33.389] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 504 ms
[2026-01-03 19:41:33.400] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDk0OTMsImV4cCI6MTc2NzQ1MDM5M30.pEPKrsBS3FbYRossEhhGeYtrBUdpKcoUzqMk0SA2_o8, sessionId=1CC1124D92004F32ADC00F875026F7AA, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 19:41:33.408] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 547 ms
[2026-01-03 19:41:33.420] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 19:41:33 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:41:37.494] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:41:37.503] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:41:37.515] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 19:41:37.530] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 19:41:37.553] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@598aa5b9], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@5db52a50]
[2026-01-03 19:41:37.582] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:41:37.745] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:41:37 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:41:37.756] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:41:37.766] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 19:41:37.787] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 19:41:37.805] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 1 active sessions (max allowed: 1) : [1CC1124D92004F32ADC00F875026F7AA]
[2026-01-03 19:41:37.832] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - Max sessions (1) reached for user: deepak@gmail.com
[2026-01-03 19:41:37.861] [http-nio-8080-exec-3] [ERROR] [SessionManagementService] - ❌ Session limit reached! User: deepak@gmail.com, Active: 1, Max: 1
[2026-01-03 19:41:37.894] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 19:41:37.926] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 346 ms
[2026-01-03 19:41:37.952] [http-nio-8080-exec-3] [ERROR] [HttpLoggingAspect] - Request failed after 399 ms : Transaction silently rolled back because it has been marked as rollback-only
org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:803)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:684)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:406)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.login(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.login(AuthController.java:41)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.LoggingAspect.logExecutionTime(LoggingAspect.java:36)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 19:41:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleGlobalException(Exception)
[2026-01-03 19:41:38.009] [http-nio-8080-exec-3] [ERROR] [GlobalExceptionHandler] - Unexpected error: 
org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:803)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:757)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:684)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:406)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.AuthService$$SpringCGLIB$$0.login(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController.login(AuthController.java:41)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.LoggingAspect.logExecutionTime(LoggingAspect.java:36)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:168)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.AuthController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:649)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 19:41:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:41:38 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=An unexpected error occurred)]
2026-01-03 19:41:38 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.transaction.UnexpectedRollbackException: Transaction silently rolled back because it has been marked as rollback-only]
2026-01-03 19:41:38 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2026-01-03 19:45:01 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 19:45:01 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 19:45:01 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:45:01 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:45:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 19:45:01 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 19:45:04 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 45959 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 19:45:04 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 19:45:04 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 19:45:04 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 19:45:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:45:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 19:45:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 1 Redis repository interface.
2026-01-03 19:45:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:45:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 19:45:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2026-01-03 19:45:05 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 19:45:05 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 19:45:05 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 19:45:05 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 984 ms
2026-01-03 19:45:06 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 19:45:06 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 19:45:06 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 19:45:06 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 19:45:06 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@a00ae54
2026-01-03 19:45:06 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 19:45:06 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 19:45:06 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 19:45:07 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 19:45:07 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 19:45:07 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:45:07 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 19:45:08 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 19:45:08 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 19:45:08 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 19:45:08 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 19:45:08 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 19:45:08 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 19:45:08 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 19:45:08 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 19:45:08 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 19:45:09 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.479 seconds (process running for 5.063)
[2026-01-03 19:45:09.004] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 19:45:09.019] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 19:45:09.043] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 19:45:09.074] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 19:45:09.096] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 19:45:09 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 19:45:09 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 19:45:09 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 19:45:09 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 19:45:09 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 19:45:23 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 19:45:23 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@501ce6e3
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@26d75b27
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 19:45:23 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:45:23.712] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:45:23.721] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:45:23.729] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 19:45:23.743] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
[2026-01-03 19:45:23.772] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@49c35d13], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@17ab907e]
[2026-01-03 19:45:23.796] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:45:23.966] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:45:23 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:45:23.978] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:45:23.987] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 19:45:24.025] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 19:45:24.026] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 1 active sessions (max allowed: 1) : [1CC1124D92004F32ADC00F875026F7AA]
[2026-01-03 19:45:24.040] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - Max sessions (1) reached for user: deepak@gmail.com
[2026-01-03 19:45:24.056] [http-nio-8080-exec-1] [ERROR] [SessionManagementService] - ❌ Session limit reached! User: deepak@gmail.com, Active: 1, Max: 1
[2026-01-03 19:45:24.072] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 19:45:24.085] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 291 ms
[2026-01-03 19:45:24.100] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=null, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true, message=Maximum 1 device(s) allowed. Please logout from another device or use force-login., activeSessions=[UserSessionRedis(sessionId=1CC1124D92004F32ADC00F875026F7AA, userId=1, email=deepak@gmail.com, deviceInfo=Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0, ipAddress=127.0.0.1, loginTime=2026-01-03T14:11:33.161870438Z, lastActivityTime=2026-01-03T14:11:33.161870438Z, active=true, deviceName=Firefox on Linux, ttl=1800)]), error=null),[]>
[2026-01-03 19:45:24.112] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 347 ms
[2026-01-03 19:45:24.123] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 19:45:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:45:24 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 19:45:24 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/force-login
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/force-login
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/force-login", parameters={}
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#forceLogin(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:46:15.643] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:46:15.668] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/force-login
[2026-01-03 19:46:15.688] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 127.0.0.1
[2026-01-03 19:46:15.701] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 19:46:15.756] [http-nio-8080-exec-2] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
[2026-01-03 19:46:15.819] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Deleted all 1 sessions for userId : 1
[2026-01-03 19:46:15.822] [http-nio-8080-exec-2] [INFO] [TokenBlackListService] - Token version incremented for user: 1
[2026-01-03 19:46:15.849] [http-nio-8080-exec-2] [INFO] [AuthService] - Force logout completed for user: deepak@gmail.com
[2026-01-03 19:46:15.878] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2026-01-03 19:46:15 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:46:16 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:46:16.110] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:46:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:46:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:46:16.131] [http-nio-8080-exec-2] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:46:16.159] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Firefox on Linux
[2026-01-03 19:46:16.190] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Retrieved 0 active sessions for userId: 1
[2026-01-03 19:46:16.219] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 19:46:16.264] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - New Redis session created: 50DC4682B0244700A37C2DB66DF13099 for user: deepak@gmail.com
2026-01-03 19:46:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 19:46:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 19:46:16.428] [http-nio-8080-exec-2] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 19:46:16.489] [http-nio-8080-exec-2] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 19:46:16.524] [http-nio-8080-exec-2] [INFO] [AuthService] - Refresh Token: db53dfde-80d6-41be-98f8-6e60f0de1350
[2026-01-03 19:46:16.566] [http-nio-8080-exec-2] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 19:46:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 19:46:16.632] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 913 ms
[2026-01-03 19:46:16.670] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 19:46:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:46:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Force login successful. All Previous sessions terminated., data=Au (truncated)...]
2026-01-03 19:46:16 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 19:47:06 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 19:47:06 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 19:47:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:47:06 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:47:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 19:47:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 19:47:08 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 46460 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 19:47:08 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 19:47:08 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 19:47:08 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 19:47:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:47:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 19:47:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 1 Redis repository interface.
2026-01-03 19:47:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 19:47:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 19:47:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2026-01-03 19:47:10 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 19:47:10 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 19:47:10 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 19:47:10 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 1366 ms
2026-01-03 19:47:10 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 19:47:10 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 19:47:10 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 19:47:10 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 19:47:11 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@57f75ac5
2026-01-03 19:47:11 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 19:47:11 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 19:47:11 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 19:47:11 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 19:47:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 19:47:11 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:47:11 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 19:47:12 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 19:47:12 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 19:47:12 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 19:47:12 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 19:47:12 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 19:47:12 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 19:47:12 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 19:47:12 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 19:47:13 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 19:47:13 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 5.214 seconds (process running for 5.806)
[2026-01-03 19:47:13.614] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 19:47:13.675] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 19:47:13.696] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 19:47:13.728] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 19:47:13.752] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 19:47:13 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 19:47:13 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 19:47:13 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 19:47:13 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 19:47:13 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 19:47:17 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 19:47:17 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@496d89b4
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@669a8d3e
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 19:47:17 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:47:17.851] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:47:17.860] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:47:17.868] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 19:47:17.875] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 19:47:17.901] [http-nio-8080-exec-1] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@7963337a], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@55800bec]
[2026-01-03 19:47:17.910] [http-nio-8080-exec-1] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:47:17 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:47:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:47:18 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:47:18.067] [http-nio-8080-exec-1] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:47:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:47:18 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:47:18.078] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:47:18.087] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 19:47:18.158] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 19:47:18.160] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 1 active sessions (max allowed: 1) : [50DC4682B0244700A37C2DB66DF13099]
[2026-01-03 19:47:18.183] [http-nio-8080-exec-1] [WARN] [SessionManagementService] - Max sessions (1) reached for user: deepak@gmail.com
[2026-01-03 19:47:18.200] [http-nio-8080-exec-1] [ERROR] [SessionManagementService] - ❌ Session limit reached! User: deepak@gmail.com, Active: 1, Max: 1
[2026-01-03 19:47:18.229] [http-nio-8080-exec-1] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 19:47:18.262] [http-nio-8080-exec-1] [INFO] [AuthController] - <<< Completed AuthController.login() in 353 ms
[2026-01-03 19:47:18.295] [http-nio-8080-exec-1] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=null, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true, message=Maximum 1 device(s) allowed. Please logout from another device or use force-login., activeSessions=[UserSessionRedis(sessionId=50DC4682B0244700A37C2DB66DF13099, userId=1, email=deepak@gmail.com, deviceInfo=Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:146.0) Gecko/20100101 Firefox/146.0, ipAddress=127.0.0.1, loginTime=2026-01-03T14:16:16.131155506Z, lastActivityTime=2026-01-03T14:16:16.131155506Z, active=true, deviceName=Firefox on Linux, ttl=1800)]), error=null),[]>
[2026-01-03 19:47:18.327] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - Response Time : 428 ms
[2026-01-03 19:47:18.348] [http-nio-8080-exec-1] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 19:47:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:47:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 19:47:18 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 19:47:44.119] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 19:47:44.132] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 19:47:44.155] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 19:47:44.184] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 19:47:44.214] [http-nio-8080-exec-3] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@3a0ecd26], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@3e315ebf]
[2026-01-03 19:47:44.247] [http-nio-8080-exec-3] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 19:47:44.463] [http-nio-8080-exec-3] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 19:47:44.475] [http-nio-8080-exec-3] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 19:47:44.486] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 19:47:44.501] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - Retrieved 0 active sessions for userId: 1
[2026-01-03 19:47:44.525] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 19:47:44.609] [http-nio-8080-exec-3] [INFO] [SessionManagementService] - New Redis session created: C932046AC66E459F9A63BCDB0CB30CC9 for user: deepak@gmail.com
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 19:47:44.781] [http-nio-8080-exec-3] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 19:47:44.819] [http-nio-8080-exec-3] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 19:47:44.851] [http-nio-8080-exec-3] [INFO] [AuthService] - Refresh Token: 107d0d9a-691a-4970-b837-49e7d31c2eb0
[2026-01-03 19:47:44.888] [http-nio-8080-exec-3] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 19:47:44 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 19:47:44.935] [http-nio-8080-exec-3] [INFO] [AuthController] - <<< Completed AuthController.login() in 691 ms
[2026-01-03 19:47:44.961] [http-nio-8080-exec-3] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJ0b2tlblZlcnNpb24iOjAsInR5cGUiOiJhY2Nlc3MiLCJ1c2VySWQiOjEsInN1YiI6ImRlZXBha0BnbWFpbC5jb20iLCJpYXQiOjE3Njc0NDk4NjQsImV4cCI6MTc2NzQ1MDc2NH0.skCS5WMOno5cebYuoWkAqRANf_n2rQlrqGOiQOgA2jE, sessionId=C932046AC66E459F9A63BCDB0CB30CC9, type=Bearer, name=Deepak Kumar Verma, email=deepak@gmail.com, role=Admin, expiresIn=900, hasActiveSession=false, message=null, activeSessions=null), error=null),[]>
[2026-01-03 19:47:44.989] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - Response Time : 776 ms
[2026-01-03 19:47:45.031] [http-nio-8080-exec-3] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 19:47:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 19:47:45 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Login successful, data=AuthResponse(accessToken=eyJhbGciOiJIUzI1Ni (truncated)...]
2026-01-03 19:47:45 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 19:47:53 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 19:47:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:47:53 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 19:47:53.727] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - No HTTP session found - creating new session
[2026-01-03 19:47:53.788] [http-nio-8080-exec-4] [INFO] [JwtAuthenticationFilter] - Created new HTTP session: BDE4830A8287FE0911C5373BAECC3365
[2026-01-03 19:47:53.803] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [BDE4830A8287FE0911C5373BAECC3365]
[2026-01-03 19:47:53.827] [http-nio-8080-exec-4] [WARN] [SessionManagementService] - Session not found in Redis: BDE4830A8287FE0911C5373BAECC3365
[2026-01-03 19:47:53.855] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 31 ms
[2026-01-03 19:47:53.880] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Result : false
[2026-01-03 19:47:53.909] [http-nio-8080-exec-4] [WARN] [JwtAuthenticationFilter] - SESSION INVALID (idle timeout): BDE4830A8287FE0911C5373BAECC3365
2026-01-03 19:48:20 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 19:48:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 19:48:20 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 19:48:20.899] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [BDE4830A8287FE0911C5373BAECC3365]
[2026-01-03 19:48:20.915] [http-nio-8080-exec-5] [WARN] [SessionManagementService] - Session not found in Redis: BDE4830A8287FE0911C5373BAECC3365
[2026-01-03 19:48:20.936] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 24 ms
[2026-01-03 19:48:20.965] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Result : false
[2026-01-03 19:48:20.992] [http-nio-8080-exec-5] [WARN] [JwtAuthenticationFilter] - SESSION INVALID (idle timeout): BDE4830A8287FE0911C5373BAECC3365
2026-01-03 19:53:52 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 19:53:52 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 19:53:52 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 19:53:52 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 19:53:52 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 19:53:52 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-03 20:07:29 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Starting CloudbalanceBackendApplication using Java 25.0.1 with PID 49061 (/home/deepak/Desktop/cloudbalance-backend/build/classes/java/main started by deepak in /home/deepak/Desktop/cloudbalance-backend)
2026-01-03 20:07:29 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-01-03 20:07:29 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-01-03 20:07:29 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-01-03 20:07:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 20:07:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-03 20:07:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 1 Redis repository interface.
2026-01-03 20:07:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-03 20:07:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-03 20:07:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2026-01-03 20:07:30 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-01-03 20:07:30 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-01-03 20:07:30 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/11.0.14]
2026-01-03 20:07:30 [restartedMain] INFO  o.s.b.w.c.s.WebApplicationContextInitializer - Root WebApplicationContext: initialization completed in 940 ms
2026-01-03 20:07:31 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-03 20:07:31 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 7.1.8.Final
2026-01-03 20:07:31 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-03 20:07:31 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-03 20:07:31 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@78dccb6d
2026-01-03 20:07:31 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-03 20:07:31 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-03 20:07:31 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/cloudbalance]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 16.11
	Default catalog/schema: cloudbalance/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-03 20:07:32 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table account_assignments (
        active boolean not null,
        assigned_at timestamp(6),
        aws_account_id bigint not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        primary key (id)
    )
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table aws_accounts (
        active boolean not null,
        monthly_budget numeric(12,2),
        created_at timestamp(6),
        id bigint generated by default as identity,
        update_at timestamp(6),
        access_key_id varchar(100) not null,
        secret_access_key varchar(100) not null,
        account_alias varchar(255) not null,
        account_id varchar(255) not null unique,
        region varchar(255) not null,
        primary key (id)
    )
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table refresh_tokens (
        revoked boolean not null,
        token_version integer not null,
        created_at timestamp(6) with time zone not null,
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255),
        token varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id integer generated by default as identity,
        name bytea not null unique,
        description varchar(255),
        primary key (id)
    )
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role varchar(255) check ((role in ('ADMIN','READ_ONLY','CUSTOMER')))
    )
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_sessions (
        active boolean not null,
        id bigint generated by default as identity,
        last_activity_time timestamp(6) with time zone not null,
        login_time timestamp(6) with time zone not null,
        user_id bigint not null,
        device_info varchar(255) not null,
        ip_address varchar(255) not null,
        session_id varchar(255) not null unique,
        primary key (id)
    )
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        active boolean not null,
        token_version integer not null,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login timestamp(6),
        updated_at timestamp(6),
        first_name varchar(25) not null,
        last_name varchar(25),
        email varchar(50) not null unique,
        password varchar(255) not null,
        primary key (id)
    )
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FKnno5s36p9ptmvqg8gw2af180g 
       foreign key (aws_account_id) 
       references aws_accounts
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       add constraint FK1mw2iy4uos4pxhtcrovi6sqy 
       foreign key (user_id) 
       references users
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       add constraint FKj345gk1bovqvfame88rcx7yyx 
       foreign key (user_id) 
       references users
2026-01-03 20:07:32 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       add constraint FK8klxsgb8dcjjklmqebqp1twd5 
       foreign key (user_id) 
       references users
2026-01-03 20:07:32 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 20:07:32 [restartedMain] INFO  o.s.d.j.r.q.QueryEnhancerFactories - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-03 20:07:32 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2026-01-03 20:07:32 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2026-01-03 20:07:33 [restartedMain] WARN  o.s.b.j.a.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-03 20:07:33 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-03 20:07:33 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 25 mappings in 'requestMappingHandlerMapping'
2026-01-03 20:07:33 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-03 20:07:33 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-03 20:07:33 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-03 20:07:33 [restartedMain] INFO  o.s.boot.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2026-01-03 20:07:33 [restartedMain] INFO  c.c.c.CloudbalanceBackendApplication - Started CloudbalanceBackendApplication in 4.132 seconds (process running for 4.505)
[2026-01-03 20:07:33.836] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ PostgreSQL connection successful!
[2026-01-03 20:07:33.844] [restartedMain] [INFO] [ConnectionTestRunner] -   Database: cloudbalance
[2026-01-03 20:07:33.853] [restartedMain] [INFO] [ConnectionTestRunner] -   URL: jdbc:postgresql://localhost:5432/cloudbalance
[2026-01-03 20:07:33.865] [restartedMain] [INFO] [ConnectionTestRunner] - ✓ Redis connection successful!
[2026-01-03 20:07:33.873] [restartedMain] [INFO] [ConnectionTestRunner] -   Host: localhost:6379
2026-01-03 20:07:33 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        users u1_0
2026-01-03 20:07:33 [restartedMain] INFO  c.c.c.config.DataInitializer - Initializing default users...
2026-01-03 20:07:34 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (active, created_at, email, first_name, last_login, last_name, password, token_version, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-03 20:07:34 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        user_role
        (user_id, role) 
    values
        (?, ?)
2026-01-03 20:07:34 [restartedMain] INFO  c.c.c.config.DataInitializer - Default admin user created : deepak@gmail.com / SecurePassword@123
2026-01-03 20:08:46 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-03 20:08:46 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7734767b
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@11063fb0
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-03 20:08:46 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 20:08:46.418] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 20:08:46.428] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 20:08:46.438] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 20:08:46.449] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 20:08:46.462] [http-nio-8080-exec-2] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@535a5ed1], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@704b72e9]
[2026-01-03 20:08:46.472] [http-nio-8080-exec-2] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 20:08:46.655] [http-nio-8080-exec-2] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 20:08:46.666] [http-nio-8080-exec-2] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 20:08:46.674] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 20:08:46.707] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 20:08:46.707] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 1 active sessions (max allowed: 1) : [C932046AC66E459F9A63BCDB0CB30CC9]
[2026-01-03 20:08:46.714] [http-nio-8080-exec-2] [WARN] [SessionManagementService] - Max sessions (1) reached for user: deepak@gmail.com
[2026-01-03 20:08:46.722] [http-nio-8080-exec-2] [ERROR] [SessionManagementService] - ❌ Session limit reached! User: deepak@gmail.com, Active: 1, Max: 1
[2026-01-03 20:08:46.731] [http-nio-8080-exec-2] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 20:08:46.741] [http-nio-8080-exec-2] [INFO] [AuthController] - <<< Completed AuthController.login() in 271 ms
[2026-01-03 20:08:46.750] [http-nio-8080-exec-2] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=null, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true, message=Maximum 1 device(s) allowed. Please logout from another device or use force-login., activeSessions=[UserSessionRedis(sessionId=C932046AC66E459F9A63BCDB0CB30CC9, userId=1, email=deepak@gmail.com, deviceInfo=PostmanRuntime/7.49.1, ipAddress=0:0:0:0:0:0:0:1, loginTime=2026-01-03T14:17:44.475730373Z, lastActivityTime=2026-01-03T14:17:44.475730373Z, active=true, deviceName=Desktop, ttl=1800)]), error=null),[]>
[2026-01-03 20:08:46.759] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - Response Time : 299 ms
[2026-01-03 20:08:46.767] [http-nio-8080-exec-2] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 20:08:46 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 20:08:50 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
[2026-01-03 20:08:50.418] [http-nio-8080-exec-3] [WARN] [JwtAuthenticationFilter] - Token expired during extraction - will attempt auto-refresh
2026-01-03 20:08:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 20:08:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 20:08:50.444] [http-nio-8080-exec-3] [ERROR] [JwtAuthenticationFilter] - JWT Authentication Exception: JWT expired 366444 milliseconds ago at 2026-01-03T14:32:44.000Z. Current time: 2026-01-03T14:38:50.444Z. Allowed clock skew: 0 milliseconds.
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/force-login
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/force-login
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/force-login", parameters={}
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#forceLogin(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 20:09:46.613] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 20:09:46.622] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/force-login
[2026-01-03 20:09:46.633] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 20:09:46.643] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.user_id=? 
        and rt1_0.revoked=false
[2026-01-03 20:09:46.667] [http-nio-8080-exec-4] [INFO] [RefreshTokenService] - All tokens revoked for user : deepak@gmail.com
[2026-01-03 20:09:46.687] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Deleted all 1 sessions for userId : 1
[2026-01-03 20:09:46.696] [http-nio-8080-exec-4] [INFO] [TokenBlackListService] - Token version incremented for user: 1
[2026-01-03 20:09:46.705] [http-nio-8080-exec-4] [INFO] [AuthService] - Force logout completed for user: deepak@gmail.com
[2026-01-03 20:09:46.711] [http-nio-8080-exec-4] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 20:09:46.793] [http-nio-8080-exec-4] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 20:09:46.803] [http-nio-8080-exec-4] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 20:09:46.812] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 20:09:46.823] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - Retrieved 0 active sessions for userId: 1
[2026-01-03 20:09:46.831] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 0 active sessions (max allowed: 1) : []
[2026-01-03 20:09:46.848] [http-nio-8080-exec-4] [INFO] [SessionManagementService] - New Redis session created: E2ED483AB8424B8F9B26A06869866222 for user: deepak@gmail.com
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.device_info,
        rt1_0.expiry_date,
        rt1_0.ip_address,
        rt1_0.last_activity_time,
        rt1_0.revoked,
        rt1_0.session_id,
        rt1_0.token,
        rt1_0.token_version,
        rt1_0.user_id 
    from
        refresh_tokens rt1_0 
    where
        rt1_0.session_id=? 
        and rt1_0.revoked=false
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        refresh_tokens
        (created_at, device_info, expiry_date, ip_address, last_activity_time, revoked, session_id, token, token_version, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
[2026-01-03 20:09:46.867] [http-nio-8080-exec-4] [INFO] [AuthService] - === SETTING COOKIES ===
[2026-01-03 20:09:46.878] [http-nio-8080-exec-4] [INFO] [AuthService] - Access Token: eyJhbGciOiJIUzI1NiJ9...
[2026-01-03 20:09:46.887] [http-nio-8080-exec-4] [INFO] [AuthService] - Refresh Token: 22d4e222-248e-410e-abe1-5831e6b00834
[2026-01-03 20:09:46.896] [http-nio-8080-exec-4] [INFO] [AuthService] - User logged in successfully : deepak@gmail.com
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        users 
    set
        active=?,
        email=?,
        first_name=?,
        last_login=?,
        last_name=?,
        password=?,
        token_version=?,
        updated_at=? 
    where
        id=?
[2026-01-03 20:09:46.906] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - Response Time : 253 ms
[2026-01-03 20:09:46.914] [http-nio-8080-exec-4] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Force login successful. All Previous sessions terminated., data=Au (truncated)...]
2026-01-03 20:09:46 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 20:10:04.835] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - >>> Starting SessionManagementService.isSessionValid() with args : [E2ED483AB8424B8F9B26A06869866222]
[2026-01-03 20:10:04.847] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - <<< Completed SessionManagementService.isSessionValid() in 2 ms
[2026-01-03 20:10:04.856] [http-nio-8080-exec-5] [INFO] [SessionManagementService] - Result : true
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@52e8376c]
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users?page=0&size=10&sortBy=createdAt&sortDir=desc&search=deepak&active=true&role=ADMIN", parameters={masked}
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getAllUsers(Integer, Integer, String, String, String, Boolean, UserRole)
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getAllUsers(java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String,java.lang.String,java.lang.Boolean,com.cloudkeeper.cloudbalance_backend.entity.UserRole); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-03 20:10:04.885] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 20:10:04.892] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users
[2026-01-03 20:10:04.903] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 20:10:04.911] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
        or lower(u1_0.email) like lower(('%'||?||'%')) escape '' 
    order by
        u1_0.created_at desc 
    fetch
        first ? rows only
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
[2026-01-03 20:10:04.937] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - Response Time : 18 ms
[2026-01-03 20:10:04.946] [http-nio-8080-exec-5] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Users retrieved successfully, data=PagedResponse(content=[UserResp (truncated)...]
2026-01-03 20:10:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users/2
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users/2
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users/2", parameters={}
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getUserById(Long)
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getUserById(java.lang.Long); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getUserById(java.lang.Long); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-03 20:10:16.148] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 20:10:16.157] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users/2
[2026-01-03 20:10:16.166] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 20:10:16.175] [http-nio-8080-exec-6] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
[2026-01-03 20:10:16.187] [http-nio-8080-exec-6] [ERROR] [HttpLoggingAspect] - Request failed after 4 ms : No user found with id : 2
com.cloudkeeper.cloudbalance_backend.exception.ResourceNotFoundException: No user found with id : 2
	at com.cloudkeeper.cloudbalance_backend.service.UserService.lambda$getUserById$0(UserService.java:81)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.cloudkeeper.cloudbalance_backend.service.UserService.getUserById(UserService.java:81)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:370)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.service.UserService$$SpringCGLIB$$0.getUserById(<generated>)
	at com.cloudkeeper.cloudbalance_backend.controller.UserController.getUserById(UserController.java:78)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:85)
	at com.cloudkeeper.cloudbalance_backend.logging.aspect.HttpLoggingAspect.logHttpRequest(HttpLoggingAspect.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:648)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:630)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:271)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:266)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:197)
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719)
	at com.cloudkeeper.cloudbalance_backend.controller.UserController$$SpringCGLIB$$0.getUserById(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:190)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:934)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:853)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:86)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:866)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:892)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:874)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:128)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:235)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:371)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:132)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:86)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:181)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at com.cloudkeeper.cloudbalance_backend.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:198)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57)
	at java.base/java.lang.Thread.run(Thread.java:1474)
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.cloudkeeper.cloudbalance_backend.exception.GlobalExceptionHandler#handleResourceNotFoundException(ResourceNotFoundException)
[2026-01-03 20:10:16.206] [http-nio-8080-exec-6] [ERROR] [GlobalExceptionHandler] - Resource not found: No user found with id : 2
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=null, data=null, error=No user found with id : 2)]
2026-01-03 20:10:16 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.cloudkeeper.cloudbalance_backend.exception.ResourceNotFoundException: No user found with id : 2]
2026-01-03 20:10:16 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users/1
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users/1
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/users/1", parameters={}
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.UserController#getUserById(Long)
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getUserById(java.lang.Long); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.UserController.getUserById(java.lang.Long); target is of class [com.cloudkeeper.cloudbalance_backend.controller.UserController]
[2026-01-03 20:10:20.875] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 20:10:20.889] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/users/1
[2026-01-03 20:10:20.901] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 20:10:20.911] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
[2026-01-03 20:10:20.923] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - Response Time : 3 ms
[2026-01-03 20:10:20.932] [http-nio-8080-exec-7] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=User retrieved successfully, data=UserResponse(id=1, firstName=Dee (truncated)...]
2026-01-03 20:10:20 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts", parameters={}
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getAllAwsAccounts()
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getAllAwsAccounts(); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-03 20:10:29.136] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 20:10:29.146] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts
[2026-01-03 20:10:29.154] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 20:10:29.163] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        aa1_0.id,
        aa1_0.access_key_id,
        aa1_0.account_alias,
        aa1_0.account_id,
        aa1_0.active,
        aa1_0.created_at,
        aa1_0.monthly_budget,
        aa1_0.region,
        aa1_0.secret_access_key,
        aa1_0.update_at 
    from
        aws_accounts aa1_0
[2026-01-03 20:10:29.183] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - Response Time : 10 ms
[2026-01-03 20:10:29.191] [http-nio-8080-exec-8] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=null, data=[], error=null)]
2026-01-03 20:10:29 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /accounts/my-accounts
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /accounts/my-accounts
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/accounts/my-accounts", parameters={}
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController#getMyAccounts(Authentication)
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getMyAccounts(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController.getMyAccounts(org.springframework.security.core.Authentication); target is of class [com.cloudkeeper.cloudbalance_backend.controller.AwsAccountController]
[2026-01-03 20:10:33.595] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 20:10:33.603] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - URL: GET /api/v1/accounts/my-accounts
[2026-01-03 20:10:33.612] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 20:10:33.620] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        aa1_0.id,
        aa1_0.access_key_id,
        aa1_0.account_alias,
        aa1_0.account_id,
        aa1_0.active,
        aa1_0.created_at,
        aa1_0.monthly_budget,
        aa1_0.region,
        aa1_0.secret_access_key,
        aa1_0.update_at 
    from
        aws_accounts aa1_0 
    join
        account_assignments a1_0 
            on aa1_0.id=a1_0.aws_account_id 
    where
        a1_0.user_id=? 
        and aa1_0.active=true 
        and a1_0.active=true
[2026-01-03 20:10:33.635] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - Response Time : 7 ms
[2026-01-03 20:10:33.644] [http-nio-8080-exec-9] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=true, message=Your accounts retrieved successfully., data=[], error=null)]
2026-01-03 20:10:33 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 20:10:39 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2026-01-03 20:10:39 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2026-01-03 20:10:39 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/v1/auth/login", parameters={}
2026-01-03 20:10:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.cloudkeeper.cloudbalance_backend.controller.AuthController#login(LoginRequest, HttpServletRequest, HttpServletResponse)
2026-01-03 20:10:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123)]
[2026-01-03 20:10:39.886] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ============= HTTP REQUEST ===============
[2026-01-03 20:10:39.895] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - URL: POST /api/v1/auth/login
[2026-01-03 20:10:39.904] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Client IP: 0:0:0:0:0:0:0:1
[2026-01-03 20:10:39.911] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - User-Agent: PostmanRuntime/7.49.1
[2026-01-03 20:10:39.920] [http-nio-8080-exec-10] [INFO] [AuthController] - >>> Starting AuthController.login() with args : [LoginRequest(email=deepak@gmail.com, password=SecurePassword@123), SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@3ab061e3], org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleHttpServletResponse@3e8ff26d]
[2026-01-03 20:10:39.928] [http-nio-8080-exec-10] [INFO] [AuthService] - Login attempt for email :deepak@gmail.com
2026-01-03 20:10:39 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 20:10:39 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_role r1_0 
    where
        r1_0.user_id=?
2026-01-03 20:10:40 [http-nio-8080-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
[2026-01-03 20:10:40.000] [http-nio-8080-exec-10] [INFO] [AuthService] - Authentication successful for: deepak@gmail.com
2026-01-03 20:10:40 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2026-01-03 20:10:40 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password,
        u1_0.token_version,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
[2026-01-03 20:10:40.012] [http-nio-8080-exec-10] [WARN] [SessionManagementService] - maxCurrentSessions : 1 and idleTimeOut : 1800000, and forceLogoutOldest : false
[2026-01-03 20:10:40.024] [http-nio-8080-exec-10] [INFO] [SessionManagementService] - Creating Redis session for user : deepak@gmail.com on device: Desktop
[2026-01-03 20:10:40.035] [http-nio-8080-exec-10] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 20:10:40.043] [http-nio-8080-exec-10] [INFO] [SessionManagementService] - User deepak@gmail.com currently has 1 active sessions (max allowed: 1) : [E2ED483AB8424B8F9B26A06869866222]
[2026-01-03 20:10:40.051] [http-nio-8080-exec-10] [WARN] [SessionManagementService] - Max sessions (1) reached for user: deepak@gmail.com
[2026-01-03 20:10:40.060] [http-nio-8080-exec-10] [ERROR] [SessionManagementService] - ❌ Session limit reached! User: deepak@gmail.com, Active: 1, Max: 1
[2026-01-03 20:10:40.071] [http-nio-8080-exec-10] [INFO] [SessionManagementService] - Retrieved 1 active sessions for userId: 1
[2026-01-03 20:10:40.079] [http-nio-8080-exec-10] [INFO] [AuthController] - <<< Completed AuthController.login() in 152 ms
[2026-01-03 20:10:40.089] [http-nio-8080-exec-10] [INFO] [AuthController] - Result : <200 OK OK,ApiResponse(success=false, message=User already logged in on another device. Use force login to continue., data=AuthResponse(accessToken=null, sessionId=null, type=null, name=null, email=deepak@gmail.com, role=null, expiresIn=null, hasActiveSession=true, message=Maximum 1 device(s) allowed. Please logout from another device or use force-login., activeSessions=[UserSessionRedis(sessionId=E2ED483AB8424B8F9B26A06869866222, userId=1, email=deepak@gmail.com, deviceInfo=PostmanRuntime/7.49.1, ipAddress=0:0:0:0:0:0:0:1, loginTime=2026-01-03T14:39:46.803611747Z, lastActivityTime=2026-01-03T14:40:04.867503230Z, active=true, deviceName=Desktop, ttl=1800)]), error=null),[]>
[2026-01-03 20:10:40.097] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - Response Time : 178 ms
[2026-01-03 20:10:40.106] [http-nio-8080-exec-10] [INFO] [HttpLoggingAspect] - ==================== Request Completed ===================
2026-01-03 20:10:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-03 20:10:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiResponse(success=false, message=User already logged in on another device. Use force login to cont (truncated)...]
2026-01-03 20:10:40 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-01-03 20:10:40 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=deepak@gmail.com, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2026-01-03 20:11:43 [SpringApplicationShutdownHook] INFO  o.s.boot.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-01-03 20:11:43 [tomcat-shutdown] INFO  o.s.boot.tomcat.GracefulShutdown - Graceful shutdown complete
2026-01-03 20:11:43 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FKnno5s36p9ptmvqg8gw2af180g
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists account_assignments 
       drop constraint if exists FK1mw2iy4uos4pxhtcrovi6sqy
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists refresh_tokens 
       drop constraint if exists FK1lih5y2npsf8u5o3vhdb9y0os
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_role 
       drop constraint if exists FKj345gk1bovqvfame88rcx7yyx
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists user_sessions 
       drop constraint if exists FK8klxsgb8dcjjklmqebqp1twd5
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists account_assignments cascade
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists aws_accounts cascade
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists refresh_tokens cascade
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role cascade
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_sessions cascade
2026-01-03 20:11:43 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2026-01-03 20:11:43 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-03 20:11:43 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
